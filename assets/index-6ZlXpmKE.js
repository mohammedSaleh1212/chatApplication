function VT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var qP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function __(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function KP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var FT={exports:{}},Rf={},UT={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc=Symbol.for("react.element"),GP=Symbol.for("react.portal"),QP=Symbol.for("react.fragment"),YP=Symbol.for("react.strict_mode"),XP=Symbol.for("react.profiler"),JP=Symbol.for("react.provider"),ZP=Symbol.for("react.context"),ek=Symbol.for("react.forward_ref"),tk=Symbol.for("react.suspense"),nk=Symbol.for("react.memo"),rk=Symbol.for("react.lazy"),Zv=Symbol.iterator;function ik(t){return t===null||typeof t!="object"?null:(t=Zv&&t[Zv]||t["@@iterator"],typeof t=="function"?t:null)}var jT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BT=Object.assign,$T={};function Dl(t,e,n){this.props=t,this.context=e,this.refs=$T,this.updater=n||jT}Dl.prototype.isReactComponent={};Dl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zT(){}zT.prototype=Dl.prototype;function y_(t,e,n){this.props=t,this.context=e,this.refs=$T,this.updater=n||jT}var v_=y_.prototype=new zT;v_.constructor=y_;BT(v_,Dl.prototype);v_.isPureReactComponent=!0;var ew=Array.isArray,WT=Object.prototype.hasOwnProperty,w_={current:null},HT={key:!0,ref:!0,__self:!0,__source:!0};function qT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)WT.call(e,r)&&!HT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Vc,type:t,key:s,ref:o,props:i,_owner:w_.current}}function sk(t,e){return{$$typeof:Vc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vc}function ok(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tw=/\/+/g;function Up(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ok(""+t.key):e.toString(36)}function rd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vc:case GP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Up(o,0):r,ew(i)?(n="",t!=null&&(n=t.replace(tw,"$&/")+"/"),rd(i,e,n,"",function(c){return c})):i!=null&&(E_(i)&&(i=sk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(tw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ew(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Up(s,a);o+=rd(s,e,n,l,i)}else if(l=ik(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Up(s,a++),o+=rd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xh(t,e,n){if(t==null)return t;var r=[],i=0;return rd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ak(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},id={transition:null},lk={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:id,ReactCurrentOwner:w_};Ne.Children={map:xh,forEach:function(t,e,n){xh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xh(t,function(){e++}),e},toArray:function(t){return xh(t,function(e){return e})||[]},only:function(t){if(!E_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ne.Component=Dl;Ne.Fragment=QP;Ne.Profiler=XP;Ne.PureComponent=y_;Ne.StrictMode=YP;Ne.Suspense=tk;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;Ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=BT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=w_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)WT.call(e,l)&&!HT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Vc,type:t.type,key:i,ref:s,props:r,_owner:o}};Ne.createContext=function(t){return t={$$typeof:ZP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JP,_context:t},t.Consumer=t};Ne.createElement=qT;Ne.createFactory=function(t){var e=qT.bind(null,t);return e.type=t,e};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(t){return{$$typeof:ek,render:t}};Ne.isValidElement=E_;Ne.lazy=function(t){return{$$typeof:rk,_payload:{_status:-1,_result:t},_init:ak}};Ne.memo=function(t,e){return{$$typeof:nk,type:t,compare:e===void 0?null:e}};Ne.startTransition=function(t){var e=id.transition;id.transition={};try{t()}finally{id.transition=e}};Ne.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ne.useCallback=function(t,e){return Rn.current.useCallback(t,e)};Ne.useContext=function(t){return Rn.current.useContext(t)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};Ne.useEffect=function(t,e){return Rn.current.useEffect(t,e)};Ne.useId=function(){return Rn.current.useId()};Ne.useImperativeHandle=function(t,e,n){return Rn.current.useImperativeHandle(t,e,n)};Ne.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};Ne.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};Ne.useMemo=function(t,e){return Rn.current.useMemo(t,e)};Ne.useReducer=function(t,e,n){return Rn.current.useReducer(t,e,n)};Ne.useRef=function(t){return Rn.current.useRef(t)};Ne.useState=function(t){return Rn.current.useState(t)};Ne.useSyncExternalStore=function(t,e,n){return Rn.current.useSyncExternalStore(t,e,n)};Ne.useTransition=function(){return Rn.current.useTransition()};Ne.version="18.2.0";UT.exports=Ne;var H=UT.exports;const T_=__(H),uk=VT({__proto__:null,default:T_},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ck=H,hk=Symbol.for("react.element"),dk=Symbol.for("react.fragment"),fk=Object.prototype.hasOwnProperty,pk=ck.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mk={key:!0,ref:!0,__self:!0,__source:!0};function KT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fk.call(e,r)&&!mk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hk,type:t,key:s,ref:o,props:i,_owner:pk.current}}Rf.Fragment=dk;Rf.jsx=KT;Rf.jsxs=KT;FT.exports=Rf;var G=FT.exports,Om={},GT={exports:{}},or={},QT={exports:{}},YT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,le){var de=Z.length;Z.push(le);e:for(;0<de;){var Re=de-1>>>1,Ie=Z[Re];if(0<i(Ie,le))Z[Re]=le,Z[de]=Ie,de=Re;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var le=Z[0],de=Z.pop();if(de!==le){Z[0]=de;e:for(var Re=0,Ie=Z.length,z=Ie>>>1;Re<z;){var We=2*(Re+1)-1,Ke=Z[We],et=We+1,tt=Z[et];if(0>i(Ke,de))et<Ie&&0>i(tt,Ke)?(Z[Re]=tt,Z[et]=de,Re=et):(Z[Re]=Ke,Z[We]=de,Re=We);else if(et<Ie&&0>i(tt,de))Z[Re]=tt,Z[et]=de,Re=et;else break e}}return le}function i(Z,le){var de=Z.sortIndex-le.sortIndex;return de!==0?de:Z.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,p=null,m=3,y=!1,I=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Z){for(var le=n(c);le!==null;){if(le.callback===null)r(c);else if(le.startTime<=Z)r(c),le.sortIndex=le.expirationTime,e(l,le);else break;le=n(c)}}function V(Z){if(k=!1,R(Z),!I)if(n(l)!==null)I=!0,Ze(B);else{var le=n(c);le!==null&&we(V,le.startTime-Z)}}function B(Z,le){I=!1,k&&(k=!1,S(v),v=-1),y=!0;var de=m;try{for(R(le),p=n(l);p!==null&&(!(p.expirationTime>le)||Z&&!N());){var Re=p.callback;if(typeof Re=="function"){p.callback=null,m=p.priorityLevel;var Ie=Re(p.expirationTime<=le);le=t.unstable_now(),typeof Ie=="function"?p.callback=Ie:p===n(l)&&r(l),R(le)}else r(l);p=n(l)}if(p!==null)var z=!0;else{var We=n(c);We!==null&&we(V,We.startTime-le),z=!1}return z}finally{p=null,m=de,y=!1}}var b=!1,C=null,v=-1,T=5,A=-1;function N(){return!(t.unstable_now()-A<T)}function M(){if(C!==null){var Z=t.unstable_now();A=Z;var le=!0;try{le=C(!0,Z)}finally{le?P():(b=!1,C=null)}}else b=!1}var P;if(typeof E=="function")P=function(){E(M)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Je=ye.port2;ye.port1.onmessage=M,P=function(){Je.postMessage(null)}}else P=function(){x(M,0)};function Ze(Z){C=Z,b||(b=!0,P())}function we(Z,le){v=x(function(){Z(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){I||y||(I=!0,Ze(B))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var le=3;break;default:le=m}var de=m;m=le;try{return Z()}finally{m=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=m;m=Z;try{return le()}finally{m=de}},t.unstable_scheduleCallback=function(Z,le,de){var Re=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Re+de:Re):de=Re,Z){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=de+Ie,Z={id:d++,callback:le,priorityLevel:Z,startTime:de,expirationTime:Ie,sortIndex:-1},de>Re?(Z.sortIndex=de,e(c,Z),n(l)===null&&Z===n(c)&&(k?(S(v),v=-1):k=!0,we(V,de-Re))):(Z.sortIndex=Ie,e(l,Z),I||y||(I=!0,Ze(B))),Z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(Z){var le=m;return function(){var de=m;m=le;try{return Z.apply(this,arguments)}finally{m=de}}}})(YT);QT.exports=YT;var gk=QT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT=H,nr=gk;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JT=new Set,rc={};function ta(t,e){al(t,e),al(t+"Capture",e)}function al(t,e){for(rc[t]=e,t=0;t<e.length;t++)JT.add(e[t])}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lm=Object.prototype.hasOwnProperty,_k=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nw={},rw={};function yk(t){return Lm.call(rw,t)?!0:Lm.call(nw,t)?!1:_k.test(t)?rw[t]=!0:(nw[t]=!0,!1)}function vk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wk(t,e,n,r){if(e===null||typeof e>"u"||vk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new Pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new Pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new Pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new Pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new Pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new Pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new Pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new Pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new Pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var I_=/[\-:]([a-z])/g;function S_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(I_,S_);nn[e]=new Pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(I_,S_);nn[e]=new Pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(I_,S_);nn[e]=new Pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function C_(t,e,n,r){var i=nn.hasOwnProperty(e)?nn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wk(e,n,i,r)&&(n=null),r||i===null?yk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zi=XT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dh=Symbol.for("react.element"),Na=Symbol.for("react.portal"),xa=Symbol.for("react.fragment"),A_=Symbol.for("react.strict_mode"),Mm=Symbol.for("react.profiler"),ZT=Symbol.for("react.provider"),eI=Symbol.for("react.context"),R_=Symbol.for("react.forward_ref"),Vm=Symbol.for("react.suspense"),Fm=Symbol.for("react.suspense_list"),P_=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),tI=Symbol.for("react.offscreen"),iw=Symbol.iterator;function cu(t){return t===null||typeof t!="object"?null:(t=iw&&t[iw]||t["@@iterator"],typeof t=="function"?t:null)}var Et=Object.assign,jp;function Au(t){if(jp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jp=e&&e[1]||""}return`
`+jp+t}var Bp=!1;function $p(t,e){if(!t||Bp)return"";Bp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Bp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Au(t):""}function Ek(t){switch(t.tag){case 5:return Au(t.type);case 16:return Au("Lazy");case 13:return Au("Suspense");case 19:return Au("SuspenseList");case 0:case 2:case 15:return t=$p(t.type,!1),t;case 11:return t=$p(t.type.render,!1),t;case 1:return t=$p(t.type,!0),t;default:return""}}function Um(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xa:return"Fragment";case Na:return"Portal";case Mm:return"Profiler";case A_:return"StrictMode";case Vm:return"Suspense";case Fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eI:return(t.displayName||"Context")+".Consumer";case ZT:return(t._context.displayName||"Context")+".Provider";case R_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P_:return e=t.displayName||null,e!==null?e:Um(t.type)||"Memo";case Ts:e=t._payload,t=t._init;try{return Um(t(e))}catch{}}return null}function Tk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Um(e);case 8:return e===A_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ik(t){var e=nI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oh(t){t._valueTracker||(t._valueTracker=Ik(t))}function rI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=nI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jm(t,e){var n=e.checked;return Et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iI(t,e){e=e.checked,e!=null&&C_(t,"checked",e,!1)}function Bm(t,e){iI(t,e);var n=qs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$m(t,e.type,n):e.hasOwnProperty("defaultValue")&&$m(t,e.type,qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ow(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $m(t,e,n){(e!=="number"||Rd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ru=Array.isArray;function Ga(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Ru(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qs(n)}}function sI(t,e){var n=qs(e.value),r=qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lh,aI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lh=Lh||document.createElement("div"),Lh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ic(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sk=["Webkit","ms","Moz","O"];Object.keys(Fu).forEach(function(t){Sk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fu[e]=Fu[t]})});function lI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fu.hasOwnProperty(t)&&Fu[t]?(""+e).trim():e+"px"}function uI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ck=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hm(t,e){if(e){if(Ck[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function qm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Km=null;function k_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gm=null,Qa=null,Ya=null;function uw(t){if(t=jc(t)){if(typeof Gm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=xf(e),Gm(t.stateNode,t.type,e))}}function cI(t){Qa?Ya?Ya.push(t):Ya=[t]:Qa=t}function hI(){if(Qa){var t=Qa,e=Ya;if(Ya=Qa=null,uw(t),e)for(t=0;t<e.length;t++)uw(e[t])}}function dI(t,e){return t(e)}function fI(){}var zp=!1;function pI(t,e,n){if(zp)return t(e,n);zp=!0;try{return dI(t,e,n)}finally{zp=!1,(Qa!==null||Ya!==null)&&(fI(),hI())}}function sc(t,e){var n=t.stateNode;if(n===null)return null;var r=xf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Qm=!1;if(Wi)try{var hu={};Object.defineProperty(hu,"passive",{get:function(){Qm=!0}}),window.addEventListener("test",hu,hu),window.removeEventListener("test",hu,hu)}catch{Qm=!1}function Ak(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Uu=!1,Pd=null,kd=!1,Ym=null,Rk={onError:function(t){Uu=!0,Pd=t}};function Pk(t,e,n,r,i,s,o,a,l){Uu=!1,Pd=null,Ak.apply(Rk,arguments)}function kk(t,e,n,r,i,s,o,a,l){if(Pk.apply(this,arguments),Uu){if(Uu){var c=Pd;Uu=!1,Pd=null}else throw Error(Y(198));kd||(kd=!0,Ym=c)}}function na(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cw(t){if(na(t)!==t)throw Error(Y(188))}function bk(t){var e=t.alternate;if(!e){if(e=na(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return cw(i),t;if(s===r)return cw(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function gI(t){return t=bk(t),t!==null?_I(t):null}function _I(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_I(t);if(e!==null)return e;t=t.sibling}return null}var yI=nr.unstable_scheduleCallback,hw=nr.unstable_cancelCallback,Nk=nr.unstable_shouldYield,xk=nr.unstable_requestPaint,Rt=nr.unstable_now,Dk=nr.unstable_getCurrentPriorityLevel,b_=nr.unstable_ImmediatePriority,vI=nr.unstable_UserBlockingPriority,bd=nr.unstable_NormalPriority,Ok=nr.unstable_LowPriority,wI=nr.unstable_IdlePriority,Pf=null,ci=null;function Lk(t){if(ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(Pf,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:Fk,Mk=Math.log,Vk=Math.LN2;function Fk(t){return t>>>=0,t===0?32:31-(Mk(t)/Vk|0)|0}var Mh=64,Vh=4194304;function Pu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Pu(a):(s&=o,s!==0&&(r=Pu(s)))}else o=n&~i,o!==0?r=Pu(o):s!==0&&(r=Pu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zr(e),i=1<<n,r|=t[n],e&=~i;return r}function Uk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Uk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Xm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function EI(){var t=Mh;return Mh<<=1,!(Mh&4194240)&&(Mh=64),t}function Wp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function Bk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function N_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Qe=0;function TI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var II,x_,SI,CI,AI,Jm=!1,Fh=[],Ds=null,Os=null,Ls=null,oc=new Map,ac=new Map,Ss=[],$k="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dw(t,e){switch(t){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(e.pointerId)}}function du(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=jc(e),e!==null&&x_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zk(t,e,n,r,i){switch(e){case"focusin":return Ds=du(Ds,t,e,n,r,i),!0;case"dragenter":return Os=du(Os,t,e,n,r,i),!0;case"mouseover":return Ls=du(Ls,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return oc.set(s,du(oc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ac.set(s,du(ac.get(s)||null,t,e,n,r,i)),!0}return!1}function RI(t){var e=Co(t.target);if(e!==null){var n=na(e);if(n!==null){if(e=n.tag,e===13){if(e=mI(n),e!==null){t.blockedOn=e,AI(t.priority,function(){SI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Km=r,n.target.dispatchEvent(r),Km=null}else return e=jc(n),e!==null&&x_(e),t.blockedOn=n,!1;e.shift()}return!0}function fw(t,e,n){sd(t)&&n.delete(e)}function Wk(){Jm=!1,Ds!==null&&sd(Ds)&&(Ds=null),Os!==null&&sd(Os)&&(Os=null),Ls!==null&&sd(Ls)&&(Ls=null),oc.forEach(fw),ac.forEach(fw)}function fu(t,e){t.blockedOn===e&&(t.blockedOn=null,Jm||(Jm=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,Wk)))}function lc(t){function e(i){return fu(i,t)}if(0<Fh.length){fu(Fh[0],t);for(var n=1;n<Fh.length;n++){var r=Fh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ds!==null&&fu(Ds,t),Os!==null&&fu(Os,t),Ls!==null&&fu(Ls,t),oc.forEach(e),ac.forEach(e),n=0;n<Ss.length;n++)r=Ss[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ss.length&&(n=Ss[0],n.blockedOn===null);)RI(n),n.blockedOn===null&&Ss.shift()}var Xa=Zi.ReactCurrentBatchConfig,xd=!0;function Hk(t,e,n,r){var i=Qe,s=Xa.transition;Xa.transition=null;try{Qe=1,D_(t,e,n,r)}finally{Qe=i,Xa.transition=s}}function qk(t,e,n,r){var i=Qe,s=Xa.transition;Xa.transition=null;try{Qe=4,D_(t,e,n,r)}finally{Qe=i,Xa.transition=s}}function D_(t,e,n,r){if(xd){var i=Zm(t,e,n,r);if(i===null)em(t,e,r,Dd,n),dw(t,r);else if(zk(i,t,e,n,r))r.stopPropagation();else if(dw(t,r),e&4&&-1<$k.indexOf(t)){for(;i!==null;){var s=jc(i);if(s!==null&&II(s),s=Zm(t,e,n,r),s===null&&em(t,e,r,Dd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else em(t,e,r,null,n)}}var Dd=null;function Zm(t,e,n,r){if(Dd=null,t=k_(r),t=Co(t),t!==null)if(e=na(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dd=t,null}function PI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dk()){case b_:return 1;case vI:return 4;case bd:case Ok:return 16;case wI:return 536870912;default:return 16}default:return 16}}var bs=null,O_=null,od=null;function kI(){if(od)return od;var t,e=O_,n=e.length,r,i="value"in bs?bs.value:bs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return od=i.slice(t,1<r?1-r:void 0)}function ad(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uh(){return!0}function pw(){return!1}function ar(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Uh:pw,this.isPropagationStopped=pw,this}return Et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uh)},persist:function(){},isPersistent:Uh}),e}var Ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L_=ar(Ol),Uc=Et({},Ol,{view:0,detail:0}),Kk=ar(Uc),Hp,qp,pu,kf=Et({},Uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:M_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pu&&(pu&&t.type==="mousemove"?(Hp=t.screenX-pu.screenX,qp=t.screenY-pu.screenY):qp=Hp=0,pu=t),Hp)},movementY:function(t){return"movementY"in t?t.movementY:qp}}),mw=ar(kf),Gk=Et({},kf,{dataTransfer:0}),Qk=ar(Gk),Yk=Et({},Uc,{relatedTarget:0}),Kp=ar(Yk),Xk=Et({},Ol,{animationName:0,elapsedTime:0,pseudoElement:0}),Jk=ar(Xk),Zk=Et({},Ol,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eb=ar(Zk),tb=Et({},Ol,{data:0}),gw=ar(tb),nb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ib={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ib[t])?!!e[t]:!1}function M_(){return sb}var ob=Et({},Uc,{key:function(t){if(t.key){var e=nb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ad(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:M_,charCode:function(t){return t.type==="keypress"?ad(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ad(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ab=ar(ob),lb=Et({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_w=ar(lb),ub=Et({},Uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:M_}),cb=ar(ub),hb=Et({},Ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),db=ar(hb),fb=Et({},kf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pb=ar(fb),mb=[9,13,27,32],V_=Wi&&"CompositionEvent"in window,ju=null;Wi&&"documentMode"in document&&(ju=document.documentMode);var gb=Wi&&"TextEvent"in window&&!ju,bI=Wi&&(!V_||ju&&8<ju&&11>=ju),yw=" ",vw=!1;function NI(t,e){switch(t){case"keyup":return mb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function _b(t,e){switch(t){case"compositionend":return xI(e);case"keypress":return e.which!==32?null:(vw=!0,yw);case"textInput":return t=e.data,t===yw&&vw?null:t;default:return null}}function yb(t,e){if(Da)return t==="compositionend"||!V_&&NI(t,e)?(t=kI(),od=O_=bs=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bI&&e.locale!=="ko"?null:e.data;default:return null}}var vb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ww(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vb[t.type]:e==="textarea"}function DI(t,e,n,r){cI(r),e=Od(e,"onChange"),0<e.length&&(n=new L_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bu=null,uc=null;function wb(t){WI(t,0)}function bf(t){var e=Ma(t);if(rI(e))return t}function Eb(t,e){if(t==="change")return e}var OI=!1;if(Wi){var Gp;if(Wi){var Qp="oninput"in document;if(!Qp){var Ew=document.createElement("div");Ew.setAttribute("oninput","return;"),Qp=typeof Ew.oninput=="function"}Gp=Qp}else Gp=!1;OI=Gp&&(!document.documentMode||9<document.documentMode)}function Tw(){Bu&&(Bu.detachEvent("onpropertychange",LI),uc=Bu=null)}function LI(t){if(t.propertyName==="value"&&bf(uc)){var e=[];DI(e,uc,t,k_(t)),pI(wb,e)}}function Tb(t,e,n){t==="focusin"?(Tw(),Bu=e,uc=n,Bu.attachEvent("onpropertychange",LI)):t==="focusout"&&Tw()}function Ib(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bf(uc)}function Sb(t,e){if(t==="click")return bf(e)}function Cb(t,e){if(t==="input"||t==="change")return bf(e)}function Ab(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qr=typeof Object.is=="function"?Object.is:Ab;function cc(t,e){if(qr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lm.call(e,i)||!qr(t[i],e[i]))return!1}return!0}function Iw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sw(t,e){var n=Iw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Iw(n)}}function MI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VI(){for(var t=window,e=Rd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rd(t.document)}return e}function F_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rb(t){var e=VI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MI(n.ownerDocument.documentElement,n)){if(r!==null&&F_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Sw(n,s);var o=Sw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pb=Wi&&"documentMode"in document&&11>=document.documentMode,Oa=null,eg=null,$u=null,tg=!1;function Cw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tg||Oa==null||Oa!==Rd(r)||(r=Oa,"selectionStart"in r&&F_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$u&&cc($u,r)||($u=r,r=Od(eg,"onSelect"),0<r.length&&(e=new L_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oa)))}function jh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var La={animationend:jh("Animation","AnimationEnd"),animationiteration:jh("Animation","AnimationIteration"),animationstart:jh("Animation","AnimationStart"),transitionend:jh("Transition","TransitionEnd")},Yp={},FI={};Wi&&(FI=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Nf(t){if(Yp[t])return Yp[t];if(!La[t])return t;var e=La[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FI)return Yp[t]=e[n];return t}var UI=Nf("animationend"),jI=Nf("animationiteration"),BI=Nf("animationstart"),$I=Nf("transitionend"),zI=new Map,Aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(t,e){zI.set(t,e),ta(e,[t])}for(var Xp=0;Xp<Aw.length;Xp++){var Jp=Aw[Xp],kb=Jp.toLowerCase(),bb=Jp[0].toUpperCase()+Jp.slice(1);Zs(kb,"on"+bb)}Zs(UI,"onAnimationEnd");Zs(jI,"onAnimationIteration");Zs(BI,"onAnimationStart");Zs("dblclick","onDoubleClick");Zs("focusin","onFocus");Zs("focusout","onBlur");Zs($I,"onTransitionEnd");al("onMouseEnter",["mouseout","mouseover"]);al("onMouseLeave",["mouseout","mouseover"]);al("onPointerEnter",["pointerout","pointerover"]);al("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ku));function Rw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kk(r,e,void 0,t),t.currentTarget=null}function WI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Rw(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Rw(i,a,c),s=l}}}if(kd)throw t=Ym,kd=!1,Ym=null,t}function ut(t,e){var n=e[og];n===void 0&&(n=e[og]=new Set);var r=t+"__bubble";n.has(r)||(HI(e,t,2,!1),n.add(r))}function Zp(t,e,n){var r=0;e&&(r|=4),HI(n,t,r,e)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function hc(t){if(!t[Bh]){t[Bh]=!0,JT.forEach(function(n){n!=="selectionchange"&&(Nb.has(n)||Zp(n,!1,t),Zp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bh]||(e[Bh]=!0,Zp("selectionchange",!1,e))}}function HI(t,e,n,r){switch(PI(e)){case 1:var i=Hk;break;case 4:i=qk;break;default:i=D_}n=i.bind(null,e,n,t),i=void 0,!Qm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function em(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Co(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}pI(function(){var c=s,d=k_(n),p=[];e:{var m=zI.get(t);if(m!==void 0){var y=L_,I=t;switch(t){case"keypress":if(ad(n)===0)break e;case"keydown":case"keyup":y=ab;break;case"focusin":I="focus",y=Kp;break;case"focusout":I="blur",y=Kp;break;case"beforeblur":case"afterblur":y=Kp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Qk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=cb;break;case UI:case jI:case BI:y=Jk;break;case $I:y=db;break;case"scroll":y=Kk;break;case"wheel":y=pb;break;case"copy":case"cut":case"paste":y=eb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=_w}var k=(e&4)!==0,x=!k&&t==="scroll",S=k?m!==null?m+"Capture":null:m;k=[];for(var E=c,R;E!==null;){R=E;var V=R.stateNode;if(R.tag===5&&V!==null&&(R=V,S!==null&&(V=sc(E,S),V!=null&&k.push(dc(E,V,R)))),x)break;E=E.return}0<k.length&&(m=new y(m,I,null,n,d),p.push({event:m,listeners:k}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Km&&(I=n.relatedTarget||n.fromElement)&&(Co(I)||I[Hi]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(I=n.relatedTarget||n.toElement,y=c,I=I?Co(I):null,I!==null&&(x=na(I),I!==x||I.tag!==5&&I.tag!==6)&&(I=null)):(y=null,I=c),y!==I)){if(k=mw,V="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(k=_w,V="onPointerLeave",S="onPointerEnter",E="pointer"),x=y==null?m:Ma(y),R=I==null?m:Ma(I),m=new k(V,E+"leave",y,n,d),m.target=x,m.relatedTarget=R,V=null,Co(d)===c&&(k=new k(S,E+"enter",I,n,d),k.target=R,k.relatedTarget=x,V=k),x=V,y&&I)t:{for(k=y,S=I,E=0,R=k;R;R=Sa(R))E++;for(R=0,V=S;V;V=Sa(V))R++;for(;0<E-R;)k=Sa(k),E--;for(;0<R-E;)S=Sa(S),R--;for(;E--;){if(k===S||S!==null&&k===S.alternate)break t;k=Sa(k),S=Sa(S)}k=null}else k=null;y!==null&&Pw(p,m,y,k,!1),I!==null&&x!==null&&Pw(p,x,I,k,!0)}}e:{if(m=c?Ma(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var B=Eb;else if(ww(m))if(OI)B=Cb;else{B=Ib;var b=Tb}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(B=Sb);if(B&&(B=B(t,c))){DI(p,B,n,d);break e}b&&b(t,m,c),t==="focusout"&&(b=m._wrapperState)&&b.controlled&&m.type==="number"&&$m(m,"number",m.value)}switch(b=c?Ma(c):window,t){case"focusin":(ww(b)||b.contentEditable==="true")&&(Oa=b,eg=c,$u=null);break;case"focusout":$u=eg=Oa=null;break;case"mousedown":tg=!0;break;case"contextmenu":case"mouseup":case"dragend":tg=!1,Cw(p,n,d);break;case"selectionchange":if(Pb)break;case"keydown":case"keyup":Cw(p,n,d)}var C;if(V_)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Da?NI(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(bI&&n.locale!=="ko"&&(Da||v!=="onCompositionStart"?v==="onCompositionEnd"&&Da&&(C=kI()):(bs=d,O_="value"in bs?bs.value:bs.textContent,Da=!0)),b=Od(c,v),0<b.length&&(v=new gw(v,t,null,n,d),p.push({event:v,listeners:b}),C?v.data=C:(C=xI(n),C!==null&&(v.data=C)))),(C=gb?_b(t,n):yb(t,n))&&(c=Od(c,"onBeforeInput"),0<c.length&&(d=new gw("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=C))}WI(p,e)})}function dc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Od(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sc(t,n),s!=null&&r.unshift(dc(t,s,i)),s=sc(t,e),s!=null&&r.push(dc(t,s,i))),t=t.return}return r}function Sa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=sc(n,s),l!=null&&o.unshift(dc(n,l,a))):i||(l=sc(n,s),l!=null&&o.push(dc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xb=/\r\n?/g,Db=/\u0000|\uFFFD/g;function kw(t){return(typeof t=="string"?t:""+t).replace(xb,`
`).replace(Db,"")}function $h(t,e,n){if(e=kw(e),kw(t)!==e&&n)throw Error(Y(425))}function Ld(){}var ng=null,rg=null;function ig(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sg=typeof setTimeout=="function"?setTimeout:void 0,Ob=typeof clearTimeout=="function"?clearTimeout:void 0,bw=typeof Promise=="function"?Promise:void 0,Lb=typeof queueMicrotask=="function"?queueMicrotask:typeof bw<"u"?function(t){return bw.resolve(null).then(t).catch(Mb)}:sg;function Mb(t){setTimeout(function(){throw t})}function tm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),lc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lc(e)}function Ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Nw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ll=Math.random().toString(36).slice(2),si="__reactFiber$"+Ll,fc="__reactProps$"+Ll,Hi="__reactContainer$"+Ll,og="__reactEvents$"+Ll,Vb="__reactListeners$"+Ll,Fb="__reactHandles$"+Ll;function Co(t){var e=t[si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hi]||n[si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Nw(t);t!==null;){if(n=t[si])return n;t=Nw(t)}return e}t=n,n=t.parentNode}return null}function jc(t){return t=t[si]||t[Hi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ma(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function xf(t){return t[fc]||null}var ag=[],Va=-1;function eo(t){return{current:t}}function ft(t){0>Va||(t.current=ag[Va],ag[Va]=null,Va--)}function ot(t,e){Va++,ag[Va]=t.current,t.current=e}var Ks={},mn=eo(Ks),Un=eo(!1),Vo=Ks;function ll(t,e){var n=t.type.contextTypes;if(!n)return Ks;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function jn(t){return t=t.childContextTypes,t!=null}function Md(){ft(Un),ft(mn)}function xw(t,e,n){if(mn.current!==Ks)throw Error(Y(168));ot(mn,e),ot(Un,n)}function qI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,Tk(t)||"Unknown",i));return Et({},n,r)}function Vd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ks,Vo=mn.current,ot(mn,t),ot(Un,Un.current),!0}function Dw(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=qI(t,e,Vo),r.__reactInternalMemoizedMergedChildContext=t,ft(Un),ft(mn),ot(mn,t)):ft(Un),ot(Un,n)}var Ni=null,Df=!1,nm=!1;function KI(t){Ni===null?Ni=[t]:Ni.push(t)}function Ub(t){Df=!0,KI(t)}function to(){if(!nm&&Ni!==null){nm=!0;var t=0,e=Qe;try{var n=Ni;for(Qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ni=null,Df=!1}catch(i){throw Ni!==null&&(Ni=Ni.slice(t+1)),yI(b_,to),i}finally{Qe=e,nm=!1}}return null}var Fa=[],Ua=0,Fd=null,Ud=0,gr=[],_r=0,Fo=null,Di=1,Oi="";function wo(t,e){Fa[Ua++]=Ud,Fa[Ua++]=Fd,Fd=t,Ud=e}function GI(t,e,n){gr[_r++]=Di,gr[_r++]=Oi,gr[_r++]=Fo,Fo=t;var r=Di;t=Oi;var i=32-zr(r)-1;r&=~(1<<i),n+=1;var s=32-zr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Di=1<<32-zr(e)+i|n<<i|r,Oi=s+t}else Di=1<<s|n<<i|r,Oi=t}function U_(t){t.return!==null&&(wo(t,1),GI(t,1,0))}function j_(t){for(;t===Fd;)Fd=Fa[--Ua],Fa[Ua]=null,Ud=Fa[--Ua],Fa[Ua]=null;for(;t===Fo;)Fo=gr[--_r],gr[_r]=null,Oi=gr[--_r],gr[_r]=null,Di=gr[--_r],gr[_r]=null}var er=null,Jn=null,mt=!1,jr=null;function QI(t,e){var n=yr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ow(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,er=t,Jn=Ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,er=t,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fo!==null?{id:Di,overflow:Oi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,er=t,Jn=null,!0):!1;default:return!1}}function lg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ug(t){if(mt){var e=Jn;if(e){var n=e;if(!Ow(t,e)){if(lg(t))throw Error(Y(418));e=Ms(n.nextSibling);var r=er;e&&Ow(t,e)?QI(r,n):(t.flags=t.flags&-4097|2,mt=!1,er=t)}}else{if(lg(t))throw Error(Y(418));t.flags=t.flags&-4097|2,mt=!1,er=t}}}function Lw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;er=t}function zh(t){if(t!==er)return!1;if(!mt)return Lw(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ig(t.type,t.memoizedProps)),e&&(e=Jn)){if(lg(t))throw YI(),Error(Y(418));for(;e;)QI(t,e),e=Ms(e.nextSibling)}if(Lw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jn=Ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jn=null}}else Jn=er?Ms(t.stateNode.nextSibling):null;return!0}function YI(){for(var t=Jn;t;)t=Ms(t.nextSibling)}function ul(){Jn=er=null,mt=!1}function B_(t){jr===null?jr=[t]:jr.push(t)}var jb=Zi.ReactCurrentBatchConfig;function Vr(t,e){if(t&&t.defaultProps){e=Et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var jd=eo(null),Bd=null,ja=null,$_=null;function z_(){$_=ja=Bd=null}function W_(t){var e=jd.current;ft(jd),t._currentValue=e}function cg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ja(t,e){Bd=t,$_=ja=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fn=!0),t.firstContext=null)}function Tr(t){var e=t._currentValue;if($_!==t)if(t={context:t,memoizedValue:e,next:null},ja===null){if(Bd===null)throw Error(Y(308));ja=t,Bd.dependencies={lanes:0,firstContext:t}}else ja=ja.next=t;return e}var Ao=null;function H_(t){Ao===null?Ao=[t]:Ao.push(t)}function XI(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,H_(e)):(n.next=i.next,i.next=n),e.interleaved=n,qi(t,r)}function qi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Is=!1;function q_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ui(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qi(t,n)}return i=r.interleaved,i===null?(e.next=e,H_(r)):(e.next=i.next,i.next=e),r.interleaved=e,qi(t,n)}function ld(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,N_(t,n)}}function Mw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $d(t,e,n,r){var i=t.updateQueue;Is=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,k=a;switch(m=e,y=n,k.tag){case 1:if(I=k.payload,typeof I=="function"){p=I.call(y,p,m);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=k.payload,m=typeof I=="function"?I.call(y,p,m):I,m==null)break e;p=Et({},p,m);break e;case 2:Is=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=p):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);jo|=o,t.lanes=o,t.memoizedState=p}}function Vw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var ZI=new XT.Component().refs;function hg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Of={isMounted:function(t){return(t=t._reactInternals)?na(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Sn(),i=Us(t),s=Ui(r,i);s.payload=e,n!=null&&(s.callback=n),e=Vs(t,s,i),e!==null&&(Wr(e,t,i,r),ld(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Sn(),i=Us(t),s=Ui(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vs(t,s,i),e!==null&&(Wr(e,t,i,r),ld(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Sn(),r=Us(t),i=Ui(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vs(t,i,r),e!==null&&(Wr(e,t,r,n),ld(e,t,r))}};function Fw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!cc(n,r)||!cc(i,s):!0}function eS(t,e,n){var r=!1,i=Ks,s=e.contextType;return typeof s=="object"&&s!==null?s=Tr(s):(i=jn(e)?Vo:mn.current,r=e.contextTypes,s=(r=r!=null)?ll(t,i):Ks),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Of,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Uw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Of.enqueueReplaceState(e,e.state,null)}function dg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ZI,q_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Tr(s):(s=jn(e)?Vo:mn.current,i.context=ll(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Of.enqueueReplaceState(i,i.state,null),$d(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===ZI&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Wh(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jw(t){var e=t._init;return e(t._payload)}function tS(t){function e(S,E){if(t){var R=S.deletions;R===null?(S.deletions=[E],S.flags|=16):R.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function r(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function i(S,E){return S=js(S,E),S.index=0,S.sibling=null,S}function s(S,E,R){return S.index=R,t?(R=S.alternate,R!==null?(R=R.index,R<E?(S.flags|=2,E):R):(S.flags|=2,E)):(S.flags|=1048576,E)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,E,R,V){return E===null||E.tag!==6?(E=um(R,S.mode,V),E.return=S,E):(E=i(E,R),E.return=S,E)}function l(S,E,R,V){var B=R.type;return B===xa?d(S,E,R.props.children,V,R.key):E!==null&&(E.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ts&&jw(B)===E.type)?(V=i(E,R.props),V.ref=mu(S,E,R),V.return=S,V):(V=pd(R.type,R.key,R.props,null,S.mode,V),V.ref=mu(S,E,R),V.return=S,V)}function c(S,E,R,V){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=cm(R,S.mode,V),E.return=S,E):(E=i(E,R.children||[]),E.return=S,E)}function d(S,E,R,V,B){return E===null||E.tag!==7?(E=Do(R,S.mode,V,B),E.return=S,E):(E=i(E,R),E.return=S,E)}function p(S,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return E=um(""+E,S.mode,R),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Dh:return R=pd(E.type,E.key,E.props,null,S.mode,R),R.ref=mu(S,null,E),R.return=S,R;case Na:return E=cm(E,S.mode,R),E.return=S,E;case Ts:var V=E._init;return p(S,V(E._payload),R)}if(Ru(E)||cu(E))return E=Do(E,S.mode,R,null),E.return=S,E;Wh(S,E)}return null}function m(S,E,R,V){var B=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return B!==null?null:a(S,E,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Dh:return R.key===B?l(S,E,R,V):null;case Na:return R.key===B?c(S,E,R,V):null;case Ts:return B=R._init,m(S,E,B(R._payload),V)}if(Ru(R)||cu(R))return B!==null?null:d(S,E,R,V,null);Wh(S,R)}return null}function y(S,E,R,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return S=S.get(R)||null,a(E,S,""+V,B);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Dh:return S=S.get(V.key===null?R:V.key)||null,l(E,S,V,B);case Na:return S=S.get(V.key===null?R:V.key)||null,c(E,S,V,B);case Ts:var b=V._init;return y(S,E,R,b(V._payload),B)}if(Ru(V)||cu(V))return S=S.get(R)||null,d(E,S,V,B,null);Wh(E,V)}return null}function I(S,E,R,V){for(var B=null,b=null,C=E,v=E=0,T=null;C!==null&&v<R.length;v++){C.index>v?(T=C,C=null):T=C.sibling;var A=m(S,C,R[v],V);if(A===null){C===null&&(C=T);break}t&&C&&A.alternate===null&&e(S,C),E=s(A,E,v),b===null?B=A:b.sibling=A,b=A,C=T}if(v===R.length)return n(S,C),mt&&wo(S,v),B;if(C===null){for(;v<R.length;v++)C=p(S,R[v],V),C!==null&&(E=s(C,E,v),b===null?B=C:b.sibling=C,b=C);return mt&&wo(S,v),B}for(C=r(S,C);v<R.length;v++)T=y(C,S,v,R[v],V),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?v:T.key),E=s(T,E,v),b===null?B=T:b.sibling=T,b=T);return t&&C.forEach(function(N){return e(S,N)}),mt&&wo(S,v),B}function k(S,E,R,V){var B=cu(R);if(typeof B!="function")throw Error(Y(150));if(R=B.call(R),R==null)throw Error(Y(151));for(var b=B=null,C=E,v=E=0,T=null,A=R.next();C!==null&&!A.done;v++,A=R.next()){C.index>v?(T=C,C=null):T=C.sibling;var N=m(S,C,A.value,V);if(N===null){C===null&&(C=T);break}t&&C&&N.alternate===null&&e(S,C),E=s(N,E,v),b===null?B=N:b.sibling=N,b=N,C=T}if(A.done)return n(S,C),mt&&wo(S,v),B;if(C===null){for(;!A.done;v++,A=R.next())A=p(S,A.value,V),A!==null&&(E=s(A,E,v),b===null?B=A:b.sibling=A,b=A);return mt&&wo(S,v),B}for(C=r(S,C);!A.done;v++,A=R.next())A=y(C,S,v,A.value,V),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?v:A.key),E=s(A,E,v),b===null?B=A:b.sibling=A,b=A);return t&&C.forEach(function(M){return e(S,M)}),mt&&wo(S,v),B}function x(S,E,R,V){if(typeof R=="object"&&R!==null&&R.type===xa&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Dh:e:{for(var B=R.key,b=E;b!==null;){if(b.key===B){if(B=R.type,B===xa){if(b.tag===7){n(S,b.sibling),E=i(b,R.props.children),E.return=S,S=E;break e}}else if(b.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ts&&jw(B)===b.type){n(S,b.sibling),E=i(b,R.props),E.ref=mu(S,b,R),E.return=S,S=E;break e}n(S,b);break}else e(S,b);b=b.sibling}R.type===xa?(E=Do(R.props.children,S.mode,V,R.key),E.return=S,S=E):(V=pd(R.type,R.key,R.props,null,S.mode,V),V.ref=mu(S,E,R),V.return=S,S=V)}return o(S);case Na:e:{for(b=R.key;E!==null;){if(E.key===b)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(S,E.sibling),E=i(E,R.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=cm(R,S.mode,V),E.return=S,S=E}return o(S);case Ts:return b=R._init,x(S,E,b(R._payload),V)}if(Ru(R))return I(S,E,R,V);if(cu(R))return k(S,E,R,V);Wh(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,E!==null&&E.tag===6?(n(S,E.sibling),E=i(E,R),E.return=S,S=E):(n(S,E),E=um(R,S.mode,V),E.return=S,S=E),o(S)):n(S,E)}return x}var cl=tS(!0),nS=tS(!1),Bc={},hi=eo(Bc),pc=eo(Bc),mc=eo(Bc);function Ro(t){if(t===Bc)throw Error(Y(174));return t}function K_(t,e){switch(ot(mc,e),ot(pc,t),ot(hi,Bc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wm(e,t)}ft(hi),ot(hi,e)}function hl(){ft(hi),ft(pc),ft(mc)}function rS(t){Ro(mc.current);var e=Ro(hi.current),n=Wm(e,t.type);e!==n&&(ot(pc,t),ot(hi,n))}function G_(t){pc.current===t&&(ft(hi),ft(pc))}var vt=eo(0);function zd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rm=[];function Q_(){for(var t=0;t<rm.length;t++)rm[t]._workInProgressVersionPrimary=null;rm.length=0}var ud=Zi.ReactCurrentDispatcher,im=Zi.ReactCurrentBatchConfig,Uo=0,wt=null,Ft=null,Ht=null,Wd=!1,zu=!1,gc=0,Bb=0;function on(){throw Error(Y(321))}function Y_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qr(t[n],e[n]))return!1;return!0}function X_(t,e,n,r,i,s){if(Uo=s,wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ud.current=t===null||t.memoizedState===null?Hb:qb,t=n(r,i),zu){s=0;do{if(zu=!1,gc=0,25<=s)throw Error(Y(301));s+=1,Ht=Ft=null,e.updateQueue=null,ud.current=Kb,t=n(r,i)}while(zu)}if(ud.current=Hd,e=Ft!==null&&Ft.next!==null,Uo=0,Ht=Ft=wt=null,Wd=!1,e)throw Error(Y(300));return t}function J_(){var t=gc!==0;return gc=0,t}function ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?wt.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Ir(){if(Ft===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Ht===null?wt.memoizedState:Ht.next;if(e!==null)Ht=e,Ft=t;else{if(t===null)throw Error(Y(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Ht===null?wt.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function _c(t,e){return typeof e=="function"?e(t):e}function sm(t){var e=Ir(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=Ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Uo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,wt.lanes|=d,jo|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,qr(r,e.memoizedState)||(Fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,wt.lanes|=s,jo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function om(t){var e=Ir(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);qr(s,e.memoizedState)||(Fn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function iS(){}function sS(t,e){var n=wt,r=Ir(),i=e(),s=!qr(r.memoizedState,i);if(s&&(r.memoizedState=i,Fn=!0),r=r.queue,Z_(lS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,yc(9,aS.bind(null,n,r,i,e),void 0,null),Kt===null)throw Error(Y(349));Uo&30||oS(n,e,i)}return i}function oS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function aS(t,e,n,r){e.value=n,e.getSnapshot=r,uS(e)&&cS(t)}function lS(t,e,n){return n(function(){uS(e)&&cS(t)})}function uS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qr(t,n)}catch{return!0}}function cS(t){var e=qi(t,1);e!==null&&Wr(e,t,1,-1)}function Bw(t){var e=ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_c,lastRenderedState:t},e.queue=t,t=t.dispatch=Wb.bind(null,wt,t),[e.memoizedState,t]}function yc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hS(){return Ir().memoizedState}function cd(t,e,n,r){var i=ii();wt.flags|=t,i.memoizedState=yc(1|e,n,void 0,r===void 0?null:r)}function Lf(t,e,n,r){var i=Ir();r=r===void 0?null:r;var s=void 0;if(Ft!==null){var o=Ft.memoizedState;if(s=o.destroy,r!==null&&Y_(r,o.deps)){i.memoizedState=yc(e,n,s,r);return}}wt.flags|=t,i.memoizedState=yc(1|e,n,s,r)}function $w(t,e){return cd(8390656,8,t,e)}function Z_(t,e){return Lf(2048,8,t,e)}function dS(t,e){return Lf(4,2,t,e)}function fS(t,e){return Lf(4,4,t,e)}function pS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mS(t,e,n){return n=n!=null?n.concat([t]):null,Lf(4,4,pS.bind(null,e,t),n)}function ey(){}function gS(t,e){var n=Ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Y_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _S(t,e){var n=Ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Y_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yS(t,e,n){return Uo&21?(qr(n,e)||(n=EI(),wt.lanes|=n,jo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fn=!0),t.memoizedState=n)}function $b(t,e){var n=Qe;Qe=n!==0&&4>n?n:4,t(!0);var r=im.transition;im.transition={};try{t(!1),e()}finally{Qe=n,im.transition=r}}function vS(){return Ir().memoizedState}function zb(t,e,n){var r=Us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wS(t))ES(e,n);else if(n=XI(t,e,n,r),n!==null){var i=Sn();Wr(n,t,r,i),TS(n,e,r)}}function Wb(t,e,n){var r=Us(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wS(t))ES(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,qr(a,o)){var l=e.interleaved;l===null?(i.next=i,H_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=XI(t,e,i,r),n!==null&&(i=Sn(),Wr(n,t,r,i),TS(n,e,r))}}function wS(t){var e=t.alternate;return t===wt||e!==null&&e===wt}function ES(t,e){zu=Wd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function TS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,N_(t,n)}}var Hd={readContext:Tr,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},Hb={readContext:Tr,useCallback:function(t,e){return ii().memoizedState=[t,e===void 0?null:e],t},useContext:Tr,useEffect:$w,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cd(4194308,4,pS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cd(4194308,4,t,e)},useInsertionEffect:function(t,e){return cd(4,2,t,e)},useMemo:function(t,e){var n=ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ii();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zb.bind(null,wt,t),[r.memoizedState,t]},useRef:function(t){var e=ii();return t={current:t},e.memoizedState=t},useState:Bw,useDebugValue:ey,useDeferredValue:function(t){return ii().memoizedState=t},useTransition:function(){var t=Bw(!1),e=t[0];return t=$b.bind(null,t[1]),ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wt,i=ii();if(mt){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Kt===null)throw Error(Y(349));Uo&30||oS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,$w(lS.bind(null,r,s,t),[t]),r.flags|=2048,yc(9,aS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ii(),e=Kt.identifierPrefix;if(mt){var n=Oi,r=Di;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Bb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qb={readContext:Tr,useCallback:gS,useContext:Tr,useEffect:Z_,useImperativeHandle:mS,useInsertionEffect:dS,useLayoutEffect:fS,useMemo:_S,useReducer:sm,useRef:hS,useState:function(){return sm(_c)},useDebugValue:ey,useDeferredValue:function(t){var e=Ir();return yS(e,Ft.memoizedState,t)},useTransition:function(){var t=sm(_c)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:iS,useSyncExternalStore:sS,useId:vS,unstable_isNewReconciler:!1},Kb={readContext:Tr,useCallback:gS,useContext:Tr,useEffect:Z_,useImperativeHandle:mS,useInsertionEffect:dS,useLayoutEffect:fS,useMemo:_S,useReducer:om,useRef:hS,useState:function(){return om(_c)},useDebugValue:ey,useDeferredValue:function(t){var e=Ir();return Ft===null?e.memoizedState=t:yS(e,Ft.memoizedState,t)},useTransition:function(){var t=om(_c)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:iS,useSyncExternalStore:sS,useId:vS,unstable_isNewReconciler:!1};function dl(t,e){try{var n="",r=e;do n+=Ek(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function am(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Gb=typeof WeakMap=="function"?WeakMap:Map;function IS(t,e,n){n=Ui(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kd||(Kd=!0,Ig=r),fg(t,e)},n}function SS(t,e,n){n=Ui(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fg(t,e),typeof r!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Gb;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=lN.bind(null,t,e,n),e.then(t,t))}function Ww(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ui(-1,1),e.tag=2,Vs(n,e,1))),n.lanes|=1),t)}var Qb=Zi.ReactCurrentOwner,Fn=!1;function In(t,e,n,r){e.child=t===null?nS(e,null,n,r):cl(e,t.child,n,r)}function qw(t,e,n,r,i){n=n.render;var s=e.ref;return Ja(e,i),r=X_(t,e,n,r,s,i),n=J_(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ki(t,e,i)):(mt&&n&&U_(e),e.flags|=1,In(t,e,r,i),e.child)}function Kw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ly(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,CS(t,e,s,r,i)):(t=pd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:cc,n(o,r)&&t.ref===e.ref)return Ki(t,e,i)}return e.flags|=1,t=js(s,r),t.ref=e.ref,t.return=e,e.child=t}function CS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(cc(s,r)&&t.ref===e.ref)if(Fn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Fn=!0);else return e.lanes=t.lanes,Ki(t,e,i)}return pg(t,e,n,r,i)}function AS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot($a,Qn),Qn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ot($a,Qn),Qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ot($a,Qn),Qn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ot($a,Qn),Qn|=r;return In(t,e,i,n),e.child}function RS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pg(t,e,n,r,i){var s=jn(n)?Vo:mn.current;return s=ll(e,s),Ja(e,i),n=X_(t,e,n,r,s,i),r=J_(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ki(t,e,i)):(mt&&r&&U_(e),e.flags|=1,In(t,e,n,i),e.child)}function Gw(t,e,n,r,i){if(jn(n)){var s=!0;Vd(e)}else s=!1;if(Ja(e,i),e.stateNode===null)hd(t,e),eS(e,n,r),dg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Tr(c):(c=jn(n)?Vo:mn.current,c=ll(e,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Uw(e,o,r,c),Is=!1;var m=e.memoizedState;o.state=m,$d(e,r,o,i),l=e.memoizedState,a!==r||m!==l||Un.current||Is?(typeof d=="function"&&(hg(e,n,d,r),l=e.memoizedState),(a=Is||Fw(e,n,a,r,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,JI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vr(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Tr(l):(l=jn(n)?Vo:mn.current,l=ll(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&Uw(e,o,r,l),Is=!1,m=e.memoizedState,o.state=m,$d(e,r,o,i);var I=e.memoizedState;a!==p||m!==I||Un.current||Is?(typeof y=="function"&&(hg(e,n,y,r),I=e.memoizedState),(c=Is||Fw(e,n,c,r,m,I,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return mg(t,e,n,r,s,i)}function mg(t,e,n,r,i,s){RS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Dw(e,n,!1),Ki(t,e,s);r=e.stateNode,Qb.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=cl(e,t.child,null,s),e.child=cl(e,null,a,s)):In(t,e,a,s),e.memoizedState=r.state,i&&Dw(e,n,!0),e.child}function PS(t){var e=t.stateNode;e.pendingContext?xw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xw(t,e.context,!1),K_(t,e.containerInfo)}function Qw(t,e,n,r,i){return ul(),B_(i),e.flags|=256,In(t,e,n,r),e.child}var gg={dehydrated:null,treeContext:null,retryLane:0};function _g(t){return{baseLanes:t,cachePool:null,transitions:null}}function kS(t,e,n){var r=e.pendingProps,i=vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ot(vt,i&1),t===null)return ug(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ff(o,r,0,null),t=Do(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=_g(n),e.memoizedState=gg,t):ty(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Yb(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=js(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=js(a,s):(s=Do(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?_g(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=gg,r}return s=t.child,t=s.sibling,r=js(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ty(t,e){return e=Ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hh(t,e,n,r){return r!==null&&B_(r),cl(e,t.child,null,n),t=ty(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Yb(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=am(Error(Y(422))),Hh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ff({mode:"visible",children:r.children},i,0,null),s=Do(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&cl(e,t.child,null,o),e.child.memoizedState=_g(o),e.memoizedState=gg,s);if(!(e.mode&1))return Hh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=am(s,r,void 0),Hh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Fn||a){if(r=Kt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qi(t,i),Wr(r,t,i,-1))}return ay(),r=am(Error(Y(421))),Hh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Jn=Ms(i.nextSibling),er=e,mt=!0,jr=null,t!==null&&(gr[_r++]=Di,gr[_r++]=Oi,gr[_r++]=Fo,Di=t.id,Oi=t.overflow,Fo=e),e=ty(e,r.children),e.flags|=4096,e)}function Yw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cg(t.return,e,n)}function lm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function bS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(In(t,e,r.children,n),r=vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yw(t,n,e);else if(t.tag===19)Yw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ot(vt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&zd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),lm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}lm(e,!0,n,null,s);break;case"together":lm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=js(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=js(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Xb(t,e,n){switch(e.tag){case 3:PS(e),ul();break;case 5:rS(e);break;case 1:jn(e.type)&&Vd(e);break;case 4:K_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ot(jd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ot(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?kS(t,e,n):(ot(vt,vt.current&1),t=Ki(t,e,n),t!==null?t.sibling:null);ot(vt,vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ot(vt,vt.current),r)break;return null;case 22:case 23:return e.lanes=0,AS(t,e,n)}return Ki(t,e,n)}var NS,yg,xS,DS;NS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yg=function(){};xS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ro(hi.current);var s=null;switch(n){case"input":i=jm(t,i),r=jm(t,r),s=[];break;case"select":i=Et({},i,{value:void 0}),r=Et({},r,{value:void 0}),s=[];break;case"textarea":i=zm(t,i),r=zm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ld)}Hm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ut("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};DS=function(t,e,n,r){n!==r&&(e.flags|=4)};function gu(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function an(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Jb(t,e,n){var r=e.pendingProps;switch(j_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(e),null;case 1:return jn(e.type)&&Md(),an(e),null;case 3:return r=e.stateNode,hl(),ft(Un),ft(mn),Q_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jr!==null&&(Ag(jr),jr=null))),yg(t,e),an(e),null;case 5:G_(e);var i=Ro(mc.current);if(n=e.type,t!==null&&e.stateNode!=null)xS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return an(e),null}if(t=Ro(hi.current),zh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[si]=e,r[fc]=s,t=(e.mode&1)!==0,n){case"dialog":ut("cancel",r),ut("close",r);break;case"iframe":case"object":case"embed":ut("load",r);break;case"video":case"audio":for(i=0;i<ku.length;i++)ut(ku[i],r);break;case"source":ut("error",r);break;case"img":case"image":case"link":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"input":sw(r,s),ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ut("invalid",r);break;case"textarea":aw(r,s),ut("invalid",r)}Hm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&$h(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$h(r.textContent,a,t),i=["children",""+a]):rc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ut("scroll",r)}switch(n){case"input":Oh(r),ow(r,s,!0);break;case"textarea":Oh(r),lw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ld)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[si]=e,t[fc]=r,NS(t,e,!1,!1),e.stateNode=t;e:{switch(o=qm(n,r),n){case"dialog":ut("cancel",t),ut("close",t),i=r;break;case"iframe":case"object":case"embed":ut("load",t),i=r;break;case"video":case"audio":for(i=0;i<ku.length;i++)ut(ku[i],t);i=r;break;case"source":ut("error",t),i=r;break;case"img":case"image":case"link":ut("error",t),ut("load",t),i=r;break;case"details":ut("toggle",t),i=r;break;case"input":sw(t,r),i=jm(t,r),ut("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Et({},r,{value:void 0}),ut("invalid",t);break;case"textarea":aw(t,r),i=zm(t,r),ut("invalid",t);break;default:i=r}Hm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?uI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ic(t,l):typeof l=="number"&&ic(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ut("scroll",t):l!=null&&C_(t,s,l,o))}switch(n){case"input":Oh(t),ow(t,r,!1);break;case"textarea":Oh(t),lw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ga(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ga(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ld)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return an(e),null;case 6:if(t&&e.stateNode!=null)DS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Ro(mc.current),Ro(hi.current),zh(e)){if(r=e.stateNode,n=e.memoizedProps,r[si]=e,(s=r.nodeValue!==n)&&(t=er,t!==null))switch(t.tag){case 3:$h(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$h(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[si]=e,e.stateNode=r}return an(e),null;case 13:if(ft(vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&Jn!==null&&e.mode&1&&!(e.flags&128))YI(),ul(),e.flags|=98560,s=!1;else if(s=zh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[si]=e}else ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;an(e),s=!1}else jr!==null&&(Ag(jr),jr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Ut===0&&(Ut=3):ay())),e.updateQueue!==null&&(e.flags|=4),an(e),null);case 4:return hl(),yg(t,e),t===null&&hc(e.stateNode.containerInfo),an(e),null;case 10:return W_(e.type._context),an(e),null;case 17:return jn(e.type)&&Md(),an(e),null;case 19:if(ft(vt),s=e.memoizedState,s===null)return an(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)gu(s,!1);else{if(Ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zd(t),o!==null){for(e.flags|=128,gu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ot(vt,vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Rt()>fl&&(e.flags|=128,r=!0,gu(s,!1),e.lanes=4194304)}else{if(!r)if(t=zd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!mt)return an(e),null}else 2*Rt()-s.renderingStartTime>fl&&n!==1073741824&&(e.flags|=128,r=!0,gu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Rt(),e.sibling=null,n=vt.current,ot(vt,r?n&1|2:n&1),e):(an(e),null);case 22:case 23:return oy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qn&1073741824&&(an(e),e.subtreeFlags&6&&(e.flags|=8192)):an(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Zb(t,e){switch(j_(e),e.tag){case 1:return jn(e.type)&&Md(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hl(),ft(Un),ft(mn),Q_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return G_(e),null;case 13:if(ft(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));ul()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ft(vt),null;case 4:return hl(),null;case 10:return W_(e.type._context),null;case 22:case 23:return oy(),null;case 24:return null;default:return null}}var qh=!1,cn=!1,eN=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function vg(t,e,n){try{n()}catch(r){It(t,e,r)}}var Xw=!1;function tN(t,e){if(ng=xd,t=VI(),F_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,p=t,m=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(rg={focusedElem:t,selectionRange:n},xd=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var k=I.memoizedProps,x=I.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?k:Vr(e.type,k),x);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(V){It(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return I=Xw,Xw=!1,I}function Wu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&vg(e,n,s)}i=i.next}while(i!==r)}}function Mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function OS(t){var e=t.alternate;e!==null&&(t.alternate=null,OS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[si],delete e[fc],delete e[og],delete e[Vb],delete e[Fb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LS(t){return t.tag===5||t.tag===3||t.tag===4}function Jw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ld));else if(r!==4&&(t=t.child,t!==null))for(Eg(t,e,n),t=t.sibling;t!==null;)Eg(t,e,n),t=t.sibling}function Tg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Tg(t,e,n),t=t.sibling;t!==null;)Tg(t,e,n),t=t.sibling}var Yt=null,Fr=!1;function _s(t,e,n){for(n=n.child;n!==null;)MS(t,e,n),n=n.sibling}function MS(t,e,n){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(Pf,n)}catch{}switch(n.tag){case 5:cn||Ba(n,e);case 6:var r=Yt,i=Fr;Yt=null,_s(t,e,n),Yt=r,Fr=i,Yt!==null&&(Fr?(t=Yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yt.removeChild(n.stateNode));break;case 18:Yt!==null&&(Fr?(t=Yt,n=n.stateNode,t.nodeType===8?tm(t.parentNode,n):t.nodeType===1&&tm(t,n),lc(t)):tm(Yt,n.stateNode));break;case 4:r=Yt,i=Fr,Yt=n.stateNode.containerInfo,Fr=!0,_s(t,e,n),Yt=r,Fr=i;break;case 0:case 11:case 14:case 15:if(!cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vg(n,e,o),i=i.next}while(i!==r)}_s(t,e,n);break;case 1:if(!cn&&(Ba(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,e,a)}_s(t,e,n);break;case 21:_s(t,e,n);break;case 22:n.mode&1?(cn=(r=cn)||n.memoizedState!==null,_s(t,e,n),cn=r):_s(t,e,n);break;default:_s(t,e,n)}}function Zw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eN),e.forEach(function(r){var i=cN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yt=a.stateNode,Fr=!1;break e;case 3:Yt=a.stateNode.containerInfo,Fr=!0;break e;case 4:Yt=a.stateNode.containerInfo,Fr=!0;break e}a=a.return}if(Yt===null)throw Error(Y(160));MS(s,o,i),Yt=null,Fr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){It(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VS(e,t),e=e.sibling}function VS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mr(e,t),ri(t),r&4){try{Wu(3,t,t.return),Mf(3,t)}catch(k){It(t,t.return,k)}try{Wu(5,t,t.return)}catch(k){It(t,t.return,k)}}break;case 1:Mr(e,t),ri(t),r&512&&n!==null&&Ba(n,n.return);break;case 5:if(Mr(e,t),ri(t),r&512&&n!==null&&Ba(n,n.return),t.flags&32){var i=t.stateNode;try{ic(i,"")}catch(k){It(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&iI(i,s),qm(a,o);var c=qm(a,s);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?uI(i,p):d==="dangerouslySetInnerHTML"?aI(i,p):d==="children"?ic(i,p):C_(i,d,p,c)}switch(a){case"input":Bm(i,s);break;case"textarea":sI(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Ga(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Ga(i,!!s.multiple,s.defaultValue,!0):Ga(i,!!s.multiple,s.multiple?[]:"",!1))}i[fc]=s}catch(k){It(t,t.return,k)}}break;case 6:if(Mr(e,t),ri(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){It(t,t.return,k)}}break;case 3:if(Mr(e,t),ri(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lc(e.containerInfo)}catch(k){It(t,t.return,k)}break;case 4:Mr(e,t),ri(t);break;case 13:Mr(e,t),ri(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(iy=Rt())),r&4&&Zw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(cn=(c=cn)||d,Mr(e,t),cn=c):Mr(e,t),ri(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ie=t,d=t.child;d!==null;){for(p=ie=d;ie!==null;){switch(m=ie,y=m.child,m.tag){case 0:case 11:case 14:case 15:Wu(4,m,m.return);break;case 1:Ba(m,m.return);var I=m.stateNode;if(typeof I.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(k){It(r,n,k)}}break;case 5:Ba(m,m.return);break;case 22:if(m.memoizedState!==null){tE(p);continue}}y!==null?(y.return=m,ie=y):tE(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lI("display",o))}catch(k){It(t,t.return,k)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(k){It(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Mr(e,t),ri(t),r&4&&Zw(t);break;case 21:break;default:Mr(e,t),ri(t)}}function ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(LS(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ic(i,""),r.flags&=-33);var s=Jw(t);Tg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Jw(t);Eg(t,a,o);break;default:throw Error(Y(161))}}catch(l){It(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nN(t,e,n){ie=t,FS(t)}function FS(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||cn;a=qh;var c=cn;if(qh=o,(cn=l)&&!c)for(ie=i;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?nE(i):l!==null?(l.return=o,ie=l):nE(i);for(;s!==null;)ie=s,FS(s),s=s.sibling;ie=i,qh=a,cn=c}eE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):eE(t)}}function eE(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||Mf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Vr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Vw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&lc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}cn||e.flags&512&&wg(e)}catch(m){It(e,e.return,m)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function tE(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function nE(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mf(4,e)}catch(l){It(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){It(e,i,l)}}var s=e.return;try{wg(e)}catch(l){It(e,s,l)}break;case 5:var o=e.return;try{wg(e)}catch(l){It(e,o,l)}}}catch(l){It(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var rN=Math.ceil,qd=Zi.ReactCurrentDispatcher,ny=Zi.ReactCurrentOwner,wr=Zi.ReactCurrentBatchConfig,je=0,Kt=null,Nt=null,en=0,Qn=0,$a=eo(0),Ut=0,vc=null,jo=0,Vf=0,ry=0,Hu=null,Mn=null,iy=0,fl=1/0,bi=null,Kd=!1,Ig=null,Fs=null,Kh=!1,Ns=null,Gd=0,qu=0,Sg=null,dd=-1,fd=0;function Sn(){return je&6?Rt():dd!==-1?dd:dd=Rt()}function Us(t){return t.mode&1?je&2&&en!==0?en&-en:jb.transition!==null?(fd===0&&(fd=EI()),fd):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:PI(t.type)),t):1}function Wr(t,e,n,r){if(50<qu)throw qu=0,Sg=null,Error(Y(185));Fc(t,n,r),(!(je&2)||t!==Kt)&&(t===Kt&&(!(je&2)&&(Vf|=n),Ut===4&&Cs(t,en)),Bn(t,r),n===1&&je===0&&!(e.mode&1)&&(fl=Rt()+500,Df&&to()))}function Bn(t,e){var n=t.callbackNode;jk(t,e);var r=Nd(t,t===Kt?en:0);if(r===0)n!==null&&hw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hw(n),e===1)t.tag===0?Ub(rE.bind(null,t)):KI(rE.bind(null,t)),Lb(function(){!(je&6)&&to()}),n=null;else{switch(TI(r)){case 1:n=b_;break;case 4:n=vI;break;case 16:n=bd;break;case 536870912:n=wI;break;default:n=bd}n=qS(n,US.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function US(t,e){if(dd=-1,fd=0,je&6)throw Error(Y(327));var n=t.callbackNode;if(Za()&&t.callbackNode!==n)return null;var r=Nd(t,t===Kt?en:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qd(t,r);else{e=r;var i=je;je|=2;var s=BS();(Kt!==t||en!==e)&&(bi=null,fl=Rt()+500,xo(t,e));do try{oN();break}catch(a){jS(t,a)}while(!0);z_(),qd.current=s,je=i,Nt!==null?e=0:(Kt=null,en=0,e=Ut)}if(e!==0){if(e===2&&(i=Xm(t),i!==0&&(r=i,e=Cg(t,i))),e===1)throw n=vc,xo(t,0),Cs(t,r),Bn(t,Rt()),n;if(e===6)Cs(t,r);else{if(i=t.current.alternate,!(r&30)&&!iN(i)&&(e=Qd(t,r),e===2&&(s=Xm(t),s!==0&&(r=s,e=Cg(t,s))),e===1))throw n=vc,xo(t,0),Cs(t,r),Bn(t,Rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Eo(t,Mn,bi);break;case 3:if(Cs(t,r),(r&130023424)===r&&(e=iy+500-Rt(),10<e)){if(Nd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sg(Eo.bind(null,t,Mn,bi),e);break}Eo(t,Mn,bi);break;case 4:if(Cs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rN(r/1960))-r,10<r){t.timeoutHandle=sg(Eo.bind(null,t,Mn,bi),r);break}Eo(t,Mn,bi);break;case 5:Eo(t,Mn,bi);break;default:throw Error(Y(329))}}}return Bn(t,Rt()),t.callbackNode===n?US.bind(null,t):null}function Cg(t,e){var n=Hu;return t.current.memoizedState.isDehydrated&&(xo(t,e).flags|=256),t=Qd(t,e),t!==2&&(e=Mn,Mn=n,e!==null&&Ag(e)),t}function Ag(t){Mn===null?Mn=t:Mn.push.apply(Mn,t)}function iN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!qr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cs(t,e){for(e&=~ry,e&=~Vf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),r=1<<n;t[n]=-1,e&=~r}}function rE(t){if(je&6)throw Error(Y(327));Za();var e=Nd(t,0);if(!(e&1))return Bn(t,Rt()),null;var n=Qd(t,e);if(t.tag!==0&&n===2){var r=Xm(t);r!==0&&(e=r,n=Cg(t,r))}if(n===1)throw n=vc,xo(t,0),Cs(t,e),Bn(t,Rt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Eo(t,Mn,bi),Bn(t,Rt()),null}function sy(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(fl=Rt()+500,Df&&to())}}function Bo(t){Ns!==null&&Ns.tag===0&&!(je&6)&&Za();var e=je;je|=1;var n=wr.transition,r=Qe;try{if(wr.transition=null,Qe=1,t)return t()}finally{Qe=r,wr.transition=n,je=e,!(je&6)&&to()}}function oy(){Qn=$a.current,ft($a)}function xo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ob(n)),Nt!==null)for(n=Nt.return;n!==null;){var r=n;switch(j_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Md();break;case 3:hl(),ft(Un),ft(mn),Q_();break;case 5:G_(r);break;case 4:hl();break;case 13:ft(vt);break;case 19:ft(vt);break;case 10:W_(r.type._context);break;case 22:case 23:oy()}n=n.return}if(Kt=t,Nt=t=js(t.current,null),en=Qn=e,Ut=0,vc=null,ry=Vf=jo=0,Mn=Hu=null,Ao!==null){for(e=0;e<Ao.length;e++)if(n=Ao[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ao=null}return t}function jS(t,e){do{var n=Nt;try{if(z_(),ud.current=Hd,Wd){for(var r=wt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wd=!1}if(Uo=0,Ht=Ft=wt=null,zu=!1,gc=0,ny.current=null,n===null||n.return===null){Ut=1,vc=e,Nt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=en,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Ww(o);if(y!==null){y.flags&=-257,Hw(y,o,a,s,e),y.mode&1&&zw(s,c,e),e=y,l=c;var I=e.updateQueue;if(I===null){var k=new Set;k.add(l),e.updateQueue=k}else I.add(l);break e}else{if(!(e&1)){zw(s,c,e),ay();break e}l=Error(Y(426))}}else if(mt&&a.mode&1){var x=Ww(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Hw(x,o,a,s,e),B_(dl(l,a));break e}}s=l=dl(l,a),Ut!==4&&(Ut=2),Hu===null?Hu=[s]:Hu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=IS(s,l,e);Mw(s,S);break e;case 1:a=l;var E=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Fs===null||!Fs.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=SS(s,a,e);Mw(s,V);break e}}s=s.return}while(s!==null)}zS(n)}catch(B){e=B,Nt===n&&n!==null&&(Nt=n=n.return);continue}break}while(!0)}function BS(){var t=qd.current;return qd.current=Hd,t===null?Hd:t}function ay(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Kt===null||!(jo&268435455)&&!(Vf&268435455)||Cs(Kt,en)}function Qd(t,e){var n=je;je|=2;var r=BS();(Kt!==t||en!==e)&&(bi=null,xo(t,e));do try{sN();break}catch(i){jS(t,i)}while(!0);if(z_(),je=n,qd.current=r,Nt!==null)throw Error(Y(261));return Kt=null,en=0,Ut}function sN(){for(;Nt!==null;)$S(Nt)}function oN(){for(;Nt!==null&&!Nk();)$S(Nt)}function $S(t){var e=HS(t.alternate,t,Qn);t.memoizedProps=t.pendingProps,e===null?zS(t):Nt=e,ny.current=null}function zS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Zb(n,e),n!==null){n.flags&=32767,Nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ut=6,Nt=null;return}}else if(n=Jb(n,e,Qn),n!==null){Nt=n;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);Ut===0&&(Ut=5)}function Eo(t,e,n){var r=Qe,i=wr.transition;try{wr.transition=null,Qe=1,aN(t,e,n,r)}finally{wr.transition=i,Qe=r}return null}function aN(t,e,n,r){do Za();while(Ns!==null);if(je&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Bk(t,s),t===Kt&&(Nt=Kt=null,en=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kh||(Kh=!0,qS(bd,function(){return Za(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wr.transition,wr.transition=null;var o=Qe;Qe=1;var a=je;je|=4,ny.current=null,tN(t,n),VS(n,t),Rb(rg),xd=!!ng,rg=ng=null,t.current=n,nN(n),xk(),je=a,Qe=o,wr.transition=s}else t.current=n;if(Kh&&(Kh=!1,Ns=t,Gd=i),s=t.pendingLanes,s===0&&(Fs=null),Lk(n.stateNode),Bn(t,Rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kd)throw Kd=!1,t=Ig,Ig=null,t;return Gd&1&&t.tag!==0&&Za(),s=t.pendingLanes,s&1?t===Sg?qu++:(qu=0,Sg=t):qu=0,to(),null}function Za(){if(Ns!==null){var t=TI(Gd),e=wr.transition,n=Qe;try{if(wr.transition=null,Qe=16>t?16:t,Ns===null)var r=!1;else{if(t=Ns,Ns=null,Gd=0,je&6)throw Error(Y(331));var i=je;for(je|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:Wu(8,d,s)}var p=d.child;if(p!==null)p.return=d,ie=p;else for(;ie!==null;){d=ie;var m=d.sibling,y=d.return;if(OS(d),d===c){ie=null;break}if(m!==null){m.return=y,ie=m;break}ie=y}}}var I=s.alternate;if(I!==null){var k=I.child;if(k!==null){I.child=null;do{var x=k.sibling;k.sibling=null,k=x}while(k!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wu(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,ie=S;break e}ie=s.return}}var E=t.current;for(ie=E;ie!==null;){o=ie;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,ie=R;else e:for(o=E;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mf(9,a)}}catch(B){It(a,a.return,B)}if(a===o){ie=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,ie=V;break e}ie=a.return}}if(je=i,to(),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(Pf,t)}catch{}r=!0}return r}finally{Qe=n,wr.transition=e}}return!1}function iE(t,e,n){e=dl(n,e),e=IS(t,e,1),t=Vs(t,e,1),e=Sn(),t!==null&&(Fc(t,1,e),Bn(t,e))}function It(t,e,n){if(t.tag===3)iE(t,t,n);else for(;e!==null;){if(e.tag===3){iE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fs===null||!Fs.has(r))){t=dl(n,t),t=SS(e,t,1),e=Vs(e,t,1),t=Sn(),e!==null&&(Fc(e,1,t),Bn(e,t));break}}e=e.return}}function lN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Sn(),t.pingedLanes|=t.suspendedLanes&n,Kt===t&&(en&n)===n&&(Ut===4||Ut===3&&(en&130023424)===en&&500>Rt()-iy?xo(t,0):ry|=n),Bn(t,e)}function WS(t,e){e===0&&(t.mode&1?(e=Vh,Vh<<=1,!(Vh&130023424)&&(Vh=4194304)):e=1);var n=Sn();t=qi(t,e),t!==null&&(Fc(t,e,n),Bn(t,n))}function uN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WS(t,n)}function cN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),WS(t,n)}var HS;HS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Un.current)Fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fn=!1,Xb(t,e,n);Fn=!!(t.flags&131072)}else Fn=!1,mt&&e.flags&1048576&&GI(e,Ud,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hd(t,e),t=e.pendingProps;var i=ll(e,mn.current);Ja(e,n),i=X_(null,e,r,t,i,n);var s=J_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jn(r)?(s=!0,Vd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,q_(e),i.updater=Of,e.stateNode=i,i._reactInternals=e,dg(e,r,t,n),e=mg(null,e,r,!0,s,n)):(e.tag=0,mt&&s&&U_(e),In(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=dN(r),t=Vr(r,t),i){case 0:e=pg(null,e,r,t,n);break e;case 1:e=Gw(null,e,r,t,n);break e;case 11:e=qw(null,e,r,t,n);break e;case 14:e=Kw(null,e,r,Vr(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vr(r,i),pg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vr(r,i),Gw(t,e,r,i,n);case 3:e:{if(PS(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,JI(t,e),$d(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=dl(Error(Y(423)),e),e=Qw(t,e,r,n,i);break e}else if(r!==i){i=dl(Error(Y(424)),e),e=Qw(t,e,r,n,i);break e}else for(Jn=Ms(e.stateNode.containerInfo.firstChild),er=e,mt=!0,jr=null,n=nS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ul(),r===i){e=Ki(t,e,n);break e}In(t,e,r,n)}e=e.child}return e;case 5:return rS(e),t===null&&ug(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ig(r,i)?o=null:s!==null&&ig(r,s)&&(e.flags|=32),RS(t,e),In(t,e,o,n),e.child;case 6:return t===null&&ug(e),null;case 13:return kS(t,e,n);case 4:return K_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=cl(e,null,r,n):In(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vr(r,i),qw(t,e,r,i,n);case 7:return In(t,e,e.pendingProps,n),e.child;case 8:return In(t,e,e.pendingProps.children,n),e.child;case 12:return In(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ot(jd,r._currentValue),r._currentValue=o,s!==null)if(qr(s.value,o)){if(s.children===i.children&&!Un.current){e=Ki(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ui(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),cg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}In(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ja(e,n),i=Tr(i),r=r(i),e.flags|=1,In(t,e,r,n),e.child;case 14:return r=e.type,i=Vr(r,e.pendingProps),i=Vr(r.type,i),Kw(t,e,r,i,n);case 15:return CS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vr(r,i),hd(t,e),e.tag=1,jn(r)?(t=!0,Vd(e)):t=!1,Ja(e,n),eS(e,r,i),dg(e,r,i,n),mg(null,e,r,!0,t,n);case 19:return bS(t,e,n);case 22:return AS(t,e,n)}throw Error(Y(156,e.tag))};function qS(t,e){return yI(t,e)}function hN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(t,e,n,r){return new hN(t,e,n,r)}function ly(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dN(t){if(typeof t=="function")return ly(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R_)return 11;if(t===P_)return 14}return 2}function js(t,e){var n=t.alternate;return n===null?(n=yr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ly(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xa:return Do(n.children,i,s,e);case A_:o=8,i|=8;break;case Mm:return t=yr(12,n,e,i|2),t.elementType=Mm,t.lanes=s,t;case Vm:return t=yr(13,n,e,i),t.elementType=Vm,t.lanes=s,t;case Fm:return t=yr(19,n,e,i),t.elementType=Fm,t.lanes=s,t;case tI:return Ff(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ZT:o=10;break e;case eI:o=9;break e;case R_:o=11;break e;case P_:o=14;break e;case Ts:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=yr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Do(t,e,n,r){return t=yr(7,t,r,e),t.lanes=n,t}function Ff(t,e,n,r){return t=yr(22,t,r,e),t.elementType=tI,t.lanes=n,t.stateNode={isHidden:!1},t}function um(t,e,n){return t=yr(6,t,null,e),t.lanes=n,t}function cm(t,e,n){return e=yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wp(0),this.expirationTimes=Wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uy(t,e,n,r,i,s,o,a,l){return t=new fN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},q_(s),t}function pN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Na,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function KS(t){if(!t)return Ks;t=t._reactInternals;e:{if(na(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(jn(n))return qI(t,n,e)}return e}function GS(t,e,n,r,i,s,o,a,l){return t=uy(n,r,!0,t,i,s,o,a,l),t.context=KS(null),n=t.current,r=Sn(),i=Us(n),s=Ui(r,i),s.callback=e??null,Vs(n,s,i),t.current.lanes=i,Fc(t,i,r),Bn(t,r),t}function Uf(t,e,n,r){var i=e.current,s=Sn(),o=Us(i);return n=KS(n),e.context===null?e.context=n:e.pendingContext=n,e=Ui(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vs(i,e,o),t!==null&&(Wr(t,i,o,s),ld(t,i,o)),o}function Yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cy(t,e){sE(t,e),(t=t.alternate)&&sE(t,e)}function mN(){return null}var QS=typeof reportError=="function"?reportError:function(t){console.error(t)};function hy(t){this._internalRoot=t}jf.prototype.render=hy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Uf(t,e,null,null)};jf.prototype.unmount=hy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bo(function(){Uf(null,t,null,null)}),e[Hi]=null}};function jf(t){this._internalRoot=t}jf.prototype.unstable_scheduleHydration=function(t){if(t){var e=CI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ss.length&&e!==0&&e<Ss[n].priority;n++);Ss.splice(n,0,t),n===0&&RI(t)}};function dy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oE(){}function gN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Yd(o);s.call(c)}}var o=GS(e,r,t,0,null,!1,!1,"",oE);return t._reactRootContainer=o,t[Hi]=o.current,hc(t.nodeType===8?t.parentNode:t),Bo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Yd(l);a.call(c)}}var l=uy(t,0,!1,null,null,!1,!1,"",oE);return t._reactRootContainer=l,t[Hi]=l.current,hc(t.nodeType===8?t.parentNode:t),Bo(function(){Uf(e,l,n,r)}),l}function $f(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Yd(o);a.call(l)}}Uf(e,o,t,i)}else o=gN(n,e,t,i,r);return Yd(o)}II=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pu(e.pendingLanes);n!==0&&(N_(e,n|1),Bn(e,Rt()),!(je&6)&&(fl=Rt()+500,to()))}break;case 13:Bo(function(){var r=qi(t,1);if(r!==null){var i=Sn();Wr(r,t,1,i)}}),cy(t,1)}};x_=function(t){if(t.tag===13){var e=qi(t,134217728);if(e!==null){var n=Sn();Wr(e,t,134217728,n)}cy(t,134217728)}};SI=function(t){if(t.tag===13){var e=Us(t),n=qi(t,e);if(n!==null){var r=Sn();Wr(n,t,e,r)}cy(t,e)}};CI=function(){return Qe};AI=function(t,e){var n=Qe;try{return Qe=t,e()}finally{Qe=n}};Gm=function(t,e,n){switch(e){case"input":if(Bm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xf(r);if(!i)throw Error(Y(90));rI(r),Bm(r,i)}}}break;case"textarea":sI(t,n);break;case"select":e=n.value,e!=null&&Ga(t,!!n.multiple,e,!1)}};dI=sy;fI=Bo;var _N={usingClientEntryPoint:!1,Events:[jc,Ma,xf,cI,hI,sy]},_u={findFiberByHostInstance:Co,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},yN={bundleType:_u.bundleType,version:_u.version,rendererPackageName:_u.rendererPackageName,rendererConfig:_u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gI(t),t===null?null:t.stateNode},findFiberByHostInstance:_u.findFiberByHostInstance||mN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{Pf=Gh.inject(yN),ci=Gh}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_N;or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dy(e))throw Error(Y(200));return pN(t,e,null,n)};or.createRoot=function(t,e){if(!dy(t))throw Error(Y(299));var n=!1,r="",i=QS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=uy(t,1,!1,null,null,n,!1,r,i),t[Hi]=e.current,hc(t.nodeType===8?t.parentNode:t),new hy(e)};or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=gI(e),t=t===null?null:t.stateNode,t};or.flushSync=function(t){return Bo(t)};or.hydrate=function(t,e,n){if(!Bf(e))throw Error(Y(200));return $f(null,t,e,!0,n)};or.hydrateRoot=function(t,e,n){if(!dy(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=QS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=GS(e,null,t,1,n??null,i,!1,s,o),t[Hi]=e.current,hc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new jf(e)};or.render=function(t,e,n){if(!Bf(e))throw Error(Y(200));return $f(null,t,e,!1,n)};or.unmountComponentAtNode=function(t){if(!Bf(t))throw Error(Y(40));return t._reactRootContainer?(Bo(function(){$f(null,null,t,!1,function(){t._reactRootContainer=null,t[Hi]=null})}),!0):!1};or.unstable_batchedUpdates=sy;or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return $f(t,e,n,!1,r)};or.version="18.2.0-next-9e3b772b8-20220608";function YS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YS)}catch(t){console.error(t)}}YS(),GT.exports=or;var fy=GT.exports;const vN=__(fy),wN=VT({__proto__:null,default:vN},[fy]);var aE=fy;Om.createRoot=aE.createRoot,Om.hydrateRoot=aE.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yt(){return yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yt.apply(this,arguments)}var At;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(At||(At={}));const lE="popstate";function EN(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return wc("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:$o(i)}return IN(e,n,null,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TN(){return Math.random().toString(36).substr(2,8)}function uE(t,e){return{usr:t.state,key:t.key,idx:e}}function wc(t,e,n,r){return n===void 0&&(n=null),yt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?es(e):e,{state:n,key:e&&e.key||r||TN()})}function $o(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function es(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function IN(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=At.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(yt({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function p(){a=At.Pop;let x=d(),S=x==null?null:x-c;c=x,l&&l({action:a,location:k.location,delta:S})}function m(x,S){a=At.Push;let E=wc(k.location,x,S);n&&n(E,x),c=d()+1;let R=uE(E,c),V=k.createHref(E);try{o.pushState(R,"",V)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(V)}s&&l&&l({action:a,location:k.location,delta:1})}function y(x,S){a=At.Replace;let E=wc(k.location,x,S);n&&n(E,x),c=d();let R=uE(E,c),V=k.createHref(E);o.replaceState(R,"",V),s&&l&&l({action:a,location:k.location,delta:0})}function I(x){let S=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof x=="string"?x:$o(x);return E=E.replace(/ $/,"%20"),Ae(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let k={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(lE,p),l=x,()=>{i.removeEventListener(lE,p),l=null}},createHref(x){return e(i,x)},createURL:I,encodeLocation(x){let S=I(x);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:y,go(x){return o.go(x)}};return k}var st;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(st||(st={}));const SN=new Set(["lazy","caseSensitive","path","id","index","children"]);function CN(t){return t.index===!0}function Ec(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Ae(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ae(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),CN(i)){let l=yt({},i,e(i),{id:a});return r[a]=l,l}else{let l=yt({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Ec(i.children,e,o,r)),l}})}function So(t,e,n){return n===void 0&&(n="/"),md(t,e,n,!1)}function md(t,e,n,r){let i=typeof e=="string"?es(e):e,s=Ml(i.pathname||"/",n);if(s==null)return null;let o=XS(t);RN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=FN(s);a=MN(o[l],c,r)}return a}function AN(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function XS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ae(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ji([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Ae(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),XS(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:ON(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of JS(s.path))i(s,o,l)}),e}function JS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=JS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function RN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const PN=/^:[\w-]+$/,kN=3,bN=2,NN=1,xN=10,DN=-2,cE=t=>t==="*";function ON(t,e){let n=t.split("/"),r=n.length;return n.some(cE)&&(r+=DN),e&&(r+=bN),n.filter(i=>!cE(i)).reduce((i,s)=>i+(PN.test(s)?kN:s===""?NN:xN),r)}function LN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function MN(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=hE({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=hE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:ji([s,p.pathname]),pathnameBase:BN(ji([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=ji([s,p.pathnameBase]))}return o}function hE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,p)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let k=a[p]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const I=a[p];return y&&!I?c[m]=void 0:c[m]=(I||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function VN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function FN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ml(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function UN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?es(t):t;return{pathname:n?n.startsWith("/")?n:jN(n,e):e,search:$N(r),hash:zN(i)}}function jN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zf(t,e){let n=ZS(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=es(t):(i=yt({},t),Ae(!i.pathname||!i.pathname.includes("?"),hm("?","pathname","search",i)),Ae(!i.pathname||!i.pathname.includes("#"),hm("#","pathname","hash",i)),Ae(!i.search||!i.search.includes("#"),hm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=UN(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ji=t=>t.join("/").replace(/\/\/+/g,"/"),BN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$N=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class py{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Hf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eC=["post","put","patch","delete"],WN=new Set(eC),HN=["get",...eC],qN=new Set(HN),KN=new Set([301,302,303,307,308]),GN=new Set([307,308]),dm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},QN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},yu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},my=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YN=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),tC="remix-router-transitions";function XN(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ae(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;i=F=>({hasErrorBoundary:L(F)})}else i=YN;let s={},o=Ec(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||nx,d=t.unstable_patchRoutesOnMiss,p=yt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,y=new Set,I=null,k=null,x=null,S=t.hydrationData!=null,E=So(o,t.history.location,l),R=null;if(E==null&&!d){let L=Tn(404,{pathname:t.history.location.pathname}),{matches:F,route:j}=EE(o);E=F,R={[j.id]:L}}E&&d&&!t.hydrationData&&us(E,o,t.history.location.pathname).active&&(E=null);let V;if(!E)V=!1,E=[];else if(E.some(L=>L.route.lazy))V=!1;else if(!E.some(L=>L.route.loader))V=!0;else if(p.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,F=t.hydrationData?t.hydrationData.errors:null,j=W=>W.route.loader?typeof W.route.loader=="function"&&W.route.loader.hydrate===!0?!1:L&&L[W.route.id]!==void 0||F&&F[W.route.id]!==void 0:!0;if(F){let W=E.findIndex(ne=>F[ne.route.id]!==void 0);V=E.slice(0,W+1).every(j)}else V=E.every(j)}else V=t.hydrationData!=null;let B,b={historyAction:t.history.action,location:t.history.location,matches:E,initialized:V,navigation:dm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||R,fetchers:new Map,blockers:new Map},C=At.Pop,v=!1,T,A=!1,N=new Map,M=null,P=!1,ye=!1,Je=[],Ze=[],we=new Map,Z=0,le=-1,de=new Map,Re=new Set,Ie=new Map,z=new Map,We=new Set,Ke=new Map,et=new Map,tt=new Map,Dt=!1;function Ot(){if(m=t.history.listen(L=>{let{action:F,location:j,delta:W}=L;if(Dt){Dt=!1;return}pl(et.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ne=lo({currentLocation:b.location,nextLocation:j,historyAction:F});if(ne&&W!=null){Dt=!0,t.history.go(W*-1),Jr(ne,{state:"blocked",location:j,proceed(){Jr(ne,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),t.history.go(W)},reset(){let re=new Map(b.blockers);re.set(ne,yu),rt({blockers:re})}});return}return Lt(F,j)}),n){mx(e,N);let L=()=>gx(e,N);e.addEventListener("pagehide",L),M=()=>e.removeEventListener("pagehide",L)}return b.initialized||Lt(At.Pop,b.location,{initialHydration:!0}),B}function lr(){m&&m(),M&&M(),y.clear(),T&&T.abort(),b.fetchers.forEach((L,F)=>xn(F)),b.blockers.forEach((L,F)=>ca(F))}function oe(L){return y.add(L),()=>y.delete(L)}function rt(L,F){F===void 0&&(F={}),b=yt({},b,L);let j=[],W=[];p.v7_fetcherPersist&&b.fetchers.forEach((ne,re)=>{ne.state==="idle"&&(We.has(re)?W.push(re):j.push(re))}),[...y].forEach(ne=>ne(b,{deletedFetchers:W,unstable_viewTransitionOpts:F.viewTransitionOpts,unstable_flushSync:F.flushSync===!0})),p.v7_fetcherPersist&&(j.forEach(ne=>b.fetchers.delete(ne)),W.forEach(ne=>xn(ne)))}function sn(L,F,j){var W,ne;let{flushSync:re}=j===void 0?{}:j,fe=b.actionData!=null&&b.navigation.formMethod!=null&&Ur(b.navigation.formMethod)&&b.navigation.state==="loading"&&((W=L.state)==null?void 0:W._isRedirect)!==!0,J;F.actionData?Object.keys(F.actionData).length>0?J=F.actionData:J=null:fe?J=b.actionData:J=null;let ge=F.loaderData?vE(b.loaderData,F.loaderData,F.matches||[],F.errors):b.loaderData,ce=b.blockers;ce.size>0&&(ce=new Map(ce),ce.forEach((Ee,Ue)=>ce.set(Ue,yu)));let he=v===!0||b.navigation.formMethod!=null&&Ur(b.navigation.formMethod)&&((ne=L.state)==null?void 0:ne._isRedirect)!==!0;a&&(o=a,a=void 0),P||C===At.Pop||(C===At.Push?t.history.push(L,L.state):C===At.Replace&&t.history.replace(L,L.state));let xe;if(C===At.Pop){let Ee=N.get(b.location.pathname);Ee&&Ee.has(L.pathname)?xe={currentLocation:b.location,nextLocation:L}:N.has(L.pathname)&&(xe={currentLocation:L,nextLocation:b.location})}else if(A){let Ee=N.get(b.location.pathname);Ee?Ee.add(L.pathname):(Ee=new Set([L.pathname]),N.set(b.location.pathname,Ee)),xe={currentLocation:b.location,nextLocation:L}}rt(yt({},F,{actionData:J,loaderData:ge,historyAction:C,location:L,initialized:!0,navigation:dm,revalidation:"idle",restoreScrollPosition:Ci(L,F.matches||b.matches),preventScrollReset:he,blockers:ce}),{viewTransitionOpts:xe,flushSync:re===!0}),C=At.Pop,v=!1,A=!1,P=!1,ye=!1,Je=[],Ze=[]}async function Qr(L,F){if(typeof L=="number"){t.history.go(L);return}let j=Rg(b.location,b.matches,l,p.v7_prependBasename,L,p.v7_relativeSplatPath,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:W,submission:ne,error:re}=dE(p.v7_normalizeFormMethod,!1,j,F),fe=b.location,J=wc(b.location,W,F&&F.state);J=yt({},J,t.history.encodeLocation(J));let ge=F&&F.replace!=null?F.replace:void 0,ce=At.Push;ge===!0?ce=At.Replace:ge===!1||ne!=null&&Ur(ne.formMethod)&&ne.formAction===b.location.pathname+b.location.search&&(ce=At.Replace);let he=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,xe=(F&&F.unstable_flushSync)===!0,Ee=lo({currentLocation:fe,nextLocation:J,historyAction:ce});if(Ee){Jr(Ee,{state:"blocked",location:J,proceed(){Jr(Ee,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),Qr(L,F)},reset(){let Ue=new Map(b.blockers);Ue.set(Ee,yu),rt({blockers:Ue})}});return}return await Lt(ce,J,{submission:ne,pendingError:re,preventScrollReset:he,replace:F&&F.replace,enableViewTransition:F&&F.unstable_viewTransition,flushSync:xe})}function Ti(){if(Ye(),rt({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){Lt(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}Lt(C||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation})}}async function Lt(L,F,j){T&&T.abort(),T=null,C=L,P=(j&&j.startUninterruptedRevalidation)===!0,ha(b.location,b.matches),v=(j&&j.preventScrollReset)===!0,A=(j&&j.enableViewTransition)===!0;let W=a||o,ne=j&&j.overrideNavigation,re=So(W,F,l),fe=(j&&j.flushSync)===!0,J=us(re,W,F.pathname);if(J.active&&J.matches&&(re=J.matches),!re){let{error:Ce,notFoundMatches:lt,route:it}=as(F.pathname);sn(F,{matches:lt,loaderData:{},errors:{[it.id]:Ce}},{flushSync:fe});return}if(b.initialized&&!ye&&lx(b.location,F)&&!(j&&j.submission&&Ur(j.submission.formMethod))){sn(F,{matches:re},{flushSync:fe});return}T=new AbortController;let ge=Ca(t.history,F,T.signal,j&&j.submission),ce;if(j&&j.pendingError)ce=[za(re).route.id,{type:st.error,error:j.pendingError}];else if(j&&j.submission&&Ur(j.submission.formMethod)){let Ce=await Yr(ge,F,j.submission,re,J.active,{replace:j.replace,flushSync:fe});if(Ce.shortCircuited)return;if(Ce.pendingActionResult){let[lt,it]=Ce.pendingActionResult;if(Xn(it)&&Hf(it.error)&&it.error.status===404){T=null,sn(F,{matches:Ce.matches,loaderData:{},errors:{[lt]:it.error}});return}}re=Ce.matches||re,ce=Ce.pendingActionResult,ne=fm(F,j.submission),fe=!1,J.active=!1,ge=Ca(t.history,ge.url,ge.signal)}let{shortCircuited:he,matches:xe,loaderData:Ee,errors:Ue}=await Cr(ge,F,re,J.active,ne,j&&j.submission,j&&j.fetcherSubmission,j&&j.replace,j&&j.initialHydration===!0,fe,ce);he||(T=null,sn(F,yt({matches:xe||re},wE(ce),{loaderData:Ee,errors:Ue})))}async function Yr(L,F,j,W,ne,re){re===void 0&&(re={}),Ye();let fe=fx(F,j);if(rt({navigation:fe},{flushSync:re.flushSync===!0}),ne){let ce=await hr(W,F.pathname,L.signal);if(ce.type==="aborted")return{shortCircuited:!0};if(ce.type==="error"){let{boundaryId:he,error:xe}=zn(F.pathname,ce);return{matches:ce.partialMatches,pendingActionResult:[he,{type:st.error,error:xe}]}}else if(ce.matches)W=ce.matches;else{let{notFoundMatches:he,error:xe,route:Ee}=as(F.pathname);return{matches:he,pendingActionResult:[Ee.id,{type:st.error,error:xe}]}}}let J,ge=bu(W,F);if(!ge.route.action&&!ge.route.lazy)J={type:st.error,error:Tn(405,{method:L.method,pathname:F.pathname,routeId:ge.route.id})};else if(J=(await Nn("action",L,[ge],W))[0],L.signal.aborted)return{shortCircuited:!0};if(ko(J)){let ce;return re&&re.replace!=null?ce=re.replace:ce=gE(J.response.headers.get("Location"),new URL(L.url),l)===b.location.pathname+b.location.search,await _n(L,J,{submission:j,replace:ce}),{shortCircuited:!0}}if(Po(J))throw Tn(400,{type:"defer-action"});if(Xn(J)){let ce=za(W,ge.route.id);return(re&&re.replace)!==!0&&(C=At.Push),{matches:W,pendingActionResult:[ce.route.id,J]}}return{matches:W,pendingActionResult:[ge.route.id,J]}}async function Cr(L,F,j,W,ne,re,fe,J,ge,ce,he){let xe=ne||fm(F,re),Ee=re||fe||SE(xe),Ue=!P&&(!p.v7_partialHydration||!ge);if(W){if(Ue){let nt=kn(he);rt(yt({navigation:xe},nt!==void 0?{actionData:nt}:{}),{flushSync:ce})}let me=await hr(j,F.pathname,L.signal);if(me.type==="aborted")return{shortCircuited:!0};if(me.type==="error"){let{boundaryId:nt,error:Ct}=zn(F.pathname,me);return{matches:me.partialMatches,loaderData:{},errors:{[nt]:Ct}}}else if(me.matches)j=me.matches;else{let{error:nt,notFoundMatches:Ct,route:Ge}=as(F.pathname);return{matches:Ct,loaderData:{},errors:{[Ge.id]:nt}}}}let Ce=a||o,[lt,it]=fE(t.history,b,j,Ee,F,p.v7_partialHydration&&ge===!0,p.v7_skipActionErrorRevalidation,ye,Je,Ze,We,Ie,Re,Ce,l,he);if(cr(me=>!(j&&j.some(nt=>nt.route.id===me))||lt&&lt.some(nt=>nt.route.id===me)),le=++Z,lt.length===0&&it.length===0){let me=Si();return sn(F,yt({matches:j,loaderData:{},errors:he&&Xn(he[1])?{[he[0]]:he[1].error}:null},wE(he),me?{fetchers:new Map(b.fetchers)}:{}),{flushSync:ce}),{shortCircuited:!0}}if(Ue){let me={};if(!W){me.navigation=xe;let nt=kn(he);nt!==void 0&&(me.actionData=nt)}it.length>0&&(me.fetchers=bn(it)),rt(me,{flushSync:ce})}it.forEach(me=>{we.has(me.key)&&Mt(me.key),me.controller&&we.set(me.key,me.controller)});let kr=()=>it.forEach(me=>Mt(me.key));T&&T.signal.addEventListener("abort",kr);let{loaderResults:Hn,fetcherResults:Zr}=await Ar(b.matches,j,lt,it,L);if(L.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",kr),it.forEach(me=>we.delete(me.key));let qn=TE([...Hn,...Zr]);if(qn){if(qn.idx>=lt.length){let me=it[qn.idx-lt.length].key;Re.add(me)}return await _n(L,qn.result,{replace:J}),{shortCircuited:!0}}let{loaderData:br,errors:Qt}=yE(b,j,lt,Hn,he,it,Zr,Ke);Ke.forEach((me,nt)=>{me.subscribe(Ct=>{(Ct||me.done)&&Ke.delete(nt)})}),p.v7_partialHydration&&ge&&b.errors&&Object.entries(b.errors).filter(me=>{let[nt]=me;return!lt.some(Ct=>Ct.route.id===nt)}).forEach(me=>{let[nt,Ct]=me;Qt=Object.assign(Qt||{},{[nt]:Ct})});let Kn=Si(),Dn=os(le),yn=Kn||Dn||it.length>0;return yt({matches:j,loaderData:br,errors:Qt},yn?{fetchers:new Map(b.fetchers)}:{})}function kn(L){if(L&&!Xn(L[1]))return{[L[0]]:L[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function bn(L){return L.forEach(F=>{let j=b.fetchers.get(F.key),W=vu(void 0,j?j.data:void 0);b.fetchers.set(F.key,W)}),new Map(b.fetchers)}function ur(L,F,j,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");we.has(L)&&Mt(L);let ne=(W&&W.unstable_flushSync)===!0,re=a||o,fe=Rg(b.location,b.matches,l,p.v7_prependBasename,j,p.v7_relativeSplatPath,F,W==null?void 0:W.relative),J=So(re,fe,l),ge=us(J,re,fe);if(ge.active&&ge.matches&&(J=ge.matches),!J){Gt(L,F,Tn(404,{pathname:fe}),{flushSync:ne});return}let{path:ce,submission:he,error:xe}=dE(p.v7_normalizeFormMethod,!0,fe,W);if(xe){Gt(L,F,xe,{flushSync:ne});return}let Ee=bu(J,ce);if(v=(W&&W.preventScrollReset)===!0,he&&Ur(he.formMethod)){Ii(L,F,ce,Ee,J,ge.active,ne,he);return}Ie.set(L,{routeId:F,path:ce}),ss(L,F,ce,Ee,J,ge.active,ne,he)}async function Ii(L,F,j,W,ne,re,fe,J){Ye(),Ie.delete(L);function ge(Ge){if(!Ge.route.action&&!Ge.route.lazy){let vn=Tn(405,{method:J.formMethod,pathname:j,routeId:F});return Gt(L,F,vn,{flushSync:fe}),!0}return!1}if(!re&&ge(W))return;let ce=b.fetchers.get(L);Pe(L,px(J,ce),{flushSync:fe});let he=new AbortController,xe=Ca(t.history,j,he.signal,J);if(re){let Ge=await hr(ne,j,xe.signal);if(Ge.type==="aborted")return;if(Ge.type==="error"){let{error:vn}=zn(j,Ge);Gt(L,F,vn,{flushSync:fe});return}else if(Ge.matches){if(ne=Ge.matches,W=bu(ne,j),ge(W))return}else{Gt(L,F,Tn(404,{pathname:j}),{flushSync:fe});return}}we.set(L,he);let Ee=Z,Ce=(await Nn("action",xe,[W],ne))[0];if(xe.signal.aborted){we.get(L)===he&&we.delete(L);return}if(p.v7_fetcherPersist&&We.has(L)){if(ko(Ce)||Xn(Ce)){Pe(L,vs(void 0));return}}else{if(ko(Ce))if(we.delete(L),le>Ee){Pe(L,vs(void 0));return}else return Re.add(L),Pe(L,vu(J)),_n(xe,Ce,{fetcherSubmission:J});if(Xn(Ce)){Gt(L,F,Ce.error);return}}if(Po(Ce))throw Tn(400,{type:"defer-action"});let lt=b.navigation.location||b.location,it=Ca(t.history,lt,he.signal),kr=a||o,Hn=b.navigation.state!=="idle"?So(kr,b.navigation.location,l):b.matches;Ae(Hn,"Didn't find any matches after fetcher action");let Zr=++Z;de.set(L,Zr);let qn=vu(J,Ce.data);b.fetchers.set(L,qn);let[br,Qt]=fE(t.history,b,Hn,J,lt,!1,p.v7_skipActionErrorRevalidation,ye,Je,Ze,We,Ie,Re,kr,l,[W.route.id,Ce]);Qt.filter(Ge=>Ge.key!==L).forEach(Ge=>{let vn=Ge.key,cs=b.fetchers.get(vn),da=vu(void 0,cs?cs.data:void 0);b.fetchers.set(vn,da),we.has(vn)&&Mt(vn),Ge.controller&&we.set(vn,Ge.controller)}),rt({fetchers:new Map(b.fetchers)});let Kn=()=>Qt.forEach(Ge=>Mt(Ge.key));he.signal.addEventListener("abort",Kn);let{loaderResults:Dn,fetcherResults:yn}=await Ar(b.matches,Hn,br,Qt,it);if(he.signal.aborted)return;he.signal.removeEventListener("abort",Kn),de.delete(L),we.delete(L),Qt.forEach(Ge=>we.delete(Ge.key));let me=TE([...Dn,...yn]);if(me){if(me.idx>=br.length){let Ge=Qt[me.idx-br.length].key;Re.add(Ge)}return _n(it,me.result)}let{loaderData:nt,errors:Ct}=yE(b,b.matches,br,Dn,void 0,Qt,yn,Ke);if(b.fetchers.has(L)){let Ge=vs(Ce.data);b.fetchers.set(L,Ge)}os(Zr),b.navigation.state==="loading"&&Zr>le?(Ae(C,"Expected pending action"),T&&T.abort(),sn(b.navigation.location,{matches:Hn,loaderData:nt,errors:Ct,fetchers:new Map(b.fetchers)})):(rt({errors:Ct,loaderData:vE(b.loaderData,nt,Hn,Ct),fetchers:new Map(b.fetchers)}),ye=!1)}async function ss(L,F,j,W,ne,re,fe,J){let ge=b.fetchers.get(L);Pe(L,vu(J,ge?ge.data:void 0),{flushSync:fe});let ce=new AbortController,he=Ca(t.history,j,ce.signal);if(re){let Ce=await hr(ne,j,he.signal);if(Ce.type==="aborted")return;if(Ce.type==="error"){let{error:lt}=zn(j,Ce);Gt(L,F,lt,{flushSync:fe});return}else if(Ce.matches)ne=Ce.matches,W=bu(ne,j);else{Gt(L,F,Tn(404,{pathname:j}),{flushSync:fe});return}}we.set(L,ce);let xe=Z,Ue=(await Nn("loader",he,[W],ne))[0];if(Po(Ue)&&(Ue=await oC(Ue,he.signal,!0)||Ue),we.get(L)===ce&&we.delete(L),!he.signal.aborted){if(We.has(L)){Pe(L,vs(void 0));return}if(ko(Ue))if(le>xe){Pe(L,vs(void 0));return}else{Re.add(L),await _n(he,Ue);return}if(Xn(Ue)){Gt(L,F,Ue.error);return}Ae(!Po(Ue),"Unhandled fetcher deferred data"),Pe(L,vs(Ue.data))}}async function _n(L,F,j){let{submission:W,fetcherSubmission:ne,replace:re}=j===void 0?{}:j;F.response.headers.has("X-Remix-Revalidate")&&(ye=!0);let fe=F.response.headers.get("Location");Ae(fe,"Expected a Location header on the redirect Response"),fe=gE(fe,new URL(L.url),l);let J=wc(b.location,fe,{_isRedirect:!0});if(n){let Ue=!1;if(F.response.headers.has("X-Remix-Reload-Document"))Ue=!0;else if(my.test(fe)){const Ce=t.history.createURL(fe);Ue=Ce.origin!==e.location.origin||Ml(Ce.pathname,l)==null}if(Ue){re?e.location.replace(fe):e.location.assign(fe);return}}T=null;let ge=re===!0?At.Replace:At.Push,{formMethod:ce,formAction:he,formEncType:xe}=b.navigation;!W&&!ne&&ce&&he&&xe&&(W=SE(b.navigation));let Ee=W||ne;if(GN.has(F.response.status)&&Ee&&Ur(Ee.formMethod))await Lt(ge,J,{submission:yt({},Ee,{formAction:fe}),preventScrollReset:v});else{let Ue=fm(J,W);await Lt(ge,J,{overrideNavigation:Ue,fetcherSubmission:ne,preventScrollReset:v})}}async function Nn(L,F,j,W){try{let ne=await rx(c,L,F,j,W,s,i);return await Promise.all(ne.map((re,fe)=>{if(cx(re)){let J=re.result;return{type:st.redirect,response:ox(J,F,j[fe].route.id,W,l,p.v7_relativeSplatPath)}}return sx(re)}))}catch(ne){return j.map(()=>({type:st.error,error:ne}))}}async function Ar(L,F,j,W,ne){let[re,...fe]=await Promise.all([j.length?Nn("loader",ne,j,F):[],...W.map(J=>{if(J.matches&&J.match&&J.controller){let ge=Ca(t.history,J.path,J.controller.signal);return Nn("loader",ge,[J.match],J.matches).then(ce=>ce[0])}else return Promise.resolve({type:st.error,error:Tn(404,{pathname:J.path})})})]);return await Promise.all([IE(L,j,re,re.map(()=>ne.signal),!1,b.loaderData),IE(L,W.map(J=>J.match),fe,W.map(J=>J.controller?J.controller.signal:null),!0)]),{loaderResults:re,fetcherResults:fe}}function Ye(){ye=!0,Je.push(...cr()),Ie.forEach((L,F)=>{we.has(F)&&(Ze.push(F),Mt(F))})}function Pe(L,F,j){j===void 0&&(j={}),b.fetchers.set(L,F),rt({fetchers:new Map(b.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function Gt(L,F,j,W){W===void 0&&(W={});let ne=za(b.matches,F);xn(L),rt({errors:{[ne.route.id]:j},fetchers:new Map(b.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Rr(L){return p.v7_fetcherPersist&&(z.set(L,(z.get(L)||0)+1),We.has(L)&&We.delete(L)),b.fetchers.get(L)||QN}function xn(L){let F=b.fetchers.get(L);we.has(L)&&!(F&&F.state==="loading"&&de.has(L))&&Mt(L),Ie.delete(L),de.delete(L),Re.delete(L),We.delete(L),b.fetchers.delete(L)}function Xr(L){if(p.v7_fetcherPersist){let F=(z.get(L)||0)-1;F<=0?(z.delete(L),We.add(L)):z.set(L,F)}else xn(L);rt({fetchers:new Map(b.fetchers)})}function Mt(L){let F=we.get(L);Ae(F,"Expected fetch controller: "+L),F.abort(),we.delete(L)}function ao(L){for(let F of L){let j=Rr(F),W=vs(j.data);b.fetchers.set(F,W)}}function Si(){let L=[],F=!1;for(let j of Re){let W=b.fetchers.get(j);Ae(W,"Expected fetcher: "+j),W.state==="loading"&&(Re.delete(j),L.push(j),F=!0)}return ao(L),F}function os(L){let F=[];for(let[j,W]of de)if(W<L){let ne=b.fetchers.get(j);Ae(ne,"Expected fetcher: "+j),ne.state==="loading"&&(Mt(j),de.delete(j),F.push(j))}return ao(F),F.length>0}function Ql(L,F){let j=b.blockers.get(L)||yu;return et.get(L)!==F&&et.set(L,F),j}function ca(L){b.blockers.delete(L),et.delete(L)}function Jr(L,F){let j=b.blockers.get(L)||yu;Ae(j.state==="unblocked"&&F.state==="blocked"||j.state==="blocked"&&F.state==="blocked"||j.state==="blocked"&&F.state==="proceeding"||j.state==="blocked"&&F.state==="unblocked"||j.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+j.state+" -> "+F.state);let W=new Map(b.blockers);W.set(L,F),rt({blockers:W})}function lo(L){let{currentLocation:F,nextLocation:j,historyAction:W}=L;if(et.size===0)return;et.size>1&&pl(!1,"A router only supports one blocker at a time");let ne=Array.from(et.entries()),[re,fe]=ne[ne.length-1],J=b.blockers.get(re);if(!(J&&J.state==="proceeding")&&fe({currentLocation:F,nextLocation:j,historyAction:W}))return re}function as(L){let F=Tn(404,{pathname:L}),j=a||o,{matches:W,route:ne}=EE(j);return cr(),{notFoundMatches:W,route:ne,error:F}}function zn(L,F){return{boundaryId:za(F.partialMatches).route.id,error:Tn(400,{type:"route-discovery",pathname:L,message:F.error!=null&&"message"in F.error?F.error:String(F.error)})}}function cr(L){let F=[];return Ke.forEach((j,W)=>{(!L||L(W))&&(j.cancel(),F.push(W),Ke.delete(W))}),F}function ls(L,F,j){if(I=L,x=F,k=j||null,!S&&b.navigation===dm){S=!0;let W=Ci(b.location,b.matches);W!=null&&rt({restoreScrollPosition:W})}return()=>{I=null,x=null,k=null}}function Wn(L,F){return k&&k(L,F.map(W=>AN(W,b.loaderData)))||L.key}function ha(L,F){if(I&&x){let j=Wn(L,F);I[j]=x()}}function Ci(L,F){if(I){let j=Wn(L,F),W=I[j];if(typeof W=="number")return W}return null}function us(L,F,j){if(d)if(L){let W=L[L.length-1].route;if(W.path&&(W.path==="*"||W.path.endsWith("/*")))return{active:!0,matches:md(F,j,l,!0)}}else return{active:!0,matches:md(F,j,l,!0)||[]};return{active:!1,matches:null}}async function hr(L,F,j){let W=L,ne=W.length>0?W[W.length-1].route:null;for(;;){let re=a==null,fe=a||o;try{await tx(d,F,W,fe,s,i,tt,j)}catch(he){return{type:"error",error:he,partialMatches:W}}finally{re&&(o=[...o])}if(j.aborted)return{type:"aborted"};let J=So(fe,F,l),ge=!1;if(J){let he=J[J.length-1].route;if(he.index)return{type:"success",matches:J};if(he.path&&he.path.length>0)if(he.path==="*")ge=!0;else return{type:"success",matches:J}}let ce=md(fe,F,l,!0);if(!ce||W.map(he=>he.route.id).join("-")===ce.map(he=>he.route.id).join("-"))return{type:"success",matches:ge?J:null};if(W=ce,ne=W[W.length-1].route,ne.path==="*")return{type:"success",matches:W}}}function Pr(L){s={},a=Ec(L,i,void 0,s)}function gt(L,F){let j=a==null;rC(L,F,a||o,s,i),j&&(o=[...o],rt({}))}return B={get basename(){return l},get future(){return p},get state(){return b},get routes(){return o},get window(){return e},initialize:Ot,subscribe:oe,enableScrollRestoration:ls,navigate:Qr,fetch:ur,revalidate:Ti,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:Rr,deleteFetcher:Xr,dispose:lr,getBlocker:Ql,deleteBlocker:ca,patchRoutes:gt,_internalFetchControllers:we,_internalActiveDeferreds:Ke,_internalSetRoutes:Pr},B}function JN(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Rg(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let p of e)if(l.push(p),p.route.id===o){c=p;break}}else l=e,c=e[e.length-1];let d=Wf(i||".",zf(l,s),Ml(t.pathname,n)||t.pathname,a==="path");return i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!gy(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:ji([n,d.pathname])),$o(d)}function dE(t,e,n,r){if(!r||!JN(r))return{path:n};if(r.formMethod&&!dx(r.formMethod))return{path:n,error:Tn(405,{method:r.formMethod})};let i=()=>({path:n,error:Tn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=iC(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Ur(o))return i();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,I)=>{let[k,x]=I;return""+y+k+"="+x+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!Ur(o))return i();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}Ae(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Pg(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Pg(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=_E(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=_E(l)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Ur(d.formMethod))return{path:n,submission:d};let p=es(n);return e&&p.search&&gy(p.search)&&l.append("index",""),p.search="?"+l,{path:$o(p),submission:d}}function ZN(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function fE(t,e,n,r,i,s,o,a,l,c,d,p,m,y,I,k){let x=k?Xn(k[1])?k[1].error:k[1].data:void 0,S=t.createURL(e.location),E=t.createURL(i),R=k&&Xn(k[1])?k[0]:void 0,V=R?ZN(n,R):n,B=k?k[1].statusCode:void 0,b=o&&B&&B>=400,C=V.filter((T,A)=>{let{route:N}=T;if(N.lazy)return!0;if(N.loader==null)return!1;if(s)return typeof N.loader!="function"||N.loader.hydrate?!0:e.loaderData[N.id]===void 0&&(!e.errors||e.errors[N.id]===void 0);if(ex(e.loaderData,e.matches[A],T)||l.some(ye=>ye===T.route.id))return!0;let M=e.matches[A],P=T;return pE(T,yt({currentUrl:S,currentParams:M.params,nextUrl:E,nextParams:P.params},r,{actionResult:x,actionStatus:B,defaultShouldRevalidate:b?!1:a||S.pathname+S.search===E.pathname+E.search||S.search!==E.search||nC(M,P)}))}),v=[];return p.forEach((T,A)=>{if(s||!n.some(Je=>Je.route.id===T.routeId)||d.has(A))return;let N=So(y,T.path,I);if(!N){v.push({key:A,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let M=e.fetchers.get(A),P=bu(N,T.path),ye=!1;m.has(A)?ye=!1:c.includes(A)?ye=!0:M&&M.state!=="idle"&&M.data===void 0?ye=a:ye=pE(P,yt({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:x,actionStatus:B,defaultShouldRevalidate:b?!1:a})),ye&&v.push({key:A,routeId:T.routeId,path:T.path,matches:N,match:P,controller:new AbortController})}),[C,v]}function ex(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function nC(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function pE(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function tx(t,e,n,r,i,s,o,a){let l=[e,...n.map(c=>c.route.id)].join("-");try{let c=o.get(l);c||(c=t({path:e,matches:n,patch:(d,p)=>{a.aborted||rC(d,p,r,i,s)}}),o.set(l,c)),c&&ux(c)&&await c}finally{o.delete(l)}}function rC(t,e,n,r,i){if(t){var s;let o=r[t];Ae(o,"No route found to patch children into: routeId = "+t);let a=Ec(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=Ec(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function mE(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Ae(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";pl(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!SN.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,yt({},e(i),{lazy:void 0}))}function nx(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function rx(t,e,n,r,i,s,o,a){let l=r.reduce((p,m)=>p.add(m.route.id),new Set),c=new Set,d=await t({matches:i.map(p=>{let m=l.has(p.route.id);return yt({},p,{shouldLoad:m,resolve:I=>(c.add(p.route.id),m?ix(e,n,p,s,o,I,a):Promise.resolve({type:st.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(p=>Ae(c.has(p.route.id),'`match.resolve()` was not called for route id "'+p.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((p,m)=>l.has(i[m].route.id))}async function ix(t,e,n,r,i,s,o){let a,l,c=d=>{let p,m=new Promise((k,x)=>p=x);l=()=>p(),e.signal.addEventListener("abort",l);let y=k=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):d({request:e,params:n.params,context:o},...k!==void 0?[k]:[]),I;return s?I=s(k=>y(k)):I=(async()=>{try{return{type:"data",result:await y()}}catch(k){return{type:"error",result:k}}})(),Promise.race([I,m])};try{let d=n.route[t];if(n.route.lazy)if(d){let p,[m]=await Promise.all([c(d).catch(y=>{p=y}),mE(n.route,i,r)]);if(p!==void 0)throw p;a=m}else if(await mE(n.route,i,r),d=n.route[t],d)a=await c(d);else if(t==="action"){let p=new URL(e.url),m=p.pathname+p.search;throw Tn(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:st.data,result:void 0};else if(d)a=await c(d);else{let p=new URL(e.url),m=p.pathname+p.search;throw Tn(404,{pathname:m})}Ae(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:st.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function sx(t){let{result:e,type:n,status:r}=t;if(sC(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:st.error,error:a}}return n===st.error?{type:st.error,error:new py(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:st.data,data:o,statusCode:e.status,headers:e.headers}}if(n===st.error)return{type:st.error,error:e,statusCode:Hf(e)?e.status:r};if(hx(e)){var i,s;return{type:st.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:st.data,data:e,statusCode:r}}function ox(t,e,n,r,i,s){let o=t.headers.get("Location");if(Ae(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!my.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Rg(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function gE(t,e,n){if(my.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Ml(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Ca(t,e,n,r){let i=t.createURL(iC(e)).toString(),s={signal:n};if(r&&Ur(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Pg(r.formData):s.body=r.formData}return new Request(i,s)}function Pg(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function _E(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function ax(t,e,n,r,i,s){let o={},a=null,l,c=!1,d={},p=r&&Xn(r[1])?r[1].error:void 0;return n.forEach((m,y)=>{let I=e[y].route.id;if(Ae(!ko(m),"Cannot handle redirect results in processLoaderData"),Xn(m)){let k=m.error;if(p!==void 0&&(k=p,p=void 0),a=a||{},s)a[I]=k;else{let x=za(t,I);a[x.route.id]==null&&(a[x.route.id]=k)}o[I]=void 0,c||(c=!0,l=Hf(m.error)?m.error.status:500),m.headers&&(d[I]=m.headers)}else Po(m)?(i.set(I,m.deferredData),o[I]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!c&&(l=m.statusCode),m.headers&&(d[I]=m.headers)):(o[I]=m.data,m.statusCode&&m.statusCode!==200&&!c&&(l=m.statusCode),m.headers&&(d[I]=m.headers))}),p!==void 0&&r&&(a={[r[0]]:p},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:d}}function yE(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=ax(e,n,r,i,a,!1);for(let d=0;d<s.length;d++){let{key:p,match:m,controller:y}=s[d];Ae(o!==void 0&&o[d]!==void 0,"Did not find corresponding fetcher result");let I=o[d];if(!(y&&y.signal.aborted))if(Xn(I)){let k=za(t.matches,m==null?void 0:m.route.id);c&&c[k.route.id]||(c=yt({},c,{[k.route.id]:I.error})),t.fetchers.delete(p)}else if(ko(I))Ae(!1,"Unhandled fetcher revalidation redirect");else if(Po(I))Ae(!1,"Unhandled fetcher deferred data");else{let k=vs(I.data);t.fetchers.set(p,k)}}return{loaderData:l,errors:c}}function vE(t,e,n,r){let i=yt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function wE(t){return t?Xn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function za(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function EE(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Tn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new py(t||500,a,new Error(l),!0)}function TE(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(ko(n))return{result:n,idx:e}}}function iC(t){let e=typeof t=="string"?es(t):t;return $o(yt({},e,{hash:""}))}function lx(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function ux(t){return typeof t=="object"&&t!=null&&"then"in t}function cx(t){return sC(t.result)&&KN.has(t.result.status)}function Po(t){return t.type===st.deferred}function Xn(t){return t.type===st.error}function ko(t){return(t&&t.type)===st.redirect}function hx(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function sC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function dx(t){return qN.has(t.toLowerCase())}function Ur(t){return WN.has(t.toLowerCase())}async function IE(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(p=>p.route.id===l.route.id),d=c!=null&&!nC(c,l)&&(s&&s[l.route.id])!==void 0;if(Po(a)&&(i||d)){let p=r[o];Ae(p,"Expected an AbortSignal for revalidating fetcher deferred result"),await oC(a,p,i).then(m=>{m&&(n[o]=m||n[o])})}}}async function oC(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:st.data,data:t.deferredData.unwrappedData}}catch(i){return{type:st.error,error:i}}return{type:st.data,data:t.deferredData.data}}}function gy(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function bu(t,e){let n=typeof e=="string"?es(e).search:e.search;if(t[t.length-1].route.index&&gy(n||""))return t[t.length-1];let r=ZS(t);return r[r.length-1]}function SE(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function fm(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function fx(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function vu(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function px(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function vs(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function mx(t,e){try{let n=t.sessionStorage.getItem(tC);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function gx(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(tC,JSON.stringify(n))}catch(r){pl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tc.apply(this,arguments)}const qf=H.createContext(null),aC=H.createContext(null),no=H.createContext(null),Kf=H.createContext(null),Ei=H.createContext({outlet:null,matches:[],isDataRoute:!1}),lC=H.createContext(null);function _x(t,e){let{relative:n}=e===void 0?{}:e;Vl()||Ae(!1);let{basename:r,navigator:i}=H.useContext(no),{hash:s,pathname:o,search:a}=cC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ji([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Vl(){return H.useContext(Kf)!=null}function $c(){return Vl()||Ae(!1),H.useContext(Kf).location}function uC(t){H.useContext(no).static||H.useLayoutEffect(t)}function ra(){let{isDataRoute:t}=H.useContext(Ei);return t?xx():yx()}function yx(){Vl()||Ae(!1);let t=H.useContext(qf),{basename:e,future:n,navigator:r}=H.useContext(no),{matches:i}=H.useContext(Ei),{pathname:s}=$c(),o=JSON.stringify(zf(i,n.v7_relativeSplatPath)),a=H.useRef(!1);return uC(()=>{a.current=!0}),H.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=Wf(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ji([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,s,t])}const vx=H.createContext(null);function wx(t){let e=H.useContext(Ei).outlet;return e&&H.createElement(vx.Provider,{value:t},e)}function Ex(){let{matches:t}=H.useContext(Ei),e=t[t.length-1];return e?e.params:{}}function cC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=H.useContext(no),{matches:i}=H.useContext(Ei),{pathname:s}=$c(),o=JSON.stringify(zf(i,r.v7_relativeSplatPath));return H.useMemo(()=>Wf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Tx(t,e,n,r){Vl()||Ae(!1);let{navigator:i}=H.useContext(no),{matches:s}=H.useContext(Ei),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=$c(),d;if(e){var p;let x=typeof e=="string"?es(e):e;l==="/"||(p=x.pathname)!=null&&p.startsWith(l)||Ae(!1),d=x}else d=c;let m=d.pathname||"/",y=m;if(l!=="/"){let x=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let I=So(t,{pathname:y}),k=Rx(I&&I.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:ji([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:ji([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&k?H.createElement(Kf.Provider,{value:{location:Tc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:At.Pop}},k):k}function Ix(){let t=Nx(),e=Hf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:i},n):null,null)}const Sx=H.createElement(Ix,null);class Cx extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?H.createElement(Ei.Provider,{value:this.props.routeContext},H.createElement(lC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ax(t){let{routeContext:e,match:n,children:r}=t,i=H.useContext(qf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),H.createElement(Ei.Provider,{value:e},r)}function Rx(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);d>=0||Ae(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:m,errors:y}=n,I=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||I){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,p,m)=>{let y,I=!1,k=null,x=null;n&&(y=a&&p.route.id?a[p.route.id]:void 0,k=p.route.errorElement||Sx,l&&(c<0&&m===0?(Dx("route-fallback",!1),I=!0,x=null):c===m&&(I=!0,x=p.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,m+1)),E=()=>{let R;return y?R=k:I?R=x:p.route.Component?R=H.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=d,H.createElement(Ax,{match:p,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?H.createElement(Cx,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}var hC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hC||{}),Xd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xd||{});function Px(t){let e=H.useContext(qf);return e||Ae(!1),e}function kx(t){let e=H.useContext(aC);return e||Ae(!1),e}function bx(t){let e=H.useContext(Ei);return e||Ae(!1),e}function dC(t){let e=bx(),n=e.matches[e.matches.length-1];return n.route.id||Ae(!1),n.route.id}function Nx(){var t;let e=H.useContext(lC),n=kx(Xd.UseRouteError),r=dC(Xd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function xx(){let{router:t}=Px(hC.UseNavigateStable),e=dC(Xd.UseNavigateStable),n=H.useRef(!1);return uC(()=>{n.current=!0}),H.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Tc({fromRouteId:e},s)))},[t,e])}const CE={};function Dx(t,e,n){!e&&!CE[t]&&(CE[t]=!0)}function Ox(t){let{to:e,replace:n,state:r,relative:i}=t;Vl()||Ae(!1);let{future:s,static:o}=H.useContext(no),{matches:a}=H.useContext(Ei),{pathname:l}=$c(),c=ra(),d=Wf(e,zf(a,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(d);return H.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function Lx(t){return wx(t.context)}function Mx(t){let{basename:e="/",children:n=null,location:r,navigationType:i=At.Pop,navigator:s,static:o=!1,future:a}=t;Vl()&&Ae(!1);let l=e.replace(/^\/*/,"/"),c=H.useMemo(()=>({basename:l,navigator:s,static:o,future:Tc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=es(r));let{pathname:d="/",search:p="",hash:m="",state:y=null,key:I="default"}=r,k=H.useMemo(()=>{let x=Ml(d,l);return x==null?null:{location:{pathname:x,search:p,hash:m,state:y,key:I},navigationType:i}},[l,d,p,m,y,I,i]);return k==null?null:H.createElement(no.Provider,{value:c},H.createElement(Kf.Provider,{children:n,value:k}))}new Promise(()=>{});function Vx(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:H.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:H.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:H.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ic(){return Ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ic.apply(this,arguments)}function Fx(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ux(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jx(t,e){return t.button===0&&(!e||e==="_self")&&!Ux(t)}const Bx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],$x="6";try{window.__reactRouterVersion=$x}catch{}function zx(t,e){return XN({basename:e==null?void 0:e.basename,future:Ic({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:EN({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||Wx(),routes:t,mapRouteProperties:Vx,unstable_dataStrategy:e==null?void 0:e.unstable_dataStrategy,unstable_patchRoutesOnMiss:e==null?void 0:e.unstable_patchRoutesOnMiss,window:e==null?void 0:e.window}).initialize()}function Wx(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Ic({},e,{errors:Hx(e.errors)})),e}function Hx(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new py(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const qx=H.createContext({isTransitioning:!1}),Kx=H.createContext(new Map),Gx="startTransition",AE=uk[Gx],Qx="flushSync",RE=wN[Qx];function Yx(t){AE?AE(t):t()}function wu(t){RE?RE(t):t()}let Xx=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function Jx(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=H.useState(n.state),[o,a]=H.useState(),[l,c]=H.useState({isTransitioning:!1}),[d,p]=H.useState(),[m,y]=H.useState(),[I,k]=H.useState(),x=H.useRef(new Map),{v7_startTransition:S}=r||{},E=H.useCallback(v=>{S?Yx(v):v()},[S]),R=H.useCallback((v,T)=>{let{deletedFetchers:A,unstable_flushSync:N,unstable_viewTransitionOpts:M}=T;A.forEach(ye=>x.current.delete(ye)),v.fetchers.forEach((ye,Je)=>{ye.data!==void 0&&x.current.set(Je,ye.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!M||P){N?wu(()=>s(v)):E(()=>s(v));return}if(N){wu(()=>{m&&(d&&d.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let ye=n.window.document.startViewTransition(()=>{wu(()=>s(v))});ye.finished.finally(()=>{wu(()=>{p(void 0),y(void 0),a(void 0),c({isTransitioning:!1})})}),wu(()=>y(ye));return}m?(d&&d.resolve(),m.skipTransition(),k({state:v,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(a(v),c({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,m,d,x,E]);H.useLayoutEffect(()=>n.subscribe(R),[n,R]),H.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new Xx)},[l]),H.useEffect(()=>{if(d&&o&&n.window){let v=o,T=d.promise,A=n.window.document.startViewTransition(async()=>{E(()=>s(v)),await T});A.finished.finally(()=>{p(void 0),y(void 0),a(void 0),c({isTransitioning:!1})}),y(A)}},[E,o,d,n.window]),H.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,m,i.location,o]),H.useEffect(()=>{!l.isTransitioning&&I&&(a(I.state),c({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}),k(void 0))},[l.isTransitioning,I]),H.useEffect(()=>{},[]);let V=H.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,T,A)=>n.navigate(v,{state:T,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(v,T,A)=>n.navigate(v,{replace:!0,state:T,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[n]),B=n.basename||"/",b=H.useMemo(()=>({router:n,navigator:V,static:!1,basename:B}),[n,V,B]),C=H.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return H.createElement(H.Fragment,null,H.createElement(qf.Provider,{value:b},H.createElement(aC.Provider,{value:i},H.createElement(Kx.Provider,{value:x.current},H.createElement(qx.Provider,{value:l},H.createElement(Mx,{basename:B,location:i.location,navigationType:i.historyAction,navigator:V,future:C},i.initialized||n.future.v7_partialHydration?H.createElement(Zx,{routes:n.routes,future:n.future,state:i}):e))))),null)}const Zx=H.memo(eD);function eD(t){let{routes:e,future:n,state:r}=t;return Tx(e,void 0,r,n)}const tD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fC=H.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,unstable_viewTransition:p}=e,m=Fx(e,Bx),{basename:y}=H.useContext(no),I,k=!1;if(typeof c=="string"&&nD.test(c)&&(I=c,tD))try{let R=new URL(window.location.href),V=c.startsWith("//")?new URL(R.protocol+c):new URL(c),B=Ml(V.pathname,y);V.origin===R.origin&&B!=null?c=B+V.search+V.hash:k=!0}catch{}let x=_x(c,{relative:i}),S=rD(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:p});function E(R){r&&r(R),R.defaultPrevented||S(R)}return H.createElement("a",Ic({},m,{href:I||x,onClick:k||s?r:E,ref:n,target:l}))});var PE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(PE||(PE={}));var kE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kE||(kE={}));function rD(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=ra(),c=$c(),d=cC(t,{relative:o});return H.useCallback(p=>{if(jx(p,n)){p.preventDefault();let m=r!==void 0?r:$o(c)===$o(d);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}const iD=()=>G.jsx(G.Fragment,{children:G.jsx("div",{className:"outlet-container container-fluid p-0 ",style:{minHeight:"100vh"},children:G.jsx(Lx,{})})}),sD=()=>G.jsx("div",{children:"Error"});var oD={VITE_API_KEY:"AIzaSyAthJdZF_jDW8_WXgRB2hofK6sHg1jIybA",VITE_AUTH_DOMAIN:"chat-application-968a4.firebaseapp.com",VITE_PROJECT_ID:"chat-application-968a4",VITE_STORAGE_BUCKET:"chat-application-968a4.appspot.com",VITE_MESSAGING_SENDER_ID:"776596104603",VITE_APP_ID:"1:776596104603:web:996baf274e94d697376d3e",VITE_MEASUREMENT_ID:"G-10BYDPLK65",BASE_URL:"/chatApplication/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const bE=t=>{let e;const n=new Set,r=(d,p)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const y=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(I=>I(e,y))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(oD?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},aD=t=>t?bE(t):bE;var pC={exports:{}},mC={},gC={exports:{}},_C={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ml=H;function lD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uD=typeof Object.is=="function"?Object.is:lD,cD=ml.useState,hD=ml.useEffect,dD=ml.useLayoutEffect,fD=ml.useDebugValue;function pD(t,e){var n=e(),r=cD({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return dD(function(){i.value=n,i.getSnapshot=e,pm(i)&&s({inst:i})},[t,n,e]),hD(function(){return pm(i)&&s({inst:i}),t(function(){pm(i)&&s({inst:i})})},[t]),fD(n),n}function pm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!uD(t,n)}catch{return!0}}function mD(t,e){return e()}var gD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mD:pD;_C.useSyncExternalStore=ml.useSyncExternalStore!==void 0?ml.useSyncExternalStore:gD;gC.exports=_C;var _D=gC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gf=H,yD=_D;function vD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wD=typeof Object.is=="function"?Object.is:vD,ED=yD.useSyncExternalStore,TD=Gf.useRef,ID=Gf.useEffect,SD=Gf.useMemo,CD=Gf.useDebugValue;mC.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=TD(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=SD(function(){function l(y){if(!c){if(c=!0,d=y,y=r(y),i!==void 0&&o.hasValue){var I=o.value;if(i(I,y))return p=I}return p=y}if(I=p,wD(d,y))return I;var k=r(y);return i!==void 0&&i(I,k)?I:(d=y,p=k)}var c=!1,d,p,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,i]);var a=ED(t,s[0],s[1]);return ID(function(){o.hasValue=!0,o.value=a},[a]),CD(a),a};pC.exports=mC;var AD=pC.exports;const RD=__(AD);var yC={VITE_API_KEY:"AIzaSyAthJdZF_jDW8_WXgRB2hofK6sHg1jIybA",VITE_AUTH_DOMAIN:"chat-application-968a4.firebaseapp.com",VITE_PROJECT_ID:"chat-application-968a4",VITE_STORAGE_BUCKET:"chat-application-968a4.appspot.com",VITE_MESSAGING_SENDER_ID:"776596104603",VITE_APP_ID:"1:776596104603:web:996baf274e94d697376d3e",VITE_MEASUREMENT_ID:"G-10BYDPLK65",BASE_URL:"/chatApplication/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:PD}=T_,{useSyncExternalStoreWithSelector:kD}=RD;let NE=!1;const bD=t=>t;function ND(t,e=bD,n){(yC?"production":void 0)!=="production"&&n&&!NE&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),NE=!0);const r=kD(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return PD(r),r}const xE=t=>{(yC?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?aD(t):t,n=(r,i)=>ND(e,r,i);return Object.assign(n,e),n},xD=t=>t?xE(t):xE;var DE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te=function(t,e){if(!t)throw Fl(e)},Fl=function(t){return new Error("Firebase Database ("+vC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[d],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||p==null)throw new OD;const m=s<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),p!==64){const I=c<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EC=function(t){const e=wC(t);return _y.encodeByteArray(e,!0)},Jd=function(t){return EC(t).replace(/\./g,"")},Zd=function(t){try{return _y.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){return TC(void 0,t)}function TC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!MD(n)||(t[n]=TC(t[n],e[n]));return t}function MD(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=()=>VD().__FIREBASE_DEFAULTS__,UD=()=>{if(typeof process>"u"||typeof DE>"u")return;const t=DE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Zd(t[1]);return e&&JSON.parse(e)},Qf=()=>{try{return FD()||UD()||jD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IC=t=>{var e,n;return(n=(e=Qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},SC=t=>{const e=IC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},CC=()=>{var t;return(t=Qf())===null||t===void 0?void 0:t.config},AC=t=>{var e;return(e=Qf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Jd(JSON.stringify(n)),Jd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function BD(){var t;const e=(t=Qf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $D(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zD(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kC(){return vC.NODE_ADMIN===!0}function WD(){return!BD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HD(){try{return typeof indexedDB=="object"}catch{return!1}}function qD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="FirebaseError";class ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KD,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?GD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ts(i,a,r)}}function GD(t,e){return t.replace(QD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const QD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t){return JSON.parse(t)}function Jt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Sc(Zd(s[0])||""),n=Sc(Zd(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},YD=function(t){const e=bC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},XD=function(t){const e=bC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function kg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ef(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function tf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(OE(s)&&OE(o)){if(!tf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function OE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function xu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let p=0;p<80;p++){p<40?p<20?(c=a^s&(o^a),d=1518500249):(c=s^o^a,d=1859775393):p<60?(c=s&o|a&(s|o),d=2400959708):(c=s^o^a,d=3395469782);const m=(i<<5|i>>>27)+c+l+d+r[p]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function ZD(t,e){const n=new eO(t,e);return n.subscribe.bind(n)}class eO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=mm),i.error===void 0&&(i.error=mm),i.complete===void 0&&(i.complete=mm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mm(){}function nO(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,te(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Yf=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Gs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yy;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oO(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sO(t){return t===To?void 0:t}function oO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const lO={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},uO=ke.INFO,cO={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},hO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=cO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xf{constructor(e){this.name=e,this._logLevel=uO,this._logHandler=hO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const dO=(t,e)=>e.some(n=>t instanceof n);let LE,ME;function fO(){return LE||(LE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pO(){return ME||(ME=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NC=new WeakMap,bg=new WeakMap,xC=new WeakMap,gm=new WeakMap,wy=new WeakMap;function mO(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Bs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&NC.set(n,t)}).catch(()=>{}),wy.set(e,t),e}function gO(t){if(bg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bg.set(t,e)}let Ng={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _O(t){Ng=t(Ng)}function yO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_m(this),e,...n);return xC.set(r,e.sort?e.sort():[e]),Bs(r)}:pO().includes(t)?function(...e){return t.apply(_m(this),e),Bs(NC.get(this))}:function(...e){return Bs(t.apply(_m(this),e))}}function vO(t){return typeof t=="function"?yO(t):(t instanceof IDBTransaction&&gO(t),dO(t,fO())?new Proxy(t,Ng):t)}function Bs(t){if(t instanceof IDBRequest)return mO(t);if(gm.has(t))return gm.get(t);const e=vO(t);return e!==t&&(gm.set(t,e),wy.set(e,t)),e}const _m=t=>wy.get(t);function wO(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Bs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Bs(o.result),l.oldVersion,l.newVersion,Bs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const EO=["get","getKey","getAll","getAllKeys","count"],TO=["put","add","delete","clear"],ym=new Map;function VE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ym.get(e))return ym.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=TO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||EO.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return ym.set(e,s),s}_O(t=>({...t,get:(e,n,r)=>VE(e,n)||t.get(e,n,r),has:(e,n)=>!!VE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function SO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xg="@firebase/app",FE="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=new Xf("@firebase/app"),CO="@firebase/app-compat",AO="@firebase/analytics-compat",RO="@firebase/analytics",PO="@firebase/app-check-compat",kO="@firebase/app-check",bO="@firebase/auth",NO="@firebase/auth-compat",xO="@firebase/database",DO="@firebase/database-compat",OO="@firebase/functions",LO="@firebase/functions-compat",MO="@firebase/installations",VO="@firebase/installations-compat",FO="@firebase/messaging",UO="@firebase/messaging-compat",jO="@firebase/performance",BO="@firebase/performance-compat",$O="@firebase/remote-config",zO="@firebase/remote-config-compat",WO="@firebase/storage",HO="@firebase/storage-compat",qO="@firebase/firestore",KO="@firebase/vertexai-preview",GO="@firebase/firestore-compat",QO="firebase",YO="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="[DEFAULT]",XO={[xg]:"fire-core",[CO]:"fire-core-compat",[RO]:"fire-analytics",[AO]:"fire-analytics-compat",[kO]:"fire-app-check",[PO]:"fire-app-check-compat",[bO]:"fire-auth",[NO]:"fire-auth-compat",[xO]:"fire-rtdb",[DO]:"fire-rtdb-compat",[OO]:"fire-fn",[LO]:"fire-fn-compat",[MO]:"fire-iid",[VO]:"fire-iid-compat",[FO]:"fire-fcm",[UO]:"fire-fcm-compat",[jO]:"fire-perf",[BO]:"fire-perf-compat",[$O]:"fire-rc",[zO]:"fire-rc-compat",[WO]:"fire-gcs",[HO]:"fire-gcs-compat",[qO]:"fire-fst",[GO]:"fire-fst-compat",[KO]:"fire-vertex","fire-js":"fire-js",[QO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=new Map,JO=new Map,Og=new Map;function UE(t,e){try{t.container.addComponent(e)}catch(n){zo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wo(t){const e=t.name;if(Og.has(e))return zo.debug(`There were multiple attempts to register component ${e}.`),!1;Og.set(e,t);for(const n of nf.values())UE(n,t);for(const n of JO.values())UE(n,t);return!0}function Jf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ai(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new zc("app","Firebase",ZO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=YO;function DC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $s.create("bad-app-name",{appName:String(i)});if(n||(n=CC()),!n)throw $s.create("no-options");const s=nf.get(i);if(s){if(tf(n,s.options)&&tf(r,s.config))return s;throw $s.create("duplicate-app",{appName:i})}const o=new aO(i);for(const l of Og.values())o.addComponent(l);const a=new eL(n,r,o);return nf.set(i,a),a}function Ey(t=Dg){const e=nf.get(t);if(!e&&t===Dg&&CC())return DC();if(!e)throw $s.create("no-app",{appName:t});return e}function di(t,e,n){var r;let i=(r=XO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zo.warn(a.join(" "));return}Wo(new Gs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL="firebase-heartbeat-database",nL=1,Cc="firebase-heartbeat-store";let vm=null;function OC(){return vm||(vm=wO(tL,nL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw $s.create("idb-open",{originalErrorMessage:t.message})})),vm}async function rL(t){try{const n=(await OC()).transaction(Cc),r=await n.objectStore(Cc).get(LC(t));return await n.done,r}catch(e){if(e instanceof ts)zo.warn(e.message);else{const n=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zo.warn(n.message)}}}async function jE(t,e){try{const r=(await OC()).transaction(Cc,"readwrite");await r.objectStore(Cc).put(e,LC(t)),await r.done}catch(n){if(n instanceof ts)zo.warn(n.message);else{const r=$s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zo.warn(r.message)}}}function LC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=1024,sL=30*24*60*60*1e3;class oL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=BE();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=sL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=BE(),{heartbeatsToSend:r,unsentEntries:i}=aL(this._heartbeatsCache.heartbeats),s=Jd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function BE(){return new Date().toISOString().substring(0,10)}function aL(t,e=iL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$E(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$E(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class lL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HD()?qD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $E(t){return Jd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){Wo(new Gs("platform-logger",e=>new IO(e),"PRIVATE")),Wo(new Gs("heartbeat",e=>new oL(e),"PRIVATE")),di(xg,FE,t),di(xg,FE,"esm2017"),di("fire-js","")}uL("");function Ty(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function MC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cL=MC,VC=new zc("auth","Firebase",MC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Xf("@firebase/auth");function hL(t,...e){rf.logLevel<=ke.WARN&&rf.warn(`Auth (${ia}): ${t}`,...e)}function gd(t,...e){rf.logLevel<=ke.ERROR&&rf.error(`Auth (${ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,...e){throw Iy(t,...e)}function fi(t,...e){return Iy(t,...e)}function FC(t,e,n){const r=Object.assign(Object.assign({},cL()),{[e]:n});return new zc("auth","Firebase",r).create(e,{appName:t.name})}function Bi(t){return FC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Iy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return VC.create(t,...e)}function _e(t,e,...n){if(!t)throw Iy(e,...n)}function Li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gd(e),new Error(e)}function Gi(t,e){t||Li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dL(){return zE()==="http:"||zE()==="https:"}function zE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dL()||$D()||"connection"in navigator)?navigator.onLine:!0}function pL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gi(n>e,"Short delay should be less than long delay!"),this.isMobile=vy()||PC()}get(){return fL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e){Gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=new Wc(3e4,6e4);function ro(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function rs(t,e,n,r,i={}){return jC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ul(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),UC.fetch()(BC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function jC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},mL),e);try{const i=new yL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Qh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Qh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Qh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw FC(t,d,c);Kr(t,d)}}catch(i){if(i instanceof ts)throw i;Kr(t,"network-request-failed",{message:String(i)})}}async function Hc(t,e,n,r,i={}){const s=await rs(t,e,n,r,i);return"mfaPendingCredential"in s&&Kr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function BC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Sy(t.config,i):`${t.config.apiScheme}://${i}`}function _L(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fi(this.auth,"network-request-failed")),gL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fi(t,e,r);return i.customData._tokenResponse=n,i}function WE(t){return t!==void 0&&t.enterprise!==void 0}class vL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _L(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function wL(t,e){return rs(t,"GET","/v2/recaptchaConfig",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(t,e){return rs(t,"POST","/v1/accounts:delete",e)}async function $C(t,e){return rs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TL(t,e=!1){const n=St(t),r=await n.getIdToken(e),i=Cy(r);_e(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ku(wm(i.auth_time)),issuedAtTime:Ku(wm(i.iat)),expirationTime:Ku(wm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function wm(t){return Number(t)*1e3}function Cy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Zd(n);return i?JSON.parse(i):(gd("Failed to decode base64 JWT payload"),null)}catch(i){return gd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function HE(t){const e=Cy(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ts&&IL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function IL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await _l(t,$C(n,{idToken:r}));_e(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?zC(s.providerUserInfo):[],a=AL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Mg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function CL(t){const e=St(t);await sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zC(t){return t.map(e=>{var{providerId:n}=e,r=Ty(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e){const n=await jC(t,{},async()=>{const r=Ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=BC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",UC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PL(t,e){return rs(t,"POST","/v2/accounts:revokeToken",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=HE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await RL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new el;return r&&(_e(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(_e(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new el,this.toJSON())}_performRefresh(){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ty(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await _l(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TL(this,e)}reload(){return CL(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(Bi(this.auth));const e=await this.getIdToken();return await _l(this,EL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,S=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:R,emailVerified:V,isAnonymous:B,providerData:b,stsTokenManager:C}=n;_e(R&&C,e,"internal-error");const v=el.fromJSON(this.name,C);_e(typeof R=="string",e,"internal-error"),ys(p,e.name),ys(m,e.name),_e(typeof V=="boolean",e,"internal-error"),_e(typeof B=="boolean",e,"internal-error"),ys(y,e.name),ys(I,e.name),ys(k,e.name),ys(x,e.name),ys(S,e.name),ys(E,e.name);const T=new Mi({uid:R,auth:e,email:m,emailVerified:V,displayName:p,isAnonymous:B,photoURL:I,phoneNumber:y,tenantId:k,stsTokenManager:v,createdAt:S,lastLoginAt:E});return b&&Array.isArray(b)&&(T.providerData=b.map(A=>Object.assign({},A))),x&&(T._redirectEventId=x),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new el;i.updateFromServerResponse(n);const s=new Mi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];_e(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?zC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new el;a.updateFromIdToken(r);const l=new Mi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Mg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=new Map;function Vi(t){Gi(t instanceof Function,"Expected a class definition");let e=qE.get(t);return e?(Gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WC.type="NONE";const KE=WC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t,e,n){return`firebase:${t}:${e}:${n}`}class tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=_d(this.userKey,i.apiKey,s),this.fullPersistenceKey=_d("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tl(Vi(KE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Vi(KE);const o=_d(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const p=Mi._fromJSON(e,d);c!==s&&(a=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new tl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new tl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QC(e))return"Blackberry";if(YC(e))return"Webos";if(Ay(e))return"Safari";if((e.includes("chrome/")||qC(e))&&!e.includes("edge/"))return"Chrome";if(GC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HC(t=rn()){return/firefox\//i.test(t)}function Ay(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qC(t=rn()){return/crios\//i.test(t)}function KC(t=rn()){return/iemobile/i.test(t)}function GC(t=rn()){return/android/i.test(t)}function QC(t=rn()){return/blackberry/i.test(t)}function YC(t=rn()){return/webos/i.test(t)}function Zf(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kL(t=rn()){var e;return Zf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bL(){return zD()&&document.documentMode===10}function XC(t=rn()){return Zf(t)||GC(t)||YC(t)||QC(t)||/windows phone/i.test(t)||KC(t)}function NL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e=[]){let n;switch(t){case"Browser":n=GE(rn());break;case"Worker":n=`${GE(rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DL(t,e={}){return rs(t,"GET","/v2/passwordPolicy",ro(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=6;class LL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:OL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QE(this),this.idTokenSubscription=new QE(this),this.beforeStateQueue=new xL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await tl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $C(this,{idToken:e}),r=await Mi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ai(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(Bi(this));const n=e?St(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(Bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(Bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DL(this),n=new LL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vi(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[Vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&hL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function sa(t){return St(t)}class QE{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZD(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VL(t){ep=t}function ZC(t){return ep.loadJS(t)}function FL(){return ep.recaptchaEnterpriseScript}function UL(){return ep.gapiScript}function jL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const BL="recaptcha-enterprise",$L="NO_RECAPTCHA";class zL{constructor(e){this.type=BL,this.auth=sa(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{wL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new vL(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;WE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o($L)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&WE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=FL();l.length!==0&&(l+=a),ZC(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function YE(t,e,n,r=!1){const i=new zL(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Vg(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await YE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await YE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t,e){const n=Jf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(tf(s,e??{}))return i;Kr(i,"already-initialized")}return n.initialize({options:e})}function HL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qL(t,e,n){const r=sa(t);_e(r._canInitEmulator,r,"emulator-config-failed"),_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=eA(e),{host:o,port:a}=KL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||GL()}function eA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KL(t){const e=eA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:XE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:XE(o)}}}function XE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,n){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}async function QL(t,e){return rs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(t,e){return Hc(t,"POST","/v1/accounts:signInWithPassword",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(t,e){return Hc(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}async function JL(t,e){return Hc(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends Ry{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ac(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ac(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vg(e,n,"signInWithPassword",YL);case"emailLink":return XL(e,{email:this._email,oobCode:this._password});default:Kr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vg(e,r,"signUpPassword",QL);case"emailLink":return JL(e,{idToken:n,email:this._email,oobCode:this._password});default:Kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t,e){return Hc(t,"POST","/v1/accounts:signInWithIdp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL="http://localhost";class Ho extends Ry{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ty(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ho(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return nl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nl(e,n)}buildRequest(){const e={requestUri:ZL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ul(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tM(t){const e=Nu(xu(t)).link,n=e?Nu(xu(e)).deep_link_id:null,r=Nu(xu(t)).deep_link_id;return(r?Nu(xu(r)).link:null)||r||n||e||t}class Py{constructor(e){var n,r,i,s,o,a;const l=Nu(xu(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=eM((i=l.mode)!==null&&i!==void 0?i:null);_e(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=tM(e);try{return new Py(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.providerId=jl.PROVIDER_ID}static credential(e,n){return Ac._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Py.parseLink(n);return _e(r,"argument-error"),Ac._fromEmailAndCode(e,r.code,r.tenantId)}}jl.PROVIDER_ID="password";jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends tA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends qc{constructor(){super("facebook.com")}static credential(e){return Ho._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ho._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rs.credential(n,r)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends qc{constructor(){super("github.com")}static credential(e){return Ho._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends qc{constructor(){super("twitter.com")}static credential(e,n){return Ho._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ks.credential(n,r)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t,e){return Hc(t,"POST","/v1/accounts:signUp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Mi._fromIdTokenResponse(e,r,i),o=JE(r);return new qo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=JE(r);return new qo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function JE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends ts{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,of.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new of(e,n,r,i)}}function nA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?of._fromErrorAndOperation(t,s,e,r):s})}async function rM(t,e,n=!1){const r=await _l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t,e,n=!1){const{auth:r}=t;if(ai(r.app))return Promise.reject(Bi(r));const i="reauthenticate";try{const s=await _l(t,nA(r,i,e,t),n);_e(s.idToken,r,"internal-error");const o=Cy(s.idToken);_e(o,r,"internal-error");const{sub:a}=o;return _e(t.uid===a,r,"user-mismatch"),qo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Kr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(t,e,n=!1){if(ai(t.app))return Promise.reject(Bi(t));const r="signIn",i=await nA(t,r,e),s=await qo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function sM(t,e){return rA(sa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t){const e=sa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oM(t,e,n){if(ai(t.app))return Promise.reject(Bi(t));const r=sa(t),o=await Vg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&iA(t),l}),a=await qo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function aM(t,e,n){return ai(t.app)?Promise.reject(Bi(t)):sM(St(t),jl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iA(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e){return rs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=St(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await _l(r,lM(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function uM(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function cM(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function hM(t,e,n,r){return St(t).onAuthStateChanged(e,n,r)}function dM(t){return St(t).signOut()}const af="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(af,"1"),this.storage.removeItem(af),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(){const t=rn();return Ay(t)||Zf(t)}const pM=1e3,mM=10;class oA extends sA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=fM()&&NL(),this.fallbackToPolling=XC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},pM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oA.type="LOCAL";const gM=oA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA extends sA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aA.type="SESSION";const lA=aA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new tp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await _M(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=ky("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function vM(t){pi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function wM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TM(){return uA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firebaseLocalStorageDb",IM=1,lf="firebaseLocalStorage",hA="fbase_key";class Kc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function np(t,e){return t.transaction([lf],e?"readwrite":"readonly").objectStore(lf)}function SM(){const t=indexedDB.deleteDatabase(cA);return new Kc(t).toPromise()}function Fg(){const t=indexedDB.open(cA,IM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lf,{keyPath:hA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(lf)?e(r):(r.close(),await SM(),e(await Fg()))})})}async function e0(t,e,n){const r=np(t,!0).put({[hA]:e,value:n});return new Kc(r).toPromise()}async function CM(t,e){const n=np(t,!1).get(e),r=await new Kc(n).toPromise();return r===void 0?null:r.value}function t0(t,e){const n=np(t,!0).delete(e);return new Kc(n).toPromise()}const AM=800,RM=3;class dA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>RM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tp._getInstance(TM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wM(),!this.activeServiceWorker)return;this.sender=new yM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fg();return await e0(e,af,"1"),await t0(e,af),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>e0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>CM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>t0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=np(i,!1).getAll();return new Kc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dA.type="LOCAL";const PM=dA;new Wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t,e){return e?Vi(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by extends Ry{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bM(t){return rA(t.auth,new by(t),t.bypassAuthState)}function NM(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),iM(n,new by(t),t.bypassAuthState)}async function xM(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),rM(n,new by(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bM;case"linkViaPopup":case"linkViaRedirect":return xM;case"reauthViaPopup":case"reauthViaRedirect":return NM;default:Kr(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new Wc(2e3,1e4);class Wa extends fA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wa.currentPopupAction&&Wa.currentPopupAction.cancel(),Wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DM.get())};e()}}Wa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="pendingRedirect",yd=new Map;class LM extends fA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yd.get(this.auth._key());if(!e){try{const r=await MM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yd.set(this.auth._key(),e)}return this.bypassAuthState||yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MM(t,e){const n=UM(e),r=FM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function VM(t,e){yd.set(t._key(),e)}function FM(t){return Vi(t._redirectPersistence)}function UM(t){return _d(OM,t.config.apiKey,t.name)}async function jM(t,e,n=!1){if(ai(t.app))return Promise.reject(Bi(t));const r=sa(t),i=kM(r,e),o=await new LM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=10*60*1e3;class $M{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BM&&this.cachedEventUids.clear(),this.cachedEventUids.has(n0(e))}saveEventToCache(e){this.cachedEventUids.add(n0(e)),this.lastProcessedEventTime=Date.now()}}function n0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(t,e={}){return rs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qM=/^https?/;async function KM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WM(t);for(const n of e)try{if(GM(n))return}catch{}Kr(t,"unauthorized-domain")}function GM(t){const e=Lg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!qM.test(n))return!1;if(HM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new Wc(3e4,6e4);function r0(){const t=pi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function YM(t){return new Promise((e,n)=>{var r,i,s;function o(){r0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{r0(),n(fi(t,"network-request-failed"))},timeout:QM.get()})}if(!((i=(r=pi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=pi().gapi)===null||s===void 0)&&s.load)o();else{const a=jL("iframefcb");return pi()[a]=()=>{gapi.load?o():n(fi(t,"network-request-failed"))},ZC(`${UL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw vd=null,e})}let vd=null;function XM(t){return vd=vd||YM(t),vd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=new Wc(5e3,15e3),ZM="__/auth/iframe",eV="emulator/auth/iframe",tV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rV(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sy(e,eV):`https://${t.config.authDomain}/${ZM}`,r={apiKey:e.apiKey,appName:t.name,v:ia},i=nV.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ul(r).slice(1)}`}async function iV(t){const e=await XM(t),n=pi().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:rV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tV,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=fi(t,"network-request-failed"),a=pi().setTimeout(()=>{s(o)},JM.get());function l(){pi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oV=500,aV=600,lV="_blank",uV="http://localhost";class i0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cV(t,e,n,r=oV,i=aV){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},sV),{width:r.toString(),height:i.toString(),top:s,left:o}),c=rn().toLowerCase();n&&(a=qC(c)?lV:n),HC(c)&&(e=e||uV,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,I])=>`${m}${y}=${I},`,"");if(kL(c)&&a!=="_self")return hV(e||"",a),new i0(null);const p=window.open(e||"",a,d);_e(p,t,"popup-blocked");try{p.focus()}catch{}return new i0(p)}function hV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="__/auth/handler",fV="emulator/auth/handler",pV=encodeURIComponent("fac");async function s0(t,e,n,r,i,s){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ia,eventId:i};if(e instanceof tA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries(s||{}))o[d]=p}if(e instanceof qc){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${pV}=${encodeURIComponent(l)}`:"";return`${mV(t)}?${Ul(a).slice(1)}${c}`}function mV({config:t}){return t.emulator?Sy(t,fV):`https://${t.authDomain}/${dV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="webStorageSupport";class gV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lA,this._completeRedirectFn=jM,this._overrideRedirectResult=VM}async _openPopup(e,n,r,i){var s;Gi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await s0(e,n,r,Lg(),i);return cV(e,o,ky())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await s0(e,n,r,Lg(),i);return vM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iV(e),r=new $M(e);return n.register("authEvent",i=>(_e(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Em,{type:Em},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Em];o!==void 0&&n(!!o),Kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XC()||Ay()||Zf()}}const _V=gV;var o0="@firebase/auth",a0="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wV(t){Wo(new Gs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JC(t)},c=new ML(r,i,s,l);return HL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wo(new Gs("auth-internal",e=>{const n=sa(e.getProvider("auth").getImmediate());return(r=>new yV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),di(o0,a0,vV(t)),di(o0,a0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=5*60,TV=AC("authIdTokenMaxAge")||EV;let l0=null;const IV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TV)return;const i=n==null?void 0:n.token;l0!==i&&(l0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function SV(t=Ey()){const e=Jf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=WL(t,{popupRedirectResolver:_V,persistence:[PM,gM,lA]}),r=AC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=IV(s.toString());cM(n,o,()=>o(n.currentUser)),uM(n,a=>o(a))}}const i=IC("auth");return i&&qL(n,`http://${i}`),n}function CV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}VL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=fi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",CV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wV("Browser");var AV="firebase",RV="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(AV,RV,"app");var u0={};const c0="@firebase/database",h0="1.0.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mA="";function PV(t){mA=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Jt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Sc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ns(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kV(e)}}catch{}return new bV},bo=gA("localStorage"),Ug=gA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new Xf("@firebase/database"),NV=function(){let t=1;return function(){return t++}}(),_A=function(t){const e=rO(t),n=new JD;n.update(e);const r=n.digest();return _y.encodeByteArray(r)},Gc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Gc.apply(null,r):typeof r=="object"?e+=Jt(r):e+=r,e+=" "}return e};let Oo=null,d0=!0;const xV=function(t,e){te(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(rl.logLevel=ke.VERBOSE,Oo=rl.log.bind(rl),e&&Ug.set("logging_enabled",!0)):typeof t=="function"?Oo=t:(Oo=null,Ug.remove("logging_enabled"))},hn=function(...t){if(d0===!0&&(d0=!1,Oo===null&&Ug.get("logging_enabled")===!0&&xV(!0)),Oo){const e=Gc.apply(null,t);Oo(e)}},Qc=function(t){return function(...e){hn(t,...e)}},jg=function(...t){const e="FIREBASE INTERNAL ERROR: "+Gc(...t);rl.error(e)},Qi=function(...t){const e=`FIREBASE FATAL ERROR: ${Gc(...t)}`;throw rl.error(e),new Error(e)},tr=function(...t){const e="FIREBASE WARNING: "+Gc(...t);rl.warn(e)},DV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},yA=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},OV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},yl="[MIN_NAME]",Ko="[MAX_NAME]",Bl=function(t,e){if(t===e)return 0;if(t===yl||e===Ko)return-1;if(e===yl||t===Ko)return 1;{const n=f0(t),r=f0(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},LV=function(t,e){return t===e?0:t<e?-1:1},Eu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Jt(e))},Ny=function(t){if(typeof t!="object"||t===null)return Jt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Jt(e[r]),n+=":",n+=Ny(t[e[r]]);return n+="}",n},vA=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Sr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const wA=function(t){te(!yA(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const d=c.join("");let p="";for(l=0;l<64;l+=8){let m=parseInt(d.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},MV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},VV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},FV=new RegExp("^-?(0*)\\d{1,10}$"),UV=-2147483648,jV=2147483647,f0=function(t){if(FV.test(t)){const e=Number(t);if(e>=UV&&e<=jV)return e}return null},Yc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw tr("Exception was thrown by user callback.",n),e},Math.floor(0))}},BV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Gu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){tr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(hn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tr(e)}}class il{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}il.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="5",EA="v",TA="s",IA="r",SA="f",CA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,AA="ls",RA="p",Bg="ac",PA="websocket",kA="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function WV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function NA(t,e,n){te(typeof e=="string","typeof type must == string"),te(typeof n=="object","typeof params must == object");let r;if(e===PA)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===kA)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);WV(t)&&(n.ns=t.namespace);const i=[];return Sr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.counters_={}}incrementCounter(e,n=1){ns(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return LD(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm={},Im={};function Dy(t){const e=t.toString();return Tm[e]||(Tm[e]=new HV),Tm[e]}function qV(t,e){const n=t.toString();return Im[n]||(Im[n]=e()),Im[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="start",GV="close",QV="pLPCommand",YV="pRTLPCB",xA="id",DA="pw",OA="ser",XV="cb",JV="seg",ZV="ts",e2="d",t2="dframe",LA=1870,MA=30,n2=LA-MA,r2=25e3,i2=3e4;class Ha{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qc(e),this.stats_=Dy(n),this.urlFn=l=>(this.appCheckToken&&(l[Bg]=this.appCheckToken),NA(n,kA,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new KV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(i2)),OV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Oy((...s)=>{const[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===p0)this.id=a,this.password=l;else if(o===GV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[p0]="t",r[OA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[XV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[EA]=xy,this.transportSessionId&&(r[TA]=this.transportSessionId),this.lastSessionId&&(r[AA]=this.lastSessionId),this.applicationId&&(r[RA]=this.applicationId),this.appCheckToken&&(r[Bg]=this.appCheckToken),typeof location<"u"&&location.hostname&&CA.test(location.hostname)&&(r[IA]=SA);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ha.forceAllow_=!0}static forceDisallow(){Ha.forceDisallow_=!0}static isAvailable(){return Ha.forceAllow_?!0:!Ha.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!MV()&&!VV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Jt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=EC(n),i=vA(r,n2);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[t2]="t",r[xA]=e,r[DA]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Jt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Oy{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=NV(),window[QV+this.uniqueCallbackIdentifier]=e,window[YV+this.uniqueCallbackIdentifier]=n,this.myIFrame=Oy.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){hn("frame writing exception"),a.stack&&hn(a.stack),hn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||hn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[xA]=this.myID,e[DA]=this.myPW,e[OA]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+MA+r.length<=LA;){const o=this.pendingSegs.shift();r=r+"&"+JV+i+"="+o.seg+"&"+ZV+i+"="+o.ts+"&"+e2+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(r2)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{hn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=16384,o2=45e3;let uf=null;typeof MozWebSocket<"u"?uf=MozWebSocket:typeof WebSocket<"u"&&(uf=WebSocket);class Br{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qc(this.connId),this.stats_=Dy(n),this.connURL=Br.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[EA]=xy,typeof location<"u"&&location.hostname&&CA.test(location.hostname)&&(o[IA]=SA),n&&(o[TA]=n),r&&(o[AA]=r),i&&(o[Bg]=i),s&&(o[RA]=s),NA(e,PA,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bo.set("previous_websocket_failure",!0);try{let r;kC(),this.mySock=new uf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Br.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&uf!==null&&!Br.forceDisallow_}static previouslyFailed(){return bo.isInMemoryStorage||bo.get("previous_websocket_failure")===!0}markConnectionHealthy(){bo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Sc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(te(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Jt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=vA(n,s2);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(o2))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Br.responsesRequiredToBeHealthy=2;Br.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ha,Br]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Br&&Br.isAvailable();let r=n&&!Br.previouslyFailed();if(e.webSocketOnly&&(n||tr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Br];else{const i=this.transports_=[];for(const s of Rc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Rc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Rc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=6e4,l2=5e3,u2=10*1024,c2=100*1024,Sm="t",m0="d",h2="s",g0="r",d2="e",_0="o",y0="a",v0="n",w0="p",f2="h";class p2{constructor(e,n,r,i,s,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qc("c:"+this.id+":"),this.transportManager_=new Rc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Gu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>c2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>u2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Sm in e){const n=e[Sm];n===y0?this.upgradeIfSecondaryHealthy_():n===g0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Eu("t",e),r=Eu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:w0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:y0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:v0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Eu("t",e),r=Eu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Eu(Sm,e);if(m0 in e){const r=e[m0];if(n===f2){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===v0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===h2?this.onConnectionShutdown_(r):n===g0?this.onReset_(r):n===d2?jg("Server Error: "+r):n===_0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jg("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),xy!==r&&tr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Gu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(a2))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(l2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:w0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.allowedEvents_=e,this.listeners_={},te(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){te(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends FA{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!vy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cf}getInitialEvent(e){return te(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=32,T0=768;class pt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Xe(){return new pt("")}function Ve(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qs(t){return t.pieces_.length-t.pieceNum_}function ht(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new pt(t.pieces_,e)}function UA(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function m2(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function jA(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function BA(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new pt(e,0)}function qt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof pt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new pt(n,0)}function Oe(t){return t.pieceNum_>=t.pieces_.length}function vr(t,e){const n=Ve(t),r=Ve(e);if(n===null)return e;if(n===r)return vr(ht(t),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function $A(t,e){if(Qs(t)!==Qs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function $r(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Qs(t)>Qs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class g2{constructor(e,n){this.errorPrefix_=n,this.parts_=jA(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Yf(this.parts_[r]);zA(this)}}function _2(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Yf(e),zA(t)}function y2(t){const e=t.parts_.pop();t.byteLength_-=Yf(e),t.parts_.length>0&&(t.byteLength_-=1)}function zA(t){if(t.byteLength_>T0)throw new Error(t.errorPrefix_+"has a key path longer than "+T0+" bytes ("+t.byteLength_+").");if(t.parts_.length>E0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+E0+") or object contains a cycle "+Io(t))}function Io(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly extends FA{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ly}getInitialEvent(e){return te(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=1e3,v2=60*5*1e3,I0=30*1e3,w2=1.3,E2=3e4,T2="server_kill",S0=3;class $i extends VA{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=$i.nextPersistentConnectionId_++,this.log_=Qc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Tu,this.maxReconnectDelay_=v2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!kC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ly.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Jt(s)),te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new yy,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),te(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;$i.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ns(e,"w")){const r=gl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();tr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||XD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=I0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=YD(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Jt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):jg("Unrecognized action received from server: "+Jt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>E2&&(this.reconnectDelay_=Tu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*w2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+$i.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(p){te(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(p)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,m]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?hn("getToken() completed but was canceled"):(hn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,a=new p2(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{tr(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(T2)},s))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&tr(p),l())}}}interrupt(e){hn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){hn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kg(this.interruptReasons_)&&(this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Ny(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new pt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){hn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=S0&&(this.reconnectDelay_=I0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){hn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=S0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+mA.replace(/\./g,"-")]=1,vy()?e["framework.cordova"]=1:PC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cf.getInstance().currentlyOnline();return kg(this.interruptReasons_)&&e}}$i.nextPersistentConnectionId_=0;$i.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Fe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Fe(yl,e),i=new Fe(yl,n);return this.compare(r,i)!==0}minPost(){return Fe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh;class WA extends rp{static get __EMPTY_NODE(){return Yh}static set __EMPTY_NODE(e){Yh=e}compare(e,n){return Bl(e.name,n.name)}isDefinedOn(e){throw Fl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Fe.MIN}maxPost(){return new Fe(Ko,Yh)}makePost(e,n){return te(typeof e=="string","KeyIndex indexValue must always be a string."),new Fe(e,Yh)}toString(){return".key"}}const sl=new WA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Yn=class Du{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Du.RED,this.left=i??li.EMPTY_NODE,this.right=s??li.EMPTY_NODE}copy(e,n,r,i,s){return new Du(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return li.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return li.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Du.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Du.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Yn.RED=!0;Yn.BLACK=!1;class I2{copy(e,n,r,i,s){return this}insert(e,n,r){return new Yn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let li=class wd{constructor(e,n=wd.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new wd(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Yn.BLACK,null,null))}remove(e){return new wd(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Yn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Xh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Xh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Xh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Xh(this.root_,null,this.comparator_,!0,e)}};li.EMPTY_NODE=new I2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e){return Bl(t.name,e.name)}function My(t,e){return Bl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g;function C2(t){$g=t}const HA=function(t){return typeof t=="number"?"number:"+wA(t):"string:"+t},qA=function(t){if(t.isLeafNode()){const e=t.val();te(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ns(e,".sv"),"Priority must be a string or number.")}else te(t===$g||t.isEmpty(),"priority of unexpected type.");te(t===$g||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C0;class zt{constructor(e,n=zt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,te(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),qA(this.priorityNode_)}static set __childrenNodeConstructor(e){C0=e}static get __childrenNodeConstructor(){return C0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new zt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Oe(e)?this:Ve(e)===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:zt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ve(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(te(r!==".priority"||Qs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,zt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+HA(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=wA(this.value_):e+=this.value_,this.lazyHash_=_A(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===zt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof zt.__childrenNodeConstructor?-1:(te(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=zt.VALUE_TYPE_ORDER.indexOf(n),s=zt.VALUE_TYPE_ORDER.indexOf(r);return te(i>=0,"Unknown leaf type: "+n),te(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}zt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KA,GA;function A2(t){KA=t}function R2(t){GA=t}class P2 extends rp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Bl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Fe.MIN}maxPost(){return new Fe(Ko,new zt("[PRIORITY-POST]",GA))}makePost(e,n){const r=KA(e);return new Fe(n,new zt("[PRIORITY-POST]",r))}toString(){return".priority"}}const pn=new P2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=Math.log(2);class b2{constructor(e){const n=s=>parseInt(Math.log(s)/k2,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hf=function(t,e,n,r){t.sort(e);const i=function(l,c){const d=c-l;let p,m;if(d===0)return null;if(d===1)return p=t[l],m=n?n(p):p,new Yn(m,p.node,Yn.BLACK,null,null);{const y=parseInt(d/2,10)+l,I=i(l,y),k=i(y+1,c);return p=t[y],m=n?n(p):p,new Yn(m,p.node,Yn.BLACK,I,k)}},s=function(l){let c=null,d=null,p=t.length;const m=function(I,k){const x=p-I,S=p;p-=I;const E=i(x+1,S),R=t[x],V=n?n(R):R;y(new Yn(V,R.node,k,null,E))},y=function(I){c?(c.left=I,c=I):(d=I,c=I)};for(let I=0;I<l.count;++I){const k=l.nextBitIsOne(),x=Math.pow(2,l.count-(I+1));k?m(x,Yn.BLACK):(m(x,Yn.BLACK),m(x,Yn.RED))}return d},o=new b2(t.length),a=s(o);return new li(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm;const Aa={};class Fi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return te(Aa&&pn,"ChildrenNode.ts has not been loaded"),Cm=Cm||new Fi({".priority":Aa},{".priority":pn}),Cm}get(e){const n=gl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof li?n:null}hasIndex(e){return ns(this.indexSet_,e.toString())}addIndex(e,n){te(e!==sl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Fe.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=hf(r,e.getCompare()):a=Aa;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new Fi(d,c)}addToIndexes(e,n){const r=ef(this.indexes_,(i,s)=>{const o=gl(this.indexSet_,s);if(te(o,"Missing index implementation for "+s),i===Aa)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Fe.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),hf(a,o.getCompare())}else return Aa;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Fe(e.name,a))),l.insert(e,e.node)}});return new Fi(r,this.indexSet_)}removeFromIndexes(e,n){const r=ef(this.indexes_,i=>{if(i===Aa)return i;{const s=n.get(e.name);return s?i.remove(new Fe(e.name,s)):i}});return new Fi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu;class qe{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&qA(this.priorityNode_),this.children_.isEmpty()&&te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Iu||(Iu=new qe(new li(My),null,Fi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Iu}updatePriority(e){return this.children_.isEmpty()?this:new qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Iu:n}}getChild(e){const n=Ve(e);return n===null?this:this.getImmediateChild(n).getChild(ht(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(te(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Fe(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Iu:this.priorityNode_;return new qe(i,o,s)}}updateChild(e,n){const r=Ve(e);if(r===null)return n;{te(Ve(e)!==".priority"||Qs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ht(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(pn,(o,a)=>{n[o]=a.val(e),r++,s&&qe.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+HA(this.getPriority().val())+":"),this.forEachChild(pn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":_A(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Fe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Fe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Fe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Fe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Fe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xc?-1:0}withIndex(e){if(e===sl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new qe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===sl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(pn),i=n.getIterator(pn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===sl?null:this.indexMap_.get(e.toString())}}qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class N2 extends qe{constructor(){super(new li(My),qe.EMPTY_NODE,Fi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qe.EMPTY_NODE}isEmpty(){return!1}}const Xc=new N2;Object.defineProperties(Fe,{MIN:{value:new Fe(yl,qe.EMPTY_NODE)},MAX:{value:new Fe(Ko,Xc)}});WA.__EMPTY_NODE=qe.EMPTY_NODE;zt.__childrenNodeConstructor=qe;C2(Xc);R2(Xc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=!0;function dn(t,e=null){if(t===null)return qe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),te(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new zt(n,dn(e))}if(!(t instanceof Array)&&x2){const n=[];let r=!1;if(Sr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=dn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Fe(o,l)))}}),n.length===0)return qe.EMPTY_NODE;const s=hf(n,S2,o=>o.name,My);if(r){const o=hf(n,pn.getCompare());return new qe(s,dn(e),new Fi({".priority":o},{".priority":pn}))}else return new qe(s,dn(e),Fi.Default)}else{let n=qe.EMPTY_NODE;return Sr(t,(r,i)=>{if(ns(t,r)&&r.substring(0,1)!=="."){const s=dn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(dn(e))}}A2(dn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2 extends rp{constructor(e){super(),this.indexPath_=e,te(!Oe(e)&&Ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Bl(e.name,n.name):s}makePost(e,n){const r=dn(e),i=qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Fe(n,i)}maxPost(){const e=qe.EMPTY_NODE.updateChild(this.indexPath_,Xc);return new Fe(Ko,e)}toString(){return jA(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2 extends rp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Bl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Fe.MIN}maxPost(){return Fe.MAX}makePost(e,n){const r=dn(e);return new Fe(n,r)}toString(){return".value"}}const L2=new O2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){return{type:"value",snapshotNode:t}}function V2(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function F2(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function A0(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function U2(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yl}hasEnd(){return this.endSet_}getIndexEndValue(){return te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ko}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pn}copy(){const e=new Vy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function R0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===pn?n="$priority":t.index_===L2?n="$value":t.index_===sl?n="$key":(te(t.index_ instanceof D2,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Jt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Jt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Jt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Jt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Jt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function P0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==pn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends VA{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Qc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(te(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=df.getListenId_(e,r),a={};this.listens_[o]=a;const l=R0(e._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let p=d;if(c===404&&(p=null,c=null),c===null&&this.onDataUpdate_(s,p,!1,r),gl(this.listens_,o)===a){let m;c?c===401?m="permission_denied":m="rest_error:"+c:m="ok",i(m,null)}})}unlisten(e,n){const r=df.getListenId_(e,n);delete this.listens_[r]}get(e){const n=R0(e._queryParams),r=e._path.toString(),i=new yy;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ul(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Sc(a.responseText)}catch{tr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&tr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.rootNode_=qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(){return{value:null,children:new Map}}function QA(t,e,n){if(Oe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ve(e);t.children.has(r)||t.children.set(r,ff());const i=t.children.get(r);e=ht(e),QA(i,e,n)}}function zg(t,e,n){t.value!==null?n(e,t.value):B2(t,(r,i)=>{const s=new pt(e.toString()+"/"+r);zg(i,s,n)})}function B2(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Sr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=10*1e3,z2=30*1e3,W2=5*60*1e3;class H2{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $2(e);const r=k0+(z2-k0)*Math.random();Gu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Sr(e,(i,s)=>{s>0&&ns(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Gu(this.reportStats_.bind(this),Math.floor(Math.random()*2*W2))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ui||(ui={}));function YA(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function XA(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function JA(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ui.ACK_USER_WRITE,this.source=YA()}operationForChild(e){if(Oe(this.path)){if(this.affectedTree.value!=null)return te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new pt(e));return new pf(Xe(),n,this.revert)}}else return te(Ve(this.path)===e,"operationForChild called for unrelated child."),new pf(ht(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ui.OVERWRITE}operationForChild(e){return Oe(this.path)?new Go(this.source,Xe(),this.snap.getImmediateChild(e)):new Go(this.source,ht(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ui.MERGE}operationForChild(e){if(Oe(this.path)){const n=this.children.subtree(new pt(e));return n.isEmpty()?null:n.value?new Go(this.source,Xe(),n.value):new Pc(this.source,Xe(),n)}else return te(Ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pc(this.source,ht(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Oe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ve(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function q2(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(U2(o.childName,o.snapshotNode))}),Su(t,i,"child_removed",e,r,n),Su(t,i,"child_added",e,r,n),Su(t,i,"child_moved",s,r,n),Su(t,i,"child_changed",e,r,n),Su(t,i,"value",e,r,n),i}function Su(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>G2(t,a,l)),o.forEach(a=>{const l=K2(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function K2(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function G2(t,e,n){if(e.childName==null||n.childName==null)throw Fl("Should only compare child_ events.");const r=new Fe(e.childName,e.snapshotNode),i=new Fe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e){return{eventCache:t,serverCache:e}}function Qu(t,e,n,r){return ZA(new Fy(e,n,r),t.serverCache)}function eR(t,e,n,r){return ZA(t.eventCache,new Fy(e,n,r))}function Wg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am;const Q2=()=>(Am||(Am=new li(LV)),Am);class ct{constructor(e,n=Q2()){this.value=e,this.children=n}static fromObject(e){let n=new ct(null);return Sr(e,(r,i)=>{n=n.set(new pt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Xe(),value:this.value};if(Oe(e))return null;{const r=Ve(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ht(e),n);return s!=null?{path:qt(new pt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Oe(e))return this;{const n=Ve(e),r=this.children.get(n);return r!==null?r.subtree(ht(e)):new ct(null)}}set(e,n){if(Oe(e))return new ct(n,this.children);{const r=Ve(e),s=(this.children.get(r)||new ct(null)).set(ht(e),n),o=this.children.insert(r,s);return new ct(this.value,o)}}remove(e){if(Oe(e))return this.children.isEmpty()?new ct(null):new ct(null,this.children);{const n=Ve(e),r=this.children.get(n);if(r){const i=r.remove(ht(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ct(null):new ct(this.value,s)}else return this}}get(e){if(Oe(e))return this.value;{const n=Ve(e),r=this.children.get(n);return r?r.get(ht(e)):null}}setTree(e,n){if(Oe(e))return n;{const r=Ve(e),s=(this.children.get(r)||new ct(null)).setTree(ht(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ct(this.value,o)}}fold(e){return this.fold_(Xe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(qt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Xe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Oe(e))return null;{const s=Ve(e),o=this.children.get(s);return o?o.findOnPath_(ht(e),qt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Xe(),n)}foreachOnPath_(e,n,r){if(Oe(e))return this;{this.value&&r(n,this.value);const i=Ve(e),s=this.children.get(i);return s?s.foreachOnPath_(ht(e),qt(n,i),r):new ct(null)}}foreach(e){this.foreach_(Xe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(qt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.writeTree_=e}static empty(){return new Hr(new ct(null))}}function Yu(t,e,n){if(Oe(e))return new Hr(new ct(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=vr(i,e);return s=s.updateChild(o,n),new Hr(t.writeTree_.set(i,s))}else{const i=new ct(n),s=t.writeTree_.setTree(e,i);return new Hr(s)}}}function b0(t,e,n){let r=t;return Sr(n,(i,s)=>{r=Yu(r,qt(e,i),s)}),r}function N0(t,e){if(Oe(e))return Hr.empty();{const n=t.writeTree_.setTree(e,new ct(null));return new Hr(n)}}function Hg(t,e){return oa(t,e)!=null}function oa(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(vr(n.path,e)):null}function x0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(pn,(r,i)=>{e.push(new Fe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Fe(r,i.value))}),e}function zs(t,e){if(Oe(e))return t;{const n=oa(t,e);return n!=null?new Hr(new ct(n)):new Hr(t.writeTree_.subtree(e))}}function qg(t){return t.writeTree_.isEmpty()}function vl(t,e){return tR(Xe(),t.writeTree_,e)}function tR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(te(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=tR(qt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(qt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t,e){return aR(e,t)}function Y2(t,e,n,r,i){te(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Yu(t.visibleWrites,e,n)),t.lastWriteId=r}function X2(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function J2(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);te(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Z2(a,r.path)?i=!1:$r(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return eF(t),!0;if(r.snap)t.visibleWrites=N0(t.visibleWrites,r.path);else{const a=r.children;Sr(a,l=>{t.visibleWrites=N0(t.visibleWrites,qt(r.path,l))})}return!0}else return!1}function Z2(t,e){if(t.snap)return $r(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&$r(qt(t.path,n),e))return!0;return!1}function eF(t){t.visibleWrites=rR(t.allWrites,tF,Xe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function tF(t){return t.visible}function rR(t,e,n){let r=Hr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)$r(n,o)?(a=vr(n,o),r=Yu(r,a,s.snap)):$r(o,n)&&(a=vr(o,n),r=Yu(r,Xe(),s.snap.getChild(a)));else if(s.children){if($r(n,o))a=vr(n,o),r=b0(r,a,s.children);else if($r(o,n))if(a=vr(o,n),Oe(a))r=b0(r,Xe(),s.children);else{const l=gl(s.children,Ve(a));if(l){const c=l.getChild(ht(a));r=Yu(r,Xe(),c)}}}else throw Fl("WriteRecord should have .snap or .children")}}return r}function iR(t,e,n,r,i){if(!r&&!i){const s=oa(t.visibleWrites,e);if(s!=null)return s;{const o=zs(t.visibleWrites,e);if(qg(o))return n;if(n==null&&!Hg(o,Xe()))return null;{const a=n||qe.EMPTY_NODE;return vl(o,a)}}}else{const s=zs(t.visibleWrites,e);if(!i&&qg(s))return n;if(!i&&n==null&&!Hg(s,Xe()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&($r(c.path,e)||$r(e,c.path))},a=rR(t.allWrites,o,e),l=n||qe.EMPTY_NODE;return vl(a,l)}}}function nF(t,e,n){let r=qe.EMPTY_NODE;const i=oa(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=zs(t.visibleWrites,e);return n.forEachChild(pn,(o,a)=>{const l=vl(zs(s,new pt(o)),a);r=r.updateImmediateChild(o,l)}),x0(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=zs(t.visibleWrites,e);return x0(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function rF(t,e,n,r,i){te(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=qt(e,n);if(Hg(t.visibleWrites,s))return null;{const o=zs(t.visibleWrites,s);return qg(o)?i.getChild(n):vl(o,i.getChild(n))}}function iF(t,e,n,r){const i=qt(e,n),s=oa(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=zs(t.visibleWrites,i);return vl(o,r.getNode().getImmediateChild(n))}else return null}function sF(t,e){return oa(t.visibleWrites,e)}function oF(t,e,n,r,i,s,o){let a;const l=zs(t.visibleWrites,e),c=oa(l,Xe());if(c!=null)a=c;else if(n!=null)a=vl(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],p=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&d.length<i;)p(y,r)!==0&&d.push(y),y=m.getNext();return d}else return[]}function aF(){return{visibleWrites:Hr.empty(),allWrites:[],lastWriteId:-1}}function Kg(t,e,n,r){return iR(t.writeTree,t.treePath,e,n,r)}function sR(t,e){return nF(t.writeTree,t.treePath,e)}function D0(t,e,n,r){return rF(t.writeTree,t.treePath,e,n,r)}function mf(t,e){return sF(t.writeTree,qt(t.treePath,e))}function lF(t,e,n,r,i,s){return oF(t.writeTree,t.treePath,e,n,r,i,s)}function Uy(t,e,n){return iF(t.writeTree,t.treePath,e,n)}function oR(t,e){return aR(qt(t.treePath,e),t.writeTree)}function aR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;te(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),te(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,A0(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,F2(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,V2(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,A0(r,e.snapshotNode,i.oldSnap));else throw Fl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const lR=new cF;class jy{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Fy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Uy(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qo(this.viewCache_),s=lF(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function hF(t,e){te(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),te(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function dF(t,e,n,r,i){const s=new uF;let o,a;if(n.type===ui.OVERWRITE){const c=n;c.source.fromUser?o=Gg(t,e,c.path,c.snap,r,i,s):(te(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Oe(c.path),o=gf(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===ui.MERGE){const c=n;c.source.fromUser?o=pF(t,e,c.path,c.children,r,i,s):(te(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Qg(t,e,c.path,c.children,r,i,a,s))}else if(n.type===ui.ACK_USER_WRITE){const c=n;c.revert?o=_F(t,e,c.path,r,i,s):o=mF(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===ui.LISTEN_COMPLETE)o=gF(t,e,n.path,r,s);else throw Fl("Unknown operation type: "+n.type);const l=s.getChanges();return fF(e,o,l),{viewCache:o,changes:l}}function fF(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Wg(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(M2(Wg(e)))}}function uR(t,e,n,r,i,s){const o=e.eventCache;if(mf(r,n)!=null)return e;{let a,l;if(Oe(n))if(te(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Qo(e),d=c instanceof qe?c:qe.EMPTY_NODE,p=sR(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const c=Kg(r,Qo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ve(n);if(c===".priority"){te(Qs(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const p=D0(r,n,d,l);p!=null?a=t.filter.updatePriority(d,p):a=o.getNode()}else{const d=ht(n);let p;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=D0(r,n,o.getNode(),l);m!=null?p=o.getNode().getImmediateChild(c).updateChild(d,m):p=o.getNode().getImmediateChild(c)}else p=Uy(r,c,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),c,p,d,i,s):a=o.getNode()}}return Qu(e,a,o.isFullyInitialized()||Oe(n),t.filter.filtersNodes())}}function gf(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(Oe(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),y,null)}else{const y=Ve(n);if(!l.isCompleteForPath(n)&&Qs(n)>1)return e;const I=ht(n),x=l.getNode().getImmediateChild(y).updateChild(I,r);y===".priority"?c=d.updatePriority(l.getNode(),x):c=d.updateChild(l.getNode(),y,x,I,lR,null)}const p=eR(e,c,l.isFullyInitialized()||Oe(n),d.filtersNodes()),m=new jy(i,p,s);return uR(t,p,n,i,m,a)}function Gg(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const d=new jy(i,e,s);if(Oe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Qu(e,c,!0,t.filter.filtersNodes());else{const p=Ve(n);if(p===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Qu(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=ht(n),y=a.getNode().getImmediateChild(p);let I;if(Oe(m))I=r;else{const k=d.getCompleteChild(p);k!=null?UA(m)===".priority"&&k.getChild(BA(m)).isEmpty()?I=k:I=k.updateChild(m,r):I=qe.EMPTY_NODE}if(y.equals(I))l=e;else{const k=t.filter.updateChild(a.getNode(),p,I,m,d,o);l=Qu(e,k,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function O0(t,e){return t.eventCache.isCompleteForChild(e)}function pF(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const d=qt(n,l);O0(e,Ve(d))&&(a=Gg(t,a,d,c,i,s,o))}),r.foreach((l,c)=>{const d=qt(n,l);O0(e,Ve(d))||(a=Gg(t,a,d,c,i,s,o))}),a}function L0(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Qg(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Oe(n)?c=r:c=new ct(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((p,m)=>{if(d.hasChild(p)){const y=e.serverCache.getNode().getImmediateChild(p),I=L0(t,y,m);l=gf(t,l,new pt(p),I,i,s,o,a)}}),c.children.inorderTraversal((p,m)=>{const y=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!d.hasChild(p)&&!y){const I=e.serverCache.getNode().getImmediateChild(p),k=L0(t,I,m);l=gf(t,l,new pt(p),k,i,s,o,a)}}),l}function mF(t,e,n,r,i,s,o){if(mf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Oe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return gf(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Oe(n)){let c=new ct(null);return l.getNode().forEachChild(sl,(d,p)=>{c=c.set(new pt(d),p)}),Qg(t,e,n,c,i,s,a,o)}else return e}else{let c=new ct(null);return r.foreach((d,p)=>{const m=qt(n,d);l.isCompleteForPath(m)&&(c=c.set(d,l.getNode().getChild(m)))}),Qg(t,e,n,c,i,s,a,o)}}function gF(t,e,n,r,i){const s=e.serverCache,o=eR(e,s.getNode(),s.isFullyInitialized()||Oe(n),s.isFiltered());return uR(t,o,n,r,lR,i)}function _F(t,e,n,r,i,s){let o;if(mf(r,n)!=null)return e;{const a=new jy(r,e,i),l=e.eventCache.getNode();let c;if(Oe(n)||Ve(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Kg(r,Qo(e));else{const p=e.serverCache.getNode();te(p instanceof qe,"serverChildren would be complete if leaf node"),d=sR(r,p)}d=d,c=t.filter.updateFullNode(l,d,s)}else{const d=Ve(n);let p=Uy(r,d,e.serverCache);p==null&&e.serverCache.isCompleteForChild(d)&&(p=l.getImmediateChild(d)),p!=null?c=t.filter.updateChild(l,d,p,ht(n),a,s):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,qe.EMPTY_NODE,ht(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Kg(r,Qo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||mf(r,Xe())!=null,Qu(e,c,o,t.filter.filtersNodes())}}function yF(t,e){const n=Qo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Oe(e)&&!n.getImmediateChild(Ve(e)).isEmpty())?n.getChild(e):null}function M0(t,e,n,r){e.type===ui.MERGE&&e.source.queryId!==null&&(te(Qo(t.viewCache_),"We should always have a full cache before handling merges"),te(Wg(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=dF(t.processor_,i,e,n,r);return hF(t.processor_,s.viewCache),te(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,vF(t,s.changes,s.viewCache.eventCache.getNode(),null)}function vF(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return q2(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V0;function wF(t){te(!V0,"__referenceConstructor has already been defined"),V0=t}function By(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return te(s!=null,"SyncTree gave us an op for an invalid query."),M0(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(M0(o,e,n,r));return s}}function $y(t,e){let n=null;for(const r of t.views.values())n=n||yF(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F0;function EF(t){te(!F0,"__referenceConstructor has already been defined"),F0=t}class U0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ct(null),this.pendingWriteTree_=aF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TF(t,e,n,r,i){return Y2(t.pendingWriteTree_,e,n,r,i),i?sp(t,new Go(YA(),e,n)):[]}function qa(t,e,n=!1){const r=X2(t.pendingWriteTree_,e);if(J2(t.pendingWriteTree_,e)){let s=new ct(null);return r.snap!=null?s=s.set(Xe(),!0):Sr(r.children,o=>{s=s.set(new pt(o),!0)}),sp(t,new pf(r.path,s,n))}else return[]}function ip(t,e,n){return sp(t,new Go(XA(),e,n))}function IF(t,e,n){const r=ct.fromObject(n);return sp(t,new Pc(XA(),e,r))}function SF(t,e,n,r){const i=fR(t,r);if(i!=null){const s=pR(i),o=s.path,a=s.queryId,l=vr(o,e),c=new Go(JA(a),l,n);return mR(t,o,c)}else return[]}function CF(t,e,n,r){const i=fR(t,r);if(i){const s=pR(i),o=s.path,a=s.queryId,l=vr(o,e),c=ct.fromObject(n),d=new Pc(JA(a),l,c);return mR(t,o,d)}else return[]}function cR(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=vr(o,e),c=$y(a,l);if(c)return c});return iR(i,e,s,n,!0)}function sp(t,e){return hR(e,t.syncPointTree_,null,nR(t.pendingWriteTree_,Xe()))}function hR(t,e,n,r){if(Oe(t.path))return dR(t,e,n,r);{const i=e.get(Xe());n==null&&i!=null&&(n=$y(i,Xe()));let s=[];const o=Ve(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=oR(r,o);s=s.concat(hR(a,l,c,d))}return i&&(s=s.concat(By(i,t,r,n))),s}}function dR(t,e,n,r){const i=e.get(Xe());n==null&&i!=null&&(n=$y(i,Xe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=oR(r,o),d=t.operationForChild(o);d&&(s=s.concat(dR(d,a,l,c)))}),i&&(s=s.concat(By(i,t,r,n))),s}function fR(t,e){return t.tagToQueryMap.get(e)}function pR(t){const e=t.indexOf("$");return te(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new pt(t.substr(0,e))}}function mR(t,e,n){const r=t.syncPointTree_.get(e);te(r,"Missing sync point for query tag that we're tracking");const i=nR(t.pendingWriteTree_,e);return By(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new zy(n)}node(){return this.node_}}class Wy{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=qt(this.path_,e);return new Wy(this.syncTree_,n)}node(){return cR(this.syncTree_,this.path_)}}const AF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},j0=function(t,e,n){if(!t||typeof t!="object")return t;if(te(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return RF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return PF(t[".sv"],e);te(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},RF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:te(!1,"Unexpected server value: "+t)}},PF=function(t,e,n){t.hasOwnProperty("increment")||te(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&te(!1,"Unexpected increment value: "+r);const i=e.node();if(te(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},kF=function(t,e,n,r){return Hy(e,new Wy(n,t),r)},bF=function(t,e,n){return Hy(t,new zy(e),n)};function Hy(t,e,n){const r=t.getPriority().val(),i=j0(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=j0(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new zt(a,dn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new zt(i))),o.forEachChild(pn,(a,l)=>{const c=Hy(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Ky(t,e){let n=e instanceof pt?e:new pt(e),r=t,i=Ve(n);for(;i!==null;){const s=gl(r.node.children,i)||{children:{},childCount:0};r=new qy(i,r,s),n=ht(n),i=Ve(n)}return r}function $l(t){return t.node.value}function gR(t,e){t.node.value=e,Yg(t)}function _R(t){return t.node.childCount>0}function NF(t){return $l(t)===void 0&&!_R(t)}function op(t,e){Sr(t.node.children,(n,r)=>{e(new qy(n,t,r))})}function yR(t,e,n,r){n&&!r&&e(t),op(t,i=>{yR(i,e,!0,r)}),n&&r&&e(t)}function xF(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Jc(t){return new pt(t.parent===null?t.name:Jc(t.parent)+"/"+t.name)}function Yg(t){t.parent!==null&&DF(t.parent,t.name,t)}function DF(t,e,n){const r=NF(n),i=ns(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Yg(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Yg(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=/[\[\].#$\/\u0000-\u001F\u007F]/,LF=/[\[\].#$\u0000-\u001F\u007F]/,Rm=10*1024*1024,vR=function(t){return typeof t=="string"&&t.length!==0&&!OF.test(t)},MF=function(t){return typeof t=="string"&&t.length!==0&&!LF.test(t)},VF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),MF(t)},wR=function(t,e,n){const r=n instanceof pt?new g2(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Io(r));if(typeof e=="function")throw new Error(t+"contains a function "+Io(r)+" with contents = "+e.toString());if(yA(e))throw new Error(t+"contains "+e.toString()+" "+Io(r));if(typeof e=="string"&&e.length>Rm/3&&Yf(e)>Rm)throw new Error(t+"contains a string greater than "+Rm+" utf8 bytes "+Io(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Sr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!vR(o)))throw new Error(t+" contains an invalid key ("+o+") "+Io(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_2(r,o),wR(t,a,r),y2(r)}),i&&s)throw new Error(t+' contains ".value" child '+Io(r)+" in addition to actual children.")}},FF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!vR(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!VF(n))throw new Error(nO(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jF(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!$A(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function aa(t,e,n){jF(t,n),BF(t,r=>$r(r,e)||$r(e,r))}function BF(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?($F(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function $F(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Oo&&hn("event: "+n.toString()),Yc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF="repo_interrupt",WF=25;class HF{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new UF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ff(),this.transactionQueueTree_=new qy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qF(t,e,n){if(t.stats_=Dy(t.repoInfo_),t.forceRestClient_||BV())t.server_=new df(t.repoInfo_,(r,i,s,o)=>{B0(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>$0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new $i(t.repoInfo_,e,(r,i,s,o)=>{B0(t,r,i,s,o)},r=>{$0(t,r)},r=>{GF(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=qV(t.repoInfo_,()=>new H2(t.stats_,t.server_)),t.infoData_=new j2,t.infoSyncTree_=new U0({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=ip(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Gy(t,"connected",!1),t.serverSyncTree_=new U0({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);aa(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function KF(t){const n=t.infoData_.getNode(new pt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ER(t){return AF({timestamp:KF(t)})}function B0(t,e,n,r,i){t.dataUpdateCount++;const s=new pt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=ef(n,c=>dn(c));o=CF(t.serverSyncTree_,s,l,i)}else{const l=dn(n);o=SF(t.serverSyncTree_,s,l,i)}else if(r){const l=ef(n,c=>dn(c));o=IF(t.serverSyncTree_,s,l)}else{const l=dn(n);o=ip(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Yy(t,s)),aa(t.eventQueue_,a,o)}function $0(t,e){Gy(t,"connected",e),e===!1&&YF(t)}function GF(t,e){Sr(e,(n,r)=>{Gy(t,n,r)})}function Gy(t,e,n){const r=new pt("/.info/"+e),i=dn(n);t.infoData_.updateSnapshot(r,i);const s=ip(t.infoSyncTree_,r,i);aa(t.eventQueue_,r,s)}function QF(t){return t.nextWriteId_++}function YF(t){TR(t,"onDisconnectEvents");const e=ER(t),n=ff();zg(t.onDisconnect_,Xe(),(i,s)=>{const o=kF(i,s,t.serverSyncTree_,e);QA(n,i,o)});let r=[];zg(n,Xe(),(i,s)=>{r=r.concat(ip(t.serverSyncTree_,i,s));const o=eU(t,i);Yy(t,o)}),t.onDisconnect_=ff(),aa(t.eventQueue_,Xe(),r)}function XF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(zF)}function TR(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),hn(n,...e)}function IR(t,e,n){return cR(t.serverSyncTree_,e,n)||qe.EMPTY_NODE}function Qy(t,e=t.transactionQueueTree_){if(e||ap(t,e),$l(e)){const n=CR(t,e);te(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&JF(t,Jc(e),n)}else _R(e)&&op(e,n=>{Qy(t,n)})}function JF(t,e,n){const r=n.map(c=>c.currentWriteId),i=IR(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const d=n[c];te(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const p=vr(e,d.path);s=s.updateChild(p,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{TR(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const p=[];for(let m=0;m<n.length;m++)n[m].status=2,d=d.concat(qa(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();ap(t,Ky(t.transactionQueueTree_,e)),Qy(t,t.transactionQueueTree_),aa(t.eventQueue_,e,d);for(let m=0;m<p.length;m++)Yc(p[m])}else{if(c==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{tr("transaction at "+l.toString()+" failed: "+c);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=c}Yy(t,e)}},o)}function Yy(t,e){const n=SR(t,e),r=Jc(n),i=CR(t,n);return ZF(t,i,r),r}function ZF(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=vr(n,l.path);let d=!1,p;if(te(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,p=l.abortReason,i=i.concat(qa(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=WF)d=!0,p="maxretry",i=i.concat(qa(t.serverSyncTree_,l.currentWriteId,!0));else{const m=IR(t,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(y!==void 0){wR("transaction failed: Data returned ",y,l.path);let I=dn(y);typeof y=="object"&&y!=null&&ns(y,".priority")||(I=I.updatePriority(m.getPriority()));const x=l.currentWriteId,S=ER(t),E=bF(I,m,S);l.currentOutputSnapshotRaw=I,l.currentOutputSnapshotResolved=E,l.currentWriteId=QF(t),o.splice(o.indexOf(x),1),i=i.concat(TF(t.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),i=i.concat(qa(t.serverSyncTree_,x,!0))}else d=!0,p="nodata",i=i.concat(qa(t.serverSyncTree_,l.currentWriteId,!0))}aa(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}ap(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Yc(r[a]);Qy(t,t.transactionQueueTree_)}function SR(t,e){let n,r=t.transactionQueueTree_;for(n=Ve(e);n!==null&&$l(r)===void 0;)r=Ky(r,n),e=ht(e),n=Ve(e);return r}function CR(t,e){const n=[];return AR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function AR(t,e,n){const r=$l(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);op(e,i=>{AR(t,i,n)})}function ap(t,e){const n=$l(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,gR(e,n.length>0?n:void 0)}op(e,r=>{ap(t,r)})}function eU(t,e){const n=Jc(SR(t,e)),r=Ky(t.transactionQueueTree_,e);return xF(r,i=>{Pm(t,i)}),Pm(t,r),yR(r,i=>{Pm(t,i)}),n}function Pm(t,e){const n=$l(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(te(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(te(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(qa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?gR(e,void 0):n.length=s+1,aa(t.eventQueue_,Jc(e),i);for(let o=0;o<r.length;o++)Yc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function nU(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tr(`Invalid query segment '${n}' in query '${t}'`)}return e}const z0=function(t,e){const n=rU(t),r=n.namespace;n.domain==="firebase.com"&&Qi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||DV();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new bA(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new pt(n.pathString)}},rU=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(d,p)),d<p&&(i=tU(t.substring(d,p)));const m=nU(t.substring(Math.min(t.length,p)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const I=e.indexOf(".");r=e.substring(0,I).toLowerCase(),n=e.substring(I+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Oe(this._path)?null:UA(this._path)}get ref(){return new zl(this._repo,this._path)}get _queryIdentifier(){const e=P0(this._queryParams),n=Ny(e);return n==="{}"?"default":n}get _queryObject(){return P0(this._queryParams)}isEqual(e){if(e=St(e),!(e instanceof Xy))return!1;const n=this._repo===e._repo,r=$A(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+m2(this._path)}}class zl extends Xy{constructor(e,n){super(e,n,new Vy,!1)}get parent(){const e=BA(this._path);return e===null?null:new zl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}wF(zl);EF(zl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="FIREBASE_DATABASE_EMULATOR_HOST",Xg={};let sU=!1;function oU(t,e,n,r){t.repoInfo_=new bA(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function aU(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Qi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=z0(s,i),a=o.repoInfo,l,c;typeof process<"u"&&u0&&(c=u0[iU]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=z0(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const d=i&&l?new il(il.OWNER):new zV(t.name,t.options,e);FF("Invalid Firebase Database URL",o),Oe(o.path)||Qi("Database URL must point to the root of a Firebase Database (not including a child path).");const p=uU(a,t,d,new $V(t.name,n));return new cU(p,t)}function lU(t,e){const n=Xg[e];(!n||n[t.key]!==t)&&Qi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),XF(t),delete n[t.key]}function uU(t,e,n,r){let i=Xg[e.name];i||(i={},Xg[e.name]=i);let s=i[t.toURLString()];return s&&Qi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new HF(t,sU,n,r),i[t.toURLString()]=s,s}class cU{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zl(this._repo,Xe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(lU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qi("Cannot call "+e+" on a deleted database.")}}function hU(t=Ey(),e){const n=Jf(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=SC("database");r&&dU(n,...r)}return n}function dU(t,e,n,r={}){t=St(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Qi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new il(il.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:RC(r.mockUserToken,t.app.options.projectId);s=new il(o)}oU(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t){PV(ia),Wo(new Gs("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return aU(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),di(c0,h0,t),di(c0,h0,"esm2017")}$i.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};$i.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};fU();var W0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lo,RR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,v){function T(){}T.prototype=v.prototype,C.D=v.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(A,N,M){for(var P=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)P[ye-2]=arguments[ye];return v.prototype[N].apply(A,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,T){T||(T=0);var A=Array(16);if(typeof v=="string")for(var N=0;16>N;++N)A[N]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(N=0;16>N;++N)A[N]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=C.g[0],T=C.g[1],N=C.g[2];var M=C.g[3],P=v+(M^T&(N^M))+A[0]+3614090360&4294967295;v=T+(P<<7&4294967295|P>>>25),P=M+(N^v&(T^N))+A[1]+3905402710&4294967295,M=v+(P<<12&4294967295|P>>>20),P=N+(T^M&(v^T))+A[2]+606105819&4294967295,N=M+(P<<17&4294967295|P>>>15),P=T+(v^N&(M^v))+A[3]+3250441966&4294967295,T=N+(P<<22&4294967295|P>>>10),P=v+(M^T&(N^M))+A[4]+4118548399&4294967295,v=T+(P<<7&4294967295|P>>>25),P=M+(N^v&(T^N))+A[5]+1200080426&4294967295,M=v+(P<<12&4294967295|P>>>20),P=N+(T^M&(v^T))+A[6]+2821735955&4294967295,N=M+(P<<17&4294967295|P>>>15),P=T+(v^N&(M^v))+A[7]+4249261313&4294967295,T=N+(P<<22&4294967295|P>>>10),P=v+(M^T&(N^M))+A[8]+1770035416&4294967295,v=T+(P<<7&4294967295|P>>>25),P=M+(N^v&(T^N))+A[9]+2336552879&4294967295,M=v+(P<<12&4294967295|P>>>20),P=N+(T^M&(v^T))+A[10]+4294925233&4294967295,N=M+(P<<17&4294967295|P>>>15),P=T+(v^N&(M^v))+A[11]+2304563134&4294967295,T=N+(P<<22&4294967295|P>>>10),P=v+(M^T&(N^M))+A[12]+1804603682&4294967295,v=T+(P<<7&4294967295|P>>>25),P=M+(N^v&(T^N))+A[13]+4254626195&4294967295,M=v+(P<<12&4294967295|P>>>20),P=N+(T^M&(v^T))+A[14]+2792965006&4294967295,N=M+(P<<17&4294967295|P>>>15),P=T+(v^N&(M^v))+A[15]+1236535329&4294967295,T=N+(P<<22&4294967295|P>>>10),P=v+(N^M&(T^N))+A[1]+4129170786&4294967295,v=T+(P<<5&4294967295|P>>>27),P=M+(T^N&(v^T))+A[6]+3225465664&4294967295,M=v+(P<<9&4294967295|P>>>23),P=N+(v^T&(M^v))+A[11]+643717713&4294967295,N=M+(P<<14&4294967295|P>>>18),P=T+(M^v&(N^M))+A[0]+3921069994&4294967295,T=N+(P<<20&4294967295|P>>>12),P=v+(N^M&(T^N))+A[5]+3593408605&4294967295,v=T+(P<<5&4294967295|P>>>27),P=M+(T^N&(v^T))+A[10]+38016083&4294967295,M=v+(P<<9&4294967295|P>>>23),P=N+(v^T&(M^v))+A[15]+3634488961&4294967295,N=M+(P<<14&4294967295|P>>>18),P=T+(M^v&(N^M))+A[4]+3889429448&4294967295,T=N+(P<<20&4294967295|P>>>12),P=v+(N^M&(T^N))+A[9]+568446438&4294967295,v=T+(P<<5&4294967295|P>>>27),P=M+(T^N&(v^T))+A[14]+3275163606&4294967295,M=v+(P<<9&4294967295|P>>>23),P=N+(v^T&(M^v))+A[3]+4107603335&4294967295,N=M+(P<<14&4294967295|P>>>18),P=T+(M^v&(N^M))+A[8]+1163531501&4294967295,T=N+(P<<20&4294967295|P>>>12),P=v+(N^M&(T^N))+A[13]+2850285829&4294967295,v=T+(P<<5&4294967295|P>>>27),P=M+(T^N&(v^T))+A[2]+4243563512&4294967295,M=v+(P<<9&4294967295|P>>>23),P=N+(v^T&(M^v))+A[7]+1735328473&4294967295,N=M+(P<<14&4294967295|P>>>18),P=T+(M^v&(N^M))+A[12]+2368359562&4294967295,T=N+(P<<20&4294967295|P>>>12),P=v+(T^N^M)+A[5]+4294588738&4294967295,v=T+(P<<4&4294967295|P>>>28),P=M+(v^T^N)+A[8]+2272392833&4294967295,M=v+(P<<11&4294967295|P>>>21),P=N+(M^v^T)+A[11]+1839030562&4294967295,N=M+(P<<16&4294967295|P>>>16),P=T+(N^M^v)+A[14]+4259657740&4294967295,T=N+(P<<23&4294967295|P>>>9),P=v+(T^N^M)+A[1]+2763975236&4294967295,v=T+(P<<4&4294967295|P>>>28),P=M+(v^T^N)+A[4]+1272893353&4294967295,M=v+(P<<11&4294967295|P>>>21),P=N+(M^v^T)+A[7]+4139469664&4294967295,N=M+(P<<16&4294967295|P>>>16),P=T+(N^M^v)+A[10]+3200236656&4294967295,T=N+(P<<23&4294967295|P>>>9),P=v+(T^N^M)+A[13]+681279174&4294967295,v=T+(P<<4&4294967295|P>>>28),P=M+(v^T^N)+A[0]+3936430074&4294967295,M=v+(P<<11&4294967295|P>>>21),P=N+(M^v^T)+A[3]+3572445317&4294967295,N=M+(P<<16&4294967295|P>>>16),P=T+(N^M^v)+A[6]+76029189&4294967295,T=N+(P<<23&4294967295|P>>>9),P=v+(T^N^M)+A[9]+3654602809&4294967295,v=T+(P<<4&4294967295|P>>>28),P=M+(v^T^N)+A[12]+3873151461&4294967295,M=v+(P<<11&4294967295|P>>>21),P=N+(M^v^T)+A[15]+530742520&4294967295,N=M+(P<<16&4294967295|P>>>16),P=T+(N^M^v)+A[2]+3299628645&4294967295,T=N+(P<<23&4294967295|P>>>9),P=v+(N^(T|~M))+A[0]+4096336452&4294967295,v=T+(P<<6&4294967295|P>>>26),P=M+(T^(v|~N))+A[7]+1126891415&4294967295,M=v+(P<<10&4294967295|P>>>22),P=N+(v^(M|~T))+A[14]+2878612391&4294967295,N=M+(P<<15&4294967295|P>>>17),P=T+(M^(N|~v))+A[5]+4237533241&4294967295,T=N+(P<<21&4294967295|P>>>11),P=v+(N^(T|~M))+A[12]+1700485571&4294967295,v=T+(P<<6&4294967295|P>>>26),P=M+(T^(v|~N))+A[3]+2399980690&4294967295,M=v+(P<<10&4294967295|P>>>22),P=N+(v^(M|~T))+A[10]+4293915773&4294967295,N=M+(P<<15&4294967295|P>>>17),P=T+(M^(N|~v))+A[1]+2240044497&4294967295,T=N+(P<<21&4294967295|P>>>11),P=v+(N^(T|~M))+A[8]+1873313359&4294967295,v=T+(P<<6&4294967295|P>>>26),P=M+(T^(v|~N))+A[15]+4264355552&4294967295,M=v+(P<<10&4294967295|P>>>22),P=N+(v^(M|~T))+A[6]+2734768916&4294967295,N=M+(P<<15&4294967295|P>>>17),P=T+(M^(N|~v))+A[13]+1309151649&4294967295,T=N+(P<<21&4294967295|P>>>11),P=v+(N^(T|~M))+A[4]+4149444226&4294967295,v=T+(P<<6&4294967295|P>>>26),P=M+(T^(v|~N))+A[11]+3174756917&4294967295,M=v+(P<<10&4294967295|P>>>22),P=N+(v^(M|~T))+A[2]+718787259&4294967295,N=M+(P<<15&4294967295|P>>>17),P=T+(M^(N|~v))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var T=v-this.blockSize,A=this.B,N=this.h,M=0;M<v;){if(N==0)for(;M<=T;)i(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<v;)if(A[N++]=C.charCodeAt(M++),N==this.blockSize){i(this,A),N=0;break}}else for(;M<v;)if(A[N++]=C[M++],N==this.blockSize){i(this,A),N=0;break}}this.h=N,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var T=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=T&255,T/=256;for(this.u(C),C=Array(16),v=T=0;4>v;++v)for(var A=0;32>A;A+=8)C[T++]=this.g[v]>>>A&255;return C};function s(C,v){var T=a;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=v(C)}function o(C,v){this.h=v;for(var T=[],A=!0,N=C.length-1;0<=N;N--){var M=C[N]|0;A&&M==v||(T[N]=M,A=!1)}this.g=T}var a={};function l(C){return-128<=C&&128>C?s(C,function(v){return new o([v|0],0>v?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return x(c(-C));for(var v=[],T=1,A=0;C>=T;A++)v[A]=C/T|0,T*=4294967296;return new o(v,0)}function d(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return x(d(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(v,8)),A=p,N=0;N<C.length;N+=8){var M=Math.min(8,C.length-N),P=parseInt(C.substring(N,N+M),v);8>M?(M=c(Math.pow(v,M)),A=A.j(M).add(c(P))):(A=A.j(T),A=A.add(c(P)))}return A}var p=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-x(this).m();for(var C=0,v=1,T=0;T<this.g.length;T++){var A=this.i(T);C+=(0<=A?A:4294967296+A)*v,v*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I(this))return"0";if(k(this))return"-"+x(this).toString(C);for(var v=c(Math.pow(C,6)),T=this,A="";;){var N=V(T,v).g;T=S(T,N.j(v));var M=((0<T.g.length?T.g[0]:T.h)>>>0).toString(C);if(T=N,I(T))return M+A;for(;6>M.length;)M="0"+M;A=M+A}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function I(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function k(C){return C.h==-1}t.l=function(C){return C=S(this,C),k(C)?-1:I(C)?0:1};function x(C){for(var v=C.g.length,T=[],A=0;A<v;A++)T[A]=~C.g[A];return new o(T,~C.h).add(m)}t.abs=function(){return k(this)?x(this):this},t.add=function(C){for(var v=Math.max(this.g.length,C.g.length),T=[],A=0,N=0;N<=v;N++){var M=A+(this.i(N)&65535)+(C.i(N)&65535),P=(M>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);A=P>>>16,M&=65535,P&=65535,T[N]=P<<16|M}return new o(T,T[T.length-1]&-2147483648?-1:0)};function S(C,v){return C.add(x(v))}t.j=function(C){if(I(this)||I(C))return p;if(k(this))return k(C)?x(this).j(x(C)):x(x(this).j(C));if(k(C))return x(this.j(x(C)));if(0>this.l(y)&&0>C.l(y))return c(this.m()*C.m());for(var v=this.g.length+C.g.length,T=[],A=0;A<2*v;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(var N=0;N<C.g.length;N++){var M=this.i(A)>>>16,P=this.i(A)&65535,ye=C.i(N)>>>16,Je=C.i(N)&65535;T[2*A+2*N]+=P*Je,E(T,2*A+2*N),T[2*A+2*N+1]+=M*Je,E(T,2*A+2*N+1),T[2*A+2*N+1]+=P*ye,E(T,2*A+2*N+1),T[2*A+2*N+2]+=M*ye,E(T,2*A+2*N+2)}for(A=0;A<v;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=v;A<2*v;A++)T[A]=0;return new o(T,0)};function E(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function R(C,v){this.g=C,this.h=v}function V(C,v){if(I(v))throw Error("division by zero");if(I(C))return new R(p,p);if(k(C))return v=V(x(C),v),new R(x(v.g),x(v.h));if(k(v))return v=V(C,x(v)),new R(x(v.g),v.h);if(30<C.g.length){if(k(C)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var T=m,A=v;0>=A.l(C);)T=B(T),A=B(A);var N=b(T,1),M=b(A,1);for(A=b(A,2),T=b(T,2);!I(A);){var P=M.add(A);0>=P.l(C)&&(N=N.add(T),M=P),A=b(A,1),T=b(T,1)}return v=S(C,N.j(v)),new R(N,v)}for(N=p;0<=C.l(v);){for(T=Math.max(1,Math.floor(C.m()/v.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),M=c(T),P=M.j(v);k(P)||0<P.l(C);)T-=A,M=c(T),P=M.j(v);I(M)&&(M=m),N=N.add(M),C=S(C,P)}return new R(N,C)}t.A=function(C){return V(this,C).h},t.and=function(C){for(var v=Math.max(this.g.length,C.g.length),T=[],A=0;A<v;A++)T[A]=this.i(A)&C.i(A);return new o(T,this.h&C.h)},t.or=function(C){for(var v=Math.max(this.g.length,C.g.length),T=[],A=0;A<v;A++)T[A]=this.i(A)|C.i(A);return new o(T,this.h|C.h)},t.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),T=[],A=0;A<v;A++)T[A]=this.i(A)^C.i(A);return new o(T,this.h^C.h)};function B(C){for(var v=C.g.length+1,T=[],A=0;A<v;A++)T[A]=C.i(A)<<1|C.i(A-1)>>>31;return new o(T,C.h)}function b(C,v){var T=v>>5;v%=32;for(var A=C.g.length-T,N=[],M=0;M<A;M++)N[M]=0<v?C.i(M+T)>>>v|C.i(M+T+1)<<32-v:C.i(M+T);return new o(N,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Lo=o}).apply(typeof W0<"u"?W0:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PR,kR,Ou,bR,Ed,Jg,NR,xR,DR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var U=u[w];if(!(U in g))break e;g=g[U]}u=u[u.length-1],w=g[u],f=f(w),f!=w&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,w=!1,U={next:function(){if(!w&&g<u.length){var $=g++;return{value:f($,u[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,g){return u.call.apply(u.bind,arguments)}function p(u,f,g){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,w),u.apply(f,U)}}return function(){return u.apply(f,arguments)}}function m(u,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function y(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function I(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(w,U,$){for(var X=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)X[$e-2]=arguments[$e];return f.prototype[U].apply(w,X)}}function k(u){const f=u.length;if(0<f){const g=Array(f);for(let w=0;w<f;w++)g[w]=u[w];return g}return[]}function x(u,f){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(l(w)){const U=u.length||0,$=w.length||0;u.length=U+$;for(let X=0;X<$;X++)u[U+X]=w[X]}else u.push(w)}}class S{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function E(u){return/^[\s\xa0]*$/.test(u)}function R(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function V(u){return V[" "](u),u}V[" "]=function(){};var B=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function b(u,f,g){for(const w in u)f.call(g,u[w],w,u)}function C(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function v(u){const f={};for(const g in u)f[g]=u[g];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let g,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(g in w)u[g]=w[g];for(let $=0;$<T.length;$++)g=T[$],Object.prototype.hasOwnProperty.call(w,g)&&(u[g]=w[g])}}function N(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function M(u){a.setTimeout(()=>{throw u},0)}function P(){var u=le;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ye{constructor(){this.h=this.g=null}add(f,g){const w=Je.get();w.set(f,g),this.h?this.h.next=w:this.g=w,this.h=w}}var Je=new S(()=>new Ze,u=>u.reset());class Ze{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let we,Z=!1,le=new ye,de=()=>{const u=a.Promise.resolve(void 0);we=()=>{u.then(Re)}};var Re=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(g){M(g)}var f=Je;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Z=!1};function Ie(){this.s=this.s,this.C=this.C}Ie.prototype.s=!1,Ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function Ke(u,f){if(z.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(B){e:{try{V(f.nodeName);var U=!0;break e}catch{}U=!1}U||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ke.aa.h.call(this)}}I(Ke,z);var et={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),Dt=0;function Ot(u,f,g,w,U){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!w,this.ha=U,this.key=++Dt,this.da=this.fa=!1}function lr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function oe(u){this.src=u,this.g={},this.h=0}oe.prototype.add=function(u,f,g,w,U){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var X=sn(u,f,w,U);return-1<X?(f=u[X],g||(f.fa=!1)):(f=new Ot(f,this.src,$,!!w,U),f.fa=g,u.push(f)),f};function rt(u,f){var g=f.type;if(g in u.g){var w=u.g[g],U=Array.prototype.indexOf.call(w,f,void 0),$;($=0<=U)&&Array.prototype.splice.call(w,U,1),$&&(lr(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function sn(u,f,g,w){for(var U=0;U<u.length;++U){var $=u[U];if(!$.da&&$.listener==f&&$.capture==!!g&&$.ha==w)return U}return-1}var Qr="closure_lm_"+(1e6*Math.random()|0),Ti={};function Lt(u,f,g,w,U){if(w&&w.once)return kn(u,f,g,w,U);if(Array.isArray(f)){for(var $=0;$<f.length;$++)Lt(u,f[$],g,w,U);return null}return g=Ar(g),u&&u[tt]?u.K(f,g,c(w)?!!w.capture:!!w,U):Yr(u,f,g,!1,w,U)}function Yr(u,f,g,w,U,$){if(!f)throw Error("Invalid event type");var X=c(U)?!!U.capture:!!U,$e=_n(u);if($e||(u[Qr]=$e=new oe(u)),g=$e.add(f,g,w,X,$),g.proxy)return g;if(w=Cr(),g.proxy=w,w.src=u,w.listener=g,u.addEventListener)We||(U=X),U===void 0&&(U=!1),u.addEventListener(f.toString(),w,U);else if(u.attachEvent)u.attachEvent(Ii(f.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Cr(){function u(g){return f.call(u.src,u.listener,g)}const f=ss;return u}function kn(u,f,g,w,U){if(Array.isArray(f)){for(var $=0;$<f.length;$++)kn(u,f[$],g,w,U);return null}return g=Ar(g),u&&u[tt]?u.L(f,g,c(w)?!!w.capture:!!w,U):Yr(u,f,g,!0,w,U)}function bn(u,f,g,w,U){if(Array.isArray(f))for(var $=0;$<f.length;$++)bn(u,f[$],g,w,U);else w=c(w)?!!w.capture:!!w,g=Ar(g),u&&u[tt]?(u=u.i,f=String(f).toString(),f in u.g&&($=u.g[f],g=sn($,g,w,U),-1<g&&(lr($[g]),Array.prototype.splice.call($,g,1),$.length==0&&(delete u.g[f],u.h--)))):u&&(u=_n(u))&&(f=u.g[f.toString()],u=-1,f&&(u=sn(f,g,w,U)),(g=-1<u?f[u]:null)&&ur(g))}function ur(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[tt])rt(f.i,u);else{var g=u.type,w=u.proxy;f.removeEventListener?f.removeEventListener(g,w,u.capture):f.detachEvent?f.detachEvent(Ii(g),w):f.addListener&&f.removeListener&&f.removeListener(w),(g=_n(f))?(rt(g,u),g.h==0&&(g.src=null,f[Qr]=null)):lr(u)}}}function Ii(u){return u in Ti?Ti[u]:Ti[u]="on"+u}function ss(u,f){if(u.da)u=!0;else{f=new Ke(f,this);var g=u.listener,w=u.ha||u.src;u.fa&&ur(u),u=g.call(w,f)}return u}function _n(u){return u=u[Qr],u instanceof oe?u:null}var Nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ar(u){return typeof u=="function"?u:(u[Nn]||(u[Nn]=function(f){return u.handleEvent(f)}),u[Nn])}function Ye(){Ie.call(this),this.i=new oe(this),this.M=this,this.F=null}I(Ye,Ie),Ye.prototype[tt]=!0,Ye.prototype.removeEventListener=function(u,f,g,w){bn(this,u,f,g,w)};function Pe(u,f){var g,w=u.F;if(w)for(g=[];w;w=w.F)g.push(w);if(u=u.M,w=f.type||f,typeof f=="string")f=new z(f,u);else if(f instanceof z)f.target=f.target||u;else{var U=f;f=new z(w,u),A(f,U)}if(U=!0,g)for(var $=g.length-1;0<=$;$--){var X=f.g=g[$];U=Gt(X,w,!0,f)&&U}if(X=f.g=u,U=Gt(X,w,!0,f)&&U,U=Gt(X,w,!1,f)&&U,g)for($=0;$<g.length;$++)X=f.g=g[$],U=Gt(X,w,!1,f)&&U}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],w=0;w<g.length;w++)lr(g[w]);delete u.g[f],u.h--}}this.F=null},Ye.prototype.K=function(u,f,g,w){return this.i.add(String(u),f,!1,g,w)},Ye.prototype.L=function(u,f,g,w){return this.i.add(String(u),f,!0,g,w)};function Gt(u,f,g,w){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var U=!0,$=0;$<f.length;++$){var X=f[$];if(X&&!X.da&&X.capture==g){var $e=X.listener,Pt=X.ha||X.src;X.fa&&rt(u.i,X),U=$e.call(Pt,w)!==!1&&U}}return U&&!w.defaultPrevented}function Rr(u,f,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function xn(u){u.g=Rr(()=>{u.g=null,u.i&&(u.i=!1,xn(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Xr extends Ie{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:xn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(u){Ie.call(this),this.h=u,this.g={}}I(Mt,Ie);var ao=[];function Si(u){b(u.g,function(f,g){this.g.hasOwnProperty(g)&&ur(f)},u),u.g={}}Mt.prototype.N=function(){Mt.aa.N.call(this),Si(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var os=a.JSON.stringify,Ql=a.JSON.parse,ca=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Jr(){}Jr.prototype.h=null;function lo(u){return u.h||(u.h=u.i())}function as(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){z.call(this,"d")}I(cr,z);function ls(){z.call(this,"c")}I(ls,z);var Wn={},ha=null;function Ci(){return ha=ha||new Ye}Wn.La="serverreachability";function us(u){z.call(this,Wn.La,u)}I(us,z);function hr(u){const f=Ci();Pe(f,new us(f))}Wn.STAT_EVENT="statevent";function Pr(u,f){z.call(this,Wn.STAT_EVENT,u),this.stat=f}I(Pr,z);function gt(u){const f=Ci();Pe(f,new Pr(f,u))}Wn.Ma="timingevent";function L(u,f){z.call(this,Wn.Ma,u),this.size=f}I(L,z);function F(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function j(){this.g=!0}j.prototype.xa=function(){this.g=!1};function W(u,f,g,w,U,$){u.info(function(){if(u.g)if($)for(var X="",$e=$.split("&"),Pt=0;Pt<$e.length;Pt++){var Le=$e[Pt].split("=");if(1<Le.length){var Bt=Le[0];Le=Le[1];var $t=Bt.split("_");X=2<=$t.length&&$t[1]=="type"?X+(Bt+"="+Le+"&"):X+(Bt+"=redacted&")}}else X=null;else X=$;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+f+`
`+g+`
`+X})}function ne(u,f,g,w,U,$,X){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+f+`
`+g+`
`+$+" "+X})}function re(u,f,g,w){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+J(u,g)+(w?" "+w:"")})}function fe(u,f){u.info(function(){return"TIMEOUT: "+f})}j.prototype.info=function(){};function J(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var w=g[u];if(!(2>w.length)){var U=w[1];if(Array.isArray(U)&&!(1>U.length)){var $=U[0];if($!="noop"&&$!="stop"&&$!="close")for(var X=1;X<U.length;X++)U[X]=""}}}}return os(g)}catch{return f}}var ge={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ce={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},he;function xe(){}I(xe,Jr),xe.prototype.g=function(){return new XMLHttpRequest},xe.prototype.i=function(){return{}},he=new xe;function Ee(u,f,g,w){this.j=u,this.i=f,this.l=g,this.R=w||1,this.U=new Mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ue}function Ue(){this.i=null,this.g="",this.h=!1}var Ce={},lt={};function it(u,f,g){u.L=1,u.v=ma(dr(f)),u.m=g,u.P=!0,kr(u,null)}function kr(u,f){u.F=Date.now(),qn(u),u.A=dr(u.v);var g=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),mh(g.i,"t",w),u.C=0,g=u.j.J,u.h=new Ue,u.g=ps(u.j,g?f:null,!u.m),0<u.O&&(u.M=new Xr(m(u.Y,u,u.g),u.O)),f=u.U,g=u.g,w=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(ao[0]=U.toString()),U=ao);for(var $=0;$<U.length;$++){var X=Lt(g,U[$],w||f.handleEvent,!1,f.h||f);if(!X)break;f.g[X.key]=X}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),hr(),W(u.i,u.u,u.A,u.l,u.R,u.m)}Ee.prototype.ca=function(u){u=u.target;const f=this.M;f&&xr(u)==3?f.j():this.Y(u)},Ee.prototype.Y=function(u){try{if(u==this.g)e:{const $t=xr(this.g);var f=this.g.Ba();const mr=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||wh(this.g)))){this.J||$t!=4||f==7||(f==8||0>=mr?hr(3):hr(2)),Qt(this);var g=this.g.Z();this.X=g;t:if(Hn(this)){var w=wh(this.g);u="";var U=w.length,$=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dn(this),Kn(this);var X="";break t}this.h.i=new a.TextDecoder}for(f=0;f<U;f++)this.h.h=!0,u+=this.h.i.decode(w[f],{stream:!($&&f==U-1)});w.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=g==200,ne(this.i,this.u,this.A,this.l,this.R,$t,g),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Pt=this.g;if(($e=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E($e)){var Le=$e;break t}}Le=null}if(g=Le)re(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yn(this,g);else{this.o=!1,this.s=3,gt(12),Dn(this),Kn(this);break e}}if(this.P){g=!0;let Vt;for(;!this.J&&this.C<X.length;)if(Vt=Zr(this,X),Vt==lt){$t==4&&(this.s=4,gt(14),g=!1),re(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==Ce){this.s=4,gt(15),re(this.i,this.l,X,"[Invalid Chunk]"),g=!1;break}else re(this.i,this.l,Vt,null),yn(this,Vt);if(Hn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||X.length!=0||this.h.h||(this.s=1,gt(16),g=!1),this.o=this.o&&g,!g)re(this.i,this.l,X,"[Invalid Chunked Response]"),Dn(this),Kn(this);else if(0<X.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),iu(Bt),Bt.M=!0,gt(11))}}else re(this.i,this.l,X,null),yn(this,X);$t==4&&Dn(this),this.o&&!this.J&&($t==4?Rh(this.j,this):(this.o=!1,qn(this)))}else Eh(this.g),g==400&&0<X.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Dn(this),Kn(this)}}}catch{}finally{}};function Hn(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Zr(u,f){var g=u.C,w=f.indexOf(`
`,g);return w==-1?lt:(g=Number(f.substring(g,w)),isNaN(g)?Ce:(w+=1,w+g>f.length?lt:(f=f.slice(w,w+g),u.C=w+g,f)))}Ee.prototype.cancel=function(){this.J=!0,Dn(this)};function qn(u){u.S=Date.now()+u.I,br(u,u.I)}function br(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=F(m(u.ba,u),f)}function Qt(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ee.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(fe(this.i,this.A),this.L!=2&&(hr(),gt(17)),Dn(this),this.s=2,Kn(this)):br(this,this.S-u)};function Kn(u){u.j.G==0||u.J||Rh(u.j,u)}function Dn(u){Qt(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Si(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function yn(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||vn(g.h,u))){if(!u.K&&vn(g.h,u)&&g.G==3){try{var w=g.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)va(g),_a(g);else break e;ru(g),gt(18)}}else g.za=U[1],0<g.za-g.T&&37500>U[2]&&g.F&&g.v==0&&!g.C&&(g.C=F(m(g.Za,g),6e3));if(1>=Ge(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else pr(g,11)}else if((u.K||g.g==u)&&va(g),!E(f))for(U=g.Da.g.parse(f),f=0;f<U.length;f++){let Le=U[f];if(g.T=Le[0],Le=Le[1],g.G==2)if(Le[0]=="c"){g.K=Le[1],g.ia=Le[2];const Bt=Le[3];Bt!=null&&(g.la=Bt,g.j.info("VER="+g.la));const $t=Le[4];$t!=null&&(g.Aa=$t,g.j.info("SVER="+g.Aa));const mr=Le[5];mr!=null&&typeof mr=="number"&&0<mr&&(w=1.5*mr,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const Vt=u.g;if(Vt){const Ia=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var $=w.h;$.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(cs($,$.h),$.h=null))}if(w.D){const au=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;au&&(w.ya=au,He(w.I,w.D,au))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var X=u;if(w.qa=ou(w,w.J?w.ia:null,w.W),X.K){da(w.h,X);var $e=X,Pt=w.L;Pt&&($e.I=Pt),$e.B&&(Qt($e),qn($e)),w.g=X}else Ch(w);0<g.i.length&&ya(g)}else Le[0]!="stop"&&Le[0]!="close"||pr(g,7);else g.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?pr(g,7):tu(g):Le[0]!="noop"&&g.l&&g.l.ta(Le),g.v=0)}}hr(4)}catch{}}var me=class{constructor(u,f){this.g=u,this.map=f}};function nt(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ct(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ge(u){return u.h?1:u.g?u.g.size:0}function vn(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function cs(u,f){u.g?u.g.add(f):u.h=f}function da(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}nt.prototype.cancel=function(){if(this.i=ah(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ah(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return k(u.i)}function Rp(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,w=0;w<g;w++)f.push(u[w]);return f}f=[],g=0;for(w in u)f[g++]=u[w];return f}function Pp(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const w in u)f[g++]=w;return f}}}function lh(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=Pp(u),w=Rp(u),U=w.length,$=0;$<U;$++)f.call(void 0,w[$],g&&g[$],u)}var On=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uh(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var w=u[g].indexOf("="),U=null;if(0<=w){var $=u[g].substring(0,w);U=u[g].substring(w+1)}else $=u[g];f($,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ei(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ei){this.h=u.h,fa(this,u.j),this.o=u.o,this.g=u.g,pa(this,u.s),this.l=u.l;var f=u.i,g=new ds;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Yl(this,g),this.m=u.m}else u&&(f=String(u).match(On))?(this.h=!1,fa(this,f[1]||"",!0),this.o=uo(f[2]||""),this.g=uo(f[3]||"",!0),pa(this,f[4]),this.l=uo(f[5]||"",!0),Yl(this,f[6]||"",!0),this.m=uo(f[7]||"")):(this.h=!1,this.i=new ds(null,this.h))}ei.prototype.toString=function(){var u=[],f=this.j;f&&u.push(hs(f,ch,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(hs(f,ch,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(hs(g,g.charAt(0)=="/"?dh:hh,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",hs(g,ga)),u.join("")};function dr(u){return new ei(u)}function fa(u,f,g){u.j=g?uo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function pa(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Yl(u,f,g){f instanceof ds?(u.i=f,gh(u.i,u.h)):(g||(f=hs(f,fh)),u.i=new ds(f,u.h))}function He(u,f,g){u.i.set(f,g)}function ma(u){return He(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function uo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hs(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,kp),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function kp(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ch=/[#\/\?@]/g,hh=/[#\?:]/g,dh=/[#\?]/g,fh=/[#\?@]/g,ga=/#/g;function ds(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function fr(u){u.g||(u.g=new Map,u.h=0,u.i&&uh(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ds.prototype,t.add=function(u,f){fr(this),this.i=null,u=Ai(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function wn(u,f){fr(u),f=Ai(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function ph(u,f){return fr(u),f=Ai(u,f),u.g.has(f)}t.forEach=function(u,f){fr(this),this.g.forEach(function(g,w){g.forEach(function(U){u.call(f,U,w,this)},this)},this)},t.na=function(){fr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let w=0;w<f.length;w++){const U=u[w];for(let $=0;$<U.length;$++)g.push(f[w])}return g},t.V=function(u){fr(this);let f=[];if(typeof u=="string")ph(this,u)&&(f=f.concat(this.g.get(Ai(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return fr(this),this.i=null,u=Ai(this,u),ph(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function mh(u,f,g){wn(u,f),0<g.length&&(u.i=null,u.g.set(Ai(u,f),k(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var w=f[g];const $=encodeURIComponent(String(w)),X=this.V(w);for(w=0;w<X.length;w++){var U=$;X[w]!==""&&(U+="="+encodeURIComponent(String(X[w]))),u.push(U)}}return this.i=u.join("&")};function Ai(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function gh(u,f){f&&!u.j&&(fr(u),u.i=null,u.g.forEach(function(g,w){var U=w.toLowerCase();w!=U&&(wn(this,w),mh(this,U,g))},u)),u.j=f}function bp(u,f){const g=new j;if(a.Image){const w=new Image;w.onload=y(ti,g,"TestLoadImage: loaded",!0,f,w),w.onerror=y(ti,g,"TestLoadImage: error",!1,f,w),w.onabort=y(ti,g,"TestLoadImage: abort",!1,f,w),w.ontimeout=y(ti,g,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else f(!1)}function Np(u,f){const g=new j,w=new AbortController,U=setTimeout(()=>{w.abort(),ti(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:w.signal}).then($=>{clearTimeout(U),$.ok?ti(g,"TestPingServer: ok",!0,f):ti(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(U),ti(g,"TestPingServer: error",!1,f)})}function ti(u,f,g,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(g)}catch{}}function xp(){this.g=new ca}function Dp(u,f,g){const w=g||"";try{lh(u,function(U,$){let X=U;c(U)&&(X=os(U)),f.push(w+$+"="+encodeURIComponent(X))})}catch(U){throw f.push(w+"type="+encodeURIComponent("_badmap")),U}}function co(u){this.l=u.Ub||null,this.j=u.eb||!1}I(co,Jr),co.prototype.g=function(){return new ho(this.l,this.j)},co.prototype.i=function(u){return function(){return u}}({});function ho(u,f){Ye.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(ho,Ye),t=ho.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,fo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,fo(this)),this.g&&(this.readyState=3,fo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ri(this):fo(this),this.readyState==3&&Xl(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ri(this))},t.Qa=function(u){this.g&&(this.response=u,Ri(this))},t.ga=function(){this.g&&Ri(this)};function Ri(u){u.readyState=4,u.l=null,u.j=null,u.v=null,fo(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function fo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function _h(u){let f="";return b(u,function(g,w){f+=w,f+=":",f+=g,f+=`\r
`}),f}function Nr(u,f,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=_h(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):He(u,f,g))}function Be(u){Ye.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Be,Ye);var yh=/^https?$/i,Op=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():he.g(),this.v=this.o?lo(this.o):lo(he),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch($){Jl(this,$);return}if(u=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)g.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())g.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find($=>$.toLowerCase()=="content-type"),U=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Op,f,void 0))||w||U||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,X]of g)this.g.setRequestHeader($,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vh(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Jl(this,$)}};function Jl(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Zl(u),po(u)}function Zl(u){u.A||(u.A=!0,Pe(u,"complete"),Pe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Pe(this,"complete"),Pe(this,"abort"),po(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),po(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?eu(this):this.bb())},t.bb=function(){eu(this)};function eu(u){if(u.h&&typeof o<"u"&&(!u.v[1]||xr(u)!=4||u.Z()!=2)){if(u.u&&xr(u)==4)Rr(u.Ea,0,u);else if(Pe(u,"readystatechange"),xr(u)==4){u.h=!1;try{const X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var w;if(w=X===0){var U=String(u.D).match(On)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),w=!yh.test(U?U.toLowerCase():"")}g=w}if(g)Pe(u,"complete"),Pe(u,"success");else{u.m=6;try{var $=2<xr(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Zl(u)}}finally{po(u)}}}}function po(u,f){if(u.g){vh(u);const g=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Pe(u,"ready");try{g.onreadystatechange=w}catch{}}}function vh(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function xr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Ql(f)}};function wh(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Eh(u){const f={};u=(u.g&&2<=xr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(E(u[w]))continue;var g=N(u[w]);const U=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const $=f[U]||[];f[U]=$,$.push(g)}C(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Th(u){this.Aa=0,this.i=[],this.j=new j,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fs("baseRetryDelayMs",5e3,u),this.cb=fs("retryDelaySeedMs",1e4,u),this.Wa=fs("forwardChannelMaxRetries",2,u),this.wa=fs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new nt(u&&u.concurrentRequestLimit),this.Da=new xp,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Th.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,w){gt(0),this.W=u,this.H=f||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=ou(this,null,this.W),ya(this)};function tu(u){if(Ih(u),u.G==3){var f=u.U++,g=dr(u.I);if(He(g,"SID",u.K),He(g,"RID",f),He(g,"TYPE","terminate"),mo(u,g),f=new Ee(u,u.j,f),f.L=2,f.v=ma(dr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=ps(f.j,null),f.g.ea(f.v)),f.F=Date.now(),qn(f)}su(u)}function _a(u){u.g&&(iu(u),u.g.cancel(),u.g=null)}function Ih(u){_a(u),u.u&&(a.clearTimeout(u.u),u.u=null),va(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ya(u){if(!Ct(u.h)&&!u.s){u.s=!0;var f=u.Ga;we||de(),Z||(we(),Z=!0),le.add(f,u),u.B=0}}function Dr(u,f){return Ge(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=F(m(u.Ga,u,f),wa(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Ee(this,this.j,u);let $=this.o;if(this.S&&($?($=v($),A($,this.S)):$=this.S),this.m!==null||this.O||(U.H=$,$=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Sh(this,U,f),g=dr(this.I),He(g,"RID",u),He(g,"CVER",22),this.D&&He(g,"X-HTTP-Session-Id",this.D),mo(this,g),$&&(this.O?f="headers="+encodeURIComponent(String(_h($)))+"&"+f:this.m&&Nr(g,this.m,$)),cs(this.h,U),this.Ua&&He(g,"TYPE","init"),this.P?(He(g,"$req",f),He(g,"SID","null"),U.T=!0,it(U,g,null)):it(U,g,f),this.G=2}}else this.G==3&&(u?nu(this,u):this.i.length==0||Ct(this.h)||nu(this))};function nu(u,f){var g;f?g=f.l:g=u.U++;const w=dr(u.I);He(w,"SID",u.K),He(w,"RID",g),He(w,"AID",u.T),mo(u,w),u.m&&u.o&&Nr(w,u.m,u.o),g=new Ee(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Sh(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),cs(u.h,g),it(g,w,f)}function mo(u,f){u.H&&b(u.H,function(g,w){He(f,w,g)}),u.l&&lh({},function(g,w){He(f,w,g)})}function Sh(u,f,g){g=Math.min(u.i.length,g);var w=u.l?m(u.l.Na,u.l,u):null;e:{var U=u.i;let $=-1;for(;;){const X=["count="+g];$==-1?0<g?($=U[0].g,X.push("ofs="+$)):$=0:X.push("ofs="+$);let $e=!0;for(let Pt=0;Pt<g;Pt++){let Le=U[Pt].g;const Bt=U[Pt].map;if(Le-=$,0>Le)$=Math.max(0,U[Pt].g-100),$e=!1;else try{Dp(Bt,X,"req"+Le+"_")}catch{w&&w(Bt)}}if($e){w=X.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,w}function Ch(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;we||de(),Z||(we(),Z=!0),le.add(f,u),u.v=0}}function ru(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=F(m(u.Fa,u),wa(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Ah(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=F(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),_a(this),Ah(this))};function iu(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Ah(u){u.g=new Ee(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=dr(u.qa);He(f,"RID","rpc"),He(f,"SID",u.K),He(f,"AID",u.T),He(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&He(f,"TO",u.ja),He(f,"TYPE","xmlhttp"),mo(u,f),u.m&&u.o&&Nr(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=ma(dr(f)),g.m=null,g.P=!0,kr(g,u)}t.Za=function(){this.C!=null&&(this.C=null,_a(this),ru(this),gt(19))};function va(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Rh(u,f){var g=null;if(u.g==f){va(u),iu(u),u.g=null;var w=2}else if(vn(u.h,f))g=f.D,da(u.h,f),w=1;else return;if(u.G!=0){if(f.o)if(w==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var U=u.B;w=Ci(),Pe(w,new L(w,g)),ya(u)}else Ch(u);else if(U=f.s,U==3||U==0&&0<f.X||!(w==1&&Dr(u,f)||w==2&&ru(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),U){case 1:pr(u,5);break;case 4:pr(u,10);break;case 3:pr(u,6);break;default:pr(u,2)}}}function wa(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function pr(u,f){if(u.j.info("Error code "+f),f==2){var g=m(u.fb,u),w=u.Xa;const U=!w;w=new ei(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fa(w,"https"),ma(w),U?bp(w.toString(),g):Np(w.toString(),g)}else gt(2);u.G=0,u.l&&u.l.sa(f),su(u),Ih(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function su(u){if(u.G=0,u.ka=[],u.l){const f=ah(u.h);(f.length!=0||u.i.length!=0)&&(x(u.ka,f),x(u.ka,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.ra()}}function ou(u,f,g){var w=g instanceof ei?dr(g):new ei(g);if(w.g!="")f&&(w.g=f+"."+w.g),pa(w,w.s);else{var U=a.location;w=U.protocol,f=f?f+"."+U.hostname:U.hostname,U=+U.port;var $=new ei(null);w&&fa($,w),f&&($.g=f),U&&pa($,U),g&&($.l=g),w=$}return g=u.D,f=u.ya,g&&f&&He(w,g,f),He(w,"VER",u.la),mo(u,w),w}function ps(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Be(new co({eb:g})):new Be(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ea(){}t=Ea.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ta(){}Ta.prototype.g=function(u,f){return new En(u,f)};function En(u,f){Ye.call(this),this.g=new Th(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!E(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!E(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ms(this)}I(En,Ye),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){tu(this.g)},En.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=os(u),u=g);f.i.push(new me(f.Ya++,u)),f.G==3&&ya(f)},En.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,En.aa.N.call(this)};function Ph(u){cr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}I(Ph,cr);function ni(){ls.call(this),this.status=1}I(ni,ls);function ms(u){this.g=u}I(ms,Ea),ms.prototype.ua=function(){Pe(this.g,"a")},ms.prototype.ta=function(u){Pe(this.g,new Ph(u))},ms.prototype.sa=function(u){Pe(this.g,new ni)},ms.prototype.ra=function(){Pe(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,DR=function(){return new Ta},xR=function(){return Ci()},NR=Wn,Jg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ge.NO_ERROR=0,ge.TIMEOUT=8,ge.HTTP_ERROR=6,Ed=ge,ce.COMPLETE="complete",bR=ce,as.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,Ou=as,kR=co,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,PR=Be}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});const H0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new Xf("@firebase/firestore");function Cu(){return Yo.logLevel}function ue(t,...e){if(Yo.logLevel<=ke.DEBUG){const n=e.map(Jy);Yo.debug(`Firestore (${Wl}): ${t}`,...n)}}function Yi(t,...e){if(Yo.logLevel<=ke.ERROR){const n=e.map(Jy);Yo.error(`Firestore (${Wl}): ${t}`,...n)}}function wl(t,...e){if(Yo.logLevel<=ke.WARN){const n=e.map(Jy);Yo.warn(`Firestore (${Wl}): ${t}`,...n)}}function Jy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: `+t;throw Yi(e),new Error(e)}function at(t,e){t||ve()}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(un.UNAUTHENTICATED))}shutdown(){}}class mU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gU{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ws;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ws,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ws)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string"),new OR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string"),new un(e)}}class _U{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yU{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _U(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(at(typeof n.token=="string"),this.R=n.token,new vU(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=EU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ze(t,e){return t<e?-1:t>e?1:0}function El(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new jt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new jt(0,0))}static max(){return new Te(new jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return kc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dt extends kc{construct(e,n,r){return new dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const TU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends kc{construct(e,n,r){return new Zt(e,n,r)}static isValidIdentifier(e){return TU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Zt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new se(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(n)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(dt.fromString(e))}static fromName(e){return new pe(dt.fromString(e).popFirst(5))}static empty(){return new pe(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new dt(e.slice()))}}function IU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new Ys(i,pe.empty(),e)}function SU(t){return new Ys(t.readTime,t.key,-1)}class Ys{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ys(Te.min(),pe.empty(),-1)}static max(){return new Ys(Te.max(),pe.empty(),-1)}}function CU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==AU)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new Q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function PU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function eh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zy.oe=-1;function lp(t){return t==null}function _f(t){return t===0&&1/t==-1/0}function kU(t){return typeof t=="number"&&Number.isInteger(t)&&!_f(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function la(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Xt.RED,this.left=i??Xt.EMPTY,this.right=s??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Xt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new K0(this.data.getIterator())}getIteratorFrom(e){return new K0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class K0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Zn([])}unionWith(e){let n=new tn(Zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new VR("Invalid base64 string: "+s):s}}(e);return new gn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const bU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(t){if(at(!!t),typeof t=="string"){let e=0;const n=bU.exec(t);if(at(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(t.seconds),nanos:bt(t.nanos)}}function bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xo(t){return typeof t=="string"?gn.fromBase64String(t):gn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tv(t){const e=t.mapValue.fields.__previous_value__;return ev(e)?tv(e):e}function bc(t){const e=Xs(t.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Nc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Nc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Nc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ev(t)?4:xU(t)?9007199254740991:10:ve()}function vi(t,e){if(t===e)return!0;const n=Jo(t);if(n!==Jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bc(t).isEqual(bc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xs(i.timestampValue),a=Xs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xo(i.bytesValue).isEqual(Xo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return bt(i.geoPointValue.latitude)===bt(s.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bt(i.integerValue)===bt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bt(i.doubleValue),a=bt(s.doubleValue);return o===a?_f(o)===_f(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return El(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(q0(o)!==q0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vi(o[l],a[l])))return!1;return!0}(t,e);default:return ve()}}function xc(t,e){return(t.values||[]).find(n=>vi(n,e))!==void 0}function Tl(t,e){if(t===e)return 0;const n=Jo(t),r=Jo(e);if(n!==r)return ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=bt(s.integerValue||s.doubleValue),l=bt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return G0(t.timestampValue,e.timestampValue);case 4:return G0(bc(t),bc(e));case 5:return ze(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Xo(s),l=Xo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ze(a[c],l[c]);if(d!==0)return d}return ze(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ze(bt(s.latitude),bt(o.latitude));return a!==0?a:ze(bt(s.longitude),bt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Tl(a[c],l[c]);if(d)return d}return ze(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ed.mapValue&&o===ed.mapValue)return 0;if(s===ed.mapValue)return 1;if(o===ed.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=ze(l[p],d[p]);if(m!==0)return m;const y=Tl(a[l[p]],c[d[p]]);if(y!==0)return y}return ze(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ve()}}function G0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=Xs(t),r=Xs(e),i=ze(n.seconds,r.seconds);return i!==0?i:ze(n.nanos,r.nanos)}function Il(t){return Zg(t)}function Zg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Zg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Zg(n.fields[o])}`;return i+"}"}(t.mapValue):ve()}function Q0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function e_(t){return!!t&&"integerValue"in t}function nv(t){return!!t&&"arrayValue"in t}function Y0(t){return!!t&&"nullValue"in t}function X0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Td(t){return!!t&&"mapValue"in t}function Xu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return la(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Td(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(n)}setAll(e){let n=Zt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Xu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Td(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Td(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){la(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Vn(Xu(this.value))}}function FR(t){const e=[];return la(t.fields,(n,r)=>{const i=new Zt([n]);if(Td(r)){const s=FR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new fn(e,0,Te.min(),Te.min(),Te.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,i){return new fn(e,1,n,Te.min(),r,i,0)}static newNoDocument(e,n){return new fn(e,2,n,Te.min(),Te.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,Te.min(),Te.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.position=e,this.inclusive=n}}function J0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),n.key):r=Tl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Z0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n="asc"){this.field=e,this.dir=n}}function DU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{}class xt extends UR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LU(e,n,r):n==="array-contains"?new FU(e,r):n==="in"?new UU(e,r):n==="not-in"?new jU(e,r):n==="array-contains-any"?new BU(e,r):new xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new MU(e,r):new VU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Tl(n,this.value)):n!==null&&Jo(this.value)===Jo(n)&&this.matchesComparison(Tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gr extends UR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Gr(e,n)}matches(e){return jR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jR(t){return t.op==="and"}function BR(t){return OU(t)&&jR(t)}function OU(t){for(const e of t.filters)if(e instanceof Gr)return!1;return!0}function t_(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+Il(t.value);if(BR(t))return t.filters.map(e=>t_(e)).join(",");{const e=t.filters.map(n=>t_(n)).join(",");return`${t.op}(${e})`}}function $R(t,e){return t instanceof xt?function(r,i){return i instanceof xt&&r.op===i.op&&r.field.isEqual(i.field)&&vi(r.value,i.value)}(t,e):t instanceof Gr?function(r,i){return i instanceof Gr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&$R(o,i.filters[a]),!0):!1}(t,e):void ve()}function zR(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${Il(n.value)}`}(t):t instanceof Gr?function(n){return n.op.toString()+" {"+n.getFilters().map(zR).join(" ,")+"}"}(t):"Filter"}class LU extends xt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class MU extends xt{constructor(e,n){super(e,"in",n),this.keys=WR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VU extends xt{constructor(e,n){super(e,"not-in",n),this.keys=WR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function WR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class FU extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nv(n)&&xc(n.arrayValue,this.value)}}class UU extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xc(this.value.arrayValue,n)}}class jU extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xc(this.value.arrayValue,n)}}class BU extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function eT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $U(t,e,n,r,i,s,o)}function rv(t){const e=Se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>t_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),lp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Il(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Il(r)).join(",")),e.ue=n}return e.ue}function iv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$R(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Z0(t.startAt,e.startAt)&&Z0(t.endAt,e.endAt)}function n_(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zU(t,e,n,r,i,s,o,a){return new Hl(t,e,n,r,i,s,o,a)}function sv(t){return new Hl(t)}function tT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HR(t){return t.collectionGroup!==null}function Ju(t){const e=Se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(Zt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Dc(s,r))}),n.has(Zt.keyField().canonicalString())||e.ce.push(new Dc(Zt.keyField(),r))}return e.ce}function mi(t){const e=Se(t);return e.le||(e.le=WU(e,Ju(t))),e.le}function WU(t,e){if(t.limitType==="F")return eT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Dc(i.field,s)});const n=t.endAt?new yf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yf(t.startAt.position,t.startAt.inclusive):null;return eT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function r_(t,e){const n=t.filters.concat([e]);return new Hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vf(t,e,n){return new Hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function up(t,e){return iv(mi(t),mi(e))&&t.limitType===e.limitType}function qR(t){return`${rv(mi(t))}|lt:${t.limitType}`}function Ra(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zR(i)).join(", ")}]`),lp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Il(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Il(i)).join(",")),`Target(${r})`}(mi(t))}; limitType=${t.limitType})`}function cp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ju(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=J0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ju(r),i)||r.endAt&&!function(o,a,l){const c=J0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ju(r),i))}(t,e)}function HU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KR(t){return(e,n)=>{let r=!1;for(const i of Ju(t)){const s=qU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qU(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Tl(l,c):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return MR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=new Tt(pe.comparator);function Xi(){return KU}const GR=new Tt(pe.comparator);function Lu(...t){let e=GR;for(const n of t)e=e.insert(n.key,n);return e}function QR(t){let e=GR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function No(){return Zu()}function YR(){return Zu()}function Zu(){return new ql(t=>t.toString(),(t,e)=>t.isEqual(e))}const GU=new Tt(pe.comparator),QU=new tn(pe.comparator);function be(...t){let e=QU;for(const n of t)e=e.add(n);return e}const YU=new tn(ze);function XU(){return YU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_f(e)?"-0":e}}function JR(t){return{integerValue:""+t}}function JU(t,e){return kU(e)?JR(e):XR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this._=void 0}}function ZU(t,e,n){return t instanceof Oc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ev(s)&&(s=tv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Lc?e1(t,e):t instanceof Mc?t1(t,e):function(i,s){const o=ZR(i,s),a=nT(o)+nT(i.Pe);return e_(o)&&e_(i.Pe)?JR(a):XR(i.serializer,a)}(t,e)}function e4(t,e,n){return t instanceof Lc?e1(t,e):t instanceof Mc?t1(t,e):n}function ZR(t,e){return t instanceof wf?function(r){return e_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Oc extends hp{}class Lc extends hp{constructor(e){super(),this.elements=e}}function e1(t,e){const n=n1(e);for(const r of t.elements)n.some(i=>vi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Mc extends hp{constructor(e){super(),this.elements=e}}function t1(t,e){let n=n1(e);for(const r of t.elements)n=n.filter(i=>!vi(i,r));return{arrayValue:{values:n}}}class wf extends hp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function nT(t){return bt(t.integerValue||t.doubleValue)}function n1(t){return nv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.field=e,this.transform=n}}function n4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Lc&&i instanceof Lc||r instanceof Mc&&i instanceof Mc?El(r.elements,i.elements,vi):r instanceof wf&&i instanceof wf?vi(r.Pe,i.Pe):r instanceof Oc&&i instanceof Oc}(t.transform,e.transform)}class r4{constructor(e,n){this.version=e,this.transformResults=n}}class gi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gi}static exists(e){return new gi(void 0,e)}static updateTime(e){return new gi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Id(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dp{}function r1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new s1(t.key,gi.none()):new th(t.key,t.data,gi.none());{const n=t.data,r=Vn.empty();let i=new tn(Zt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new io(t.key,r,new Zn(i.toArray()),gi.none())}}function i4(t,e,n){t instanceof th?function(i,s,o){const a=i.value.clone(),l=iT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof io?function(i,s,o){if(!Id(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=iT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(i1(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ec(t,e,n,r){return t instanceof th?function(s,o,a,l){if(!Id(s.precondition,o))return a;const c=s.value.clone(),d=sT(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof io?function(s,o,a,l){if(!Id(s.precondition,o))return a;const c=sT(s.fieldTransforms,l,o),d=o.data;return d.setAll(i1(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Id(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function s4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ZR(r.transform,i||null);s!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,s))}return n||null}function rT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&El(r,i,(s,o)=>n4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class th extends dp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class io extends dp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function i1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function iT(t,e,n){const r=new Map;at(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,e4(o,a,n[i]))}return r}function sT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ZU(s,o,e))}return r}class s1 extends dp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o4 extends dp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&i4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ec(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ec(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=YR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=r1(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,(n,r)=>rT(n,r))&&El(this.baseMutations,e.baseMutations,(n,r)=>rT(n,r))}}class ov{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){at(e.mutations.length===r.length);let i=function(){return GU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ov(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Me;function c4(t){switch(t){default:return ve();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function o1(t){if(t===void 0)return Yi("GRPC error has no .code"),K.UNKNOWN;switch(t){case kt.OK:return K.OK;case kt.CANCELLED:return K.CANCELLED;case kt.UNKNOWN:return K.UNKNOWN;case kt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case kt.INTERNAL:return K.INTERNAL;case kt.UNAVAILABLE:return K.UNAVAILABLE;case kt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case kt.NOT_FOUND:return K.NOT_FOUND;case kt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case kt.ABORTED:return K.ABORTED;case kt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case kt.DATA_LOSS:return K.DATA_LOSS;default:return ve()}}(Me=kt||(kt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new Lo([4294967295,4294967295],0);function oT(t){const e=h4().encode(t),n=new RR;return n.update(e),new Uint8Array(n.digest())}function aT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Lo([n,r],0),new Lo([i,s],0)]}class av{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mu(`Invalid padding: ${n}`);if(r<0)throw new Mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Lo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Lo.fromNumber(r)));return i.compare(d4)===1&&(i=new Lo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=oT(e),[r,i]=aT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new av(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=oT(e),[r,i]=aT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,nh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fp(Te.min(),i,new Tt(ze),Xi(),be())}}class nh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nh(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class a1{constructor(e,n){this.targetId=e,this.me=n}}class l1{constructor(e,n,r=gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class lT{constructor(){this.fe=0,this.ge=cT(),this.pe=gn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=be(),n=be(),r=be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ve()}}),new nh(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=cT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,at(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class f4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xi(),this.qe=uT(),this.Qe=new Tt(ze)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(n_(s))if(r===0){const o=new pe(s.path);this.Ue(n,o,fn.newNoDocument(o,Te.min()))}else at(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Xo(r).toUint8Array()}catch(l){if(l instanceof VR)return wl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new av(o,i,s)}catch(l){return wl(l instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&n_(a.target)){const l=new pe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,fn.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=be();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new fp(e,n,this.Qe,this.ke,r);return this.ke=Xi(),this.qe=uT(),this.Qe=new Tt(ze),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new lT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tn(ze),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function uT(){return new Tt(pe.comparator)}function cT(){return new Tt(pe.comparator)}const p4={asc:"ASCENDING",desc:"DESCENDING"},m4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g4={and:"AND",or:"OR"};class _4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function i_(t,e){return t.useProto3Json||lp(e)?e:{value:e}}function Ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function y4(t,e){return Ef(t,e.toTimestamp())}function _i(t){return at(!!t),Te.fromTimestamp(function(n){const r=Xs(n);return new jt(r.seconds,r.nanos)}(t))}function lv(t,e){return s_(t,e).canonicalString()}function s_(t,e){const n=function(i){return new dt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function c1(t){const e=dt.fromString(t);return at(m1(e)),e}function o_(t,e){return lv(t.databaseId,e.path)}function km(t,e){const n=c1(e);if(n.get(1)!==t.databaseId.projectId)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(d1(n))}function h1(t,e){return lv(t.databaseId,e)}function v4(t){const e=c1(t);return e.length===4?dt.emptyPath():d1(e)}function a_(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function d1(t){return at(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hT(t,e,n){return{name:o_(t,e),fields:n.value.mapValue.fields}}function w4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(at(d===void 0||typeof d=="string"),gn.fromBase64String(d||"")):(at(d===void 0||d instanceof Buffer||d instanceof Uint8Array),gn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?K.UNKNOWN:o1(c.code);return new se(d,c.message||"")}(o);n=new l1(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=km(t,r.document.name),s=_i(r.document.updateTime),o=r.document.createTime?_i(r.document.createTime):Te.min(),a=new Vn({mapValue:{fields:r.document.fields}}),l=fn.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Sd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=km(t,r.document),s=r.readTime?_i(r.readTime):Te.min(),o=fn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Sd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=km(t,r.document),s=r.removedTargetIds||[];n=new Sd([],s,i,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new u4(i,s),a=r.targetId;n=new a1(a,o)}}return n}function E4(t,e){let n;if(e instanceof th)n={update:hT(t,e.key,e.value)};else if(e instanceof s1)n={delete:o_(t,e.key)};else if(e instanceof io)n={update:hT(t,e.key,e.data),updateMask:b4(e.fieldMask)};else{if(!(e instanceof o4))return ve();n={verify:o_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Oc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:y4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve()}(t,e.precondition)),n}function T4(t,e){return t&&t.length>0?(at(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?_i(i.updateTime):_i(s);return o.isEqual(Te.min())&&(o=_i(s)),new r4(o,i.transformResults||[])}(n,e))):[]}function I4(t,e){return{documents:[h1(t,e.path)]}}function S4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=h1(t,i);const s=function(c){if(c.length!==0)return p1(Gr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Pa(m.field),direction:R4(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=i_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function C4(t){let e=v4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){at(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const m=f1(p);return m instanceof Gr&&BR(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(I){return new Dc(ka(I.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,lp(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,y=p.values||[];return new yf(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,y=p.values||[];return new yf(y,m)}(n.endAt)),zU(e,i,o,s,a,"F",l,c)}function A4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function f1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ka(n.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ka(n.unaryFilter.field);return xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ka(n.unaryFilter.field);return xt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ka(n.unaryFilter.field);return xt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return xt.create(ka(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gr.create(n.compositeFilter.filters.map(r=>f1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function R4(t){return p4[t]}function P4(t){return m4[t]}function k4(t){return g4[t]}function Pa(t){return{fieldPath:t.canonicalString()}}function ka(t){return Zt.fromServerFormat(t.fieldPath)}function p1(t){return t instanceof xt?function(n){if(n.op==="=="){if(X0(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NAN"}};if(Y0(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(X0(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NOT_NAN"}};if(Y0(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(n.field),op:P4(n.op),value:n.value}}}(t):t instanceof Gr?function(n){const r=n.getFilters().map(i=>p1(i));return r.length===1?r[0]:{compositeFilter:{op:k4(n.op),filters:r}}}(t):ve()}function b4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function m1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r,i,s=Te.min(),o=Te.min(),a=gn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.ct=e}}function x4(t){const e=C4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this._n=new O4}addToCollectionParentIndex(e,n){return this._n.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Ys.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class O4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tn(dt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Sl(0)}static Ln(){return new Sl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.changes=new ql(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ec(r.mutation,i,Zn.empty(),jt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const i=No();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Lu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=No();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Xi();const o=Zu(),a=function(){return Zu()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof io)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ec(d.mutation,c,d.mutation.getFieldMask(),jt.now())):o.set(c.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var p;return a.set(c,new M4(d,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Zu();let i=new Tt((o,a)=>o-a),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Zn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const p=(i.get(a.batchId)||be()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,p=YR();d.forEach(m=>{if(!s.has(m)){const y=r1(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Q.resolve(No());let a=-1,l=s;return o.next(c=>Q.forEach(c,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,be())).next(d=>({batchId:a,changes:QR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let i=Lu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Lu();return this.indexManager.getCollectionParents(e,s).next(a=>Q.forEach(a,l=>{const c=function(p,m){return new Hl(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,fn.newInvalidDocument(d)))});let a=Lu();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&ec(d.mutation,c,Zn.empty(),jt.now()),cp(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Q.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_i(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:x4(i.bundledQuery),readTime:_i(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.overlays=new Tt(pe.comparator),this.hr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=No();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=No(),s=n.length+1,o=new pe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Tt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=No(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=No(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return Q.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new l4(n,r));let s=this.hr.get(n);s===void 0&&(s=be(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.Pr=new tn(Wt.Ir),this.Tr=new tn(Wt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Wt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Wt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new pe(new dt([])),r=new Wt(n,e),i=new Wt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new pe(new dt([])),r=new Wt(n,e),i=new Wt(n,e+1);let s=be();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Wt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return pe.comparator(e.key,n.key)||ze(e.pr,n.pr)}static Er(e,n){return ze(e.pr,n.pr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new tn(Wt.Ir)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new a4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Wt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wt(n,0),i=new Wt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tn(ze);return n.forEach(i=>{const s=new Wt(i,0),o=new Wt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Q.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;pe.isDocumentKey(s)||(s=s.child(""));const o=new Wt(new pe(s),0);let a=new tn(ze);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),Q.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){at(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Q.forEach(n.mutations,i=>{const s=new Wt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Wt(n,0),i=this.wr.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.vr=e,this.docs=function(){return new Tt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let r=Xi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Xi();const o=n.path,a=new pe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||CU(SU(d),r)<=0||(i.has(d.key)||cp(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ve()}Fr(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $4(this)}getSize(e){return Q.resolve(this.size)}}class $4 extends L4{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.persistence=e,this.Mr=new ql(n=>rv(n),iv),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Or=0,this.Nr=new uv,this.targetCount=0,this.Lr=Sl.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Q.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Sl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.qn(n),Q.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n){this.Br={},this.overlays={},this.kr=new Zy(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new z4(this),this.indexManager=new D4,this.remoteDocumentCache=function(i){return new B4(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new N4(n),this.$r=new F4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new j4(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const i=new H4(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return Q.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class H4 extends RU{constructor(e){super(),this.currentSequenceNumber=e}}class cv{constructor(e){this.persistence=e,this.zr=new uv,this.jr=null}static Hr(e){return new cv(e)}get Jr(){if(this.jr)return this.jr;throw ve()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Jr,r=>{const i=pe.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Te.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Q.or([()=>Q.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=be(),i=be();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return WD()?8:PU(rn())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new q4;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Cu()<=ke.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ra(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Q.resolve()):(Cu()<=ke.DEBUG&&ue("QueryEngine","Query:",Ra(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Cu()<=ke.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ra(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(n))):Q.resolve())}ji(e,n){if(tT(n))return Q.resolve(null);let r=mi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vf(n,null,"F"),r=mi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=be(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,vf(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return tT(n)||i.isEqual(Te.min())?Q.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Q.resolve(null):(Cu()<=ke.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ra(n)),this.es(e,o,n,IU(i,-1)).next(a=>a))})}Zi(e,n){let r=new tn(KR(e));return n.forEach((i,s)=>{cp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Cu()<=ke.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ra(n)),this.zi.getDocumentsMatchingQuery(e,n,Ys.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Tt(ze),this.rs=new ql(s=>rv(s),iv),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V4(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Q4(t,e,n,r){return new G4(t,e,n,r)}async function g1(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=be();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function Y4(t,e){const n=Se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const p=c.batch,m=p.keys();let y=Q.resolve();return m.forEach(I=>{y=y.next(()=>d.getEntry(l,I)).next(k=>{const x=c.docVersions.get(I);at(x!==null),k.version.compareTo(x)<0&&(p.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),d.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=be();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _1(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function X4(t,e){const n=Se(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((d,p)=>{const m=i.get(p);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(gn.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(p,y),function(k,x,S){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,y,d)&&a.push(n.Qr.updateTargetData(s,y))});let l=Xi(),c=be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(J4(s,o,e.documentUpdates).next(d=>{l=d.cs,c=d.ls})),!r.isEqual(Te.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(p=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return Q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function J4(t,e,n){let r=be(),i=be();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Xi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function Z4(t,e){const n=Se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ej(t,e){const n=Se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new xs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function l_(t,e,n){const r=Se(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!eh(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function dT(t,e,n){const r=Se(t);let i=Te.min(),s=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const p=Se(l),m=p.rs.get(d);return m!==void 0?Q.resolve(p.ns.get(m)):p.Qr.getTargetData(c,d)}(r,o,mi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Te.min(),n?s:be())).next(a=>(tj(r,HU(e),a),{documents:a,hs:s})))}function tj(t,e,n){let r=t.ss.get(e)||Te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class fT{constructor(){this.activeTargetIds=XU()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nj{constructor(){this.no=new fT,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new fT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td=null;function bm(){return td===null?td=function(){return 268435456+Math.round(2147483648*Math.random())}():td++,"0x"+td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class oj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=bm(),l=this.vo(n,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(d=>(ue("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw wl("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=ij[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=bm();return new Promise((o,a)=>{const l=new PR;l.setWithCredentials(!0),l.listenOnce(bR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ed.NO_ERROR:const d=l.getResponseJson();ue(ln,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ed.TIMEOUT:ue(ln,`RPC '${e}' ${s} timed out`),a(new se(K.DEADLINE_EXCEEDED,"Request time out"));break;case Ed.HTTP_ERROR:const p=l.getStatus();if(ue(ln,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const I=function(x){const S=x.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(S)>=0?S:K.UNKNOWN}(y.status);a(new se(I,y.message))}else a(new se(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new se(K.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{ue(ln,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ue(ln,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=bm(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DR(),a=xR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new kR({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");ue(ln,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=o.createWebChannel(d,l);let m=!1,y=!1;const I=new sj({lo:x=>{y?ue(ln,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(ue(ln,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),ue(ln,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},ho:()=>p.close()}),k=(x,S,E)=>{x.listen(S,R=>{try{E(R)}catch(V){setTimeout(()=>{throw V},0)}})};return k(p,Ou.EventType.OPEN,()=>{y||(ue(ln,`RPC '${e}' stream ${i} transport opened.`),I.mo())}),k(p,Ou.EventType.CLOSE,()=>{y||(y=!0,ue(ln,`RPC '${e}' stream ${i} transport closed`),I.po())}),k(p,Ou.EventType.ERROR,x=>{y||(y=!0,wl(ln,`RPC '${e}' stream ${i} transport errored:`,x),I.po(new se(K.UNAVAILABLE,"The operation could not be completed")))}),k(p,Ou.EventType.MESSAGE,x=>{var S;if(!y){const E=x.data[0];at(!!E);const R=E,V=R.error||((S=R[0])===null||S===void 0?void 0:S.error);if(V){ue(ln,`RPC '${e}' stream ${i} received error:`,V);const B=V.status;let b=function(T){const A=kt[T];if(A!==void 0)return o1(A)}(B),C=V.message;b===void 0&&(b=K.INTERNAL,C="Unknown error status: "+B+" with message "+V.message),y=!0,I.po(new se(b,C)),p.close()}else ue(ln,`RPC '${e}' stream ${i} received:`,E),I.yo(E)}}),k(a,NR.STAT_EVENT,x=>{x.stat===Jg.PROXY?ue(ln,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Jg.NOPROXY&&ue(ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.fo()},0),I}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){return new _4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new y1(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Yi(n.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new se(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aj extends v1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=w4(this.serializer,e),r=function(s){if(!("targetChange"in s))return Te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?_i(o.readTime):Te.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=a_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=n_(l)?{documents:I4(s,l)}:{query:S4(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=u1(s,o.resumeToken);const c=i_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Te.min())>0){a.readTime=Ef(s,o.snapshotVersion.toTimestamp());const c=i_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=A4(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=a_(this.serializer),n.removeTarget=e,this.i_(n)}}class lj extends v1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(at(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=T4(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.A_(r,n)}return at(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=a_(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>E4(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,s_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(K.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,s_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(K.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class cj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Yi(n),this.y_=!1):ue("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{ua(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Se(l);c.M_.add(4),await rh(c),c.N_.set("Unknown"),c.M_.delete(4),await mp(c)}(this))})}),this.N_=new cj(r,i)}}async function mp(t){if(ua(t))for(const e of t.x_)await e(!0)}async function rh(t){for(const e of t.x_)await e(!1)}function w1(t,e){const n=Se(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),mv(n)?pv(n):Kl(n).Xo()&&fv(n,e))}function dv(t,e){const n=Se(t),r=Kl(n);n.F_.delete(e),r.Xo()&&E1(n,e),n.F_.size===0&&(r.Xo()?r.n_():ua(n)&&n.N_.set("Unknown"))}function fv(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(t).P_(e)}function E1(t,e){t.L_.xe(e),Kl(t).I_(e)}function pv(t){t.L_=new f4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Kl(t).start(),t.N_.w_()}function mv(t){return ua(t)&&!Kl(t).Zo()&&t.F_.size>0}function ua(t){return Se(t).M_.size===0}function T1(t){t.L_=void 0}async function dj(t){t.N_.set("Online")}async function fj(t){t.F_.forEach((e,n)=>{fv(t,e)})}async function pj(t,e){T1(t),mv(t)?(t.N_.D_(e),pv(t)):t.N_.set("Unknown")}async function mj(t,e,n){if(t.N_.set("Online"),e instanceof l1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tf(t,r)}else if(e instanceof Sd?t.L_.Ke(e):e instanceof a1?t.L_.He(e):t.L_.We(e),!n.isEqual(Te.min()))try{const r=await _1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.F_.get(c);d&&s.F_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.F_.get(l);if(!d)return;s.F_.set(l,d.withResumeToken(gn.EMPTY_BYTE_STRING,d.snapshotVersion)),E1(s,l);const p=new xs(d.target,l,c,d.sequenceNumber);fv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await Tf(t,r)}}async function Tf(t,e,n){if(!eh(e))throw e;t.M_.add(1),await rh(t),t.N_.set("Offline"),n||(n=()=>_1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await mp(t)})}function I1(t,e){return e().catch(n=>Tf(t,n,e))}async function gp(t){const e=Se(t),n=Js(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;gj(e);)try{const i=await Z4(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,_j(e,i)}catch(i){await Tf(e,i)}S1(e)&&C1(e)}function gj(t){return ua(t)&&t.v_.length<10}function _j(t,e){t.v_.push(e);const n=Js(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function S1(t){return ua(t)&&!Js(t).Zo()&&t.v_.length>0}function C1(t){Js(t).start()}async function yj(t){Js(t).V_()}async function vj(t){const e=Js(t);for(const n of t.v_)e.d_(n.mutations)}async function wj(t,e,n){const r=t.v_.shift(),i=ov.from(r,e,n);await I1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gp(t)}async function Ej(t,e){e&&Js(t).E_&&await async function(r,i){if(function(o){return c4(o)&&o!==K.ABORTED}(i.code)){const s=r.v_.shift();Js(r).t_(),await I1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await gp(r)}}(t,e),S1(t)&&C1(t)}async function mT(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=ua(n);n.M_.add(3),await rh(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await mp(n)}async function Tj(t,e){const n=Se(t);e?(n.M_.delete(2),await mp(n)):e||(n.M_.add(2),await rh(n),n.N_.set("Unknown"))}function Kl(t){return t.B_||(t.B_=function(n,r,i){const s=Se(n);return s.f_(),new aj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:dj.bind(null,t),To:fj.bind(null,t),Ao:pj.bind(null,t),h_:mj.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),mv(t)?pv(t):t.N_.set("Unknown")):(await t.B_.stop(),T1(t))})),t.B_}function Js(t){return t.k_||(t.k_=function(n,r,i){const s=Se(n);return s.f_(),new lj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:yj.bind(null,t),Ao:Ej.bind(null,t),R_:vj.bind(null,t),A_:wj.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await gp(t)):(await t.k_.stop(),t.v_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _v(t,e){if(Yi("AsyncQueue",`${e}: ${t}`),eh(t))return new se(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=Lu(),this.sortedSet=new Tt(this.comparator)}static emptySet(e){return new ol(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.q_=new Tt(pe.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ve():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Cl(e,n,ol.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class Sj{constructor(){this.queries=new ql(e=>qR(e),up),this.onlineState="Unknown",this.z_=new Set}}async function A1(t,e){const n=Se(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Ij,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=_v(o,`Initialization of query '${Ra(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&yv(n)}async function R1(t,e){const n=Se(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Cj(t,e){const n=Se(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&yv(n)}function Aj(t,e,n){const r=Se(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function yv(t){t.z_.forEach(e=>{e.next()})}var u_,_T;(_T=u_||(u_={})).J_="default",_T.Cache="cache";class P1{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==u_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.key=e}}class b1{constructor(e){this.key=e}}class Rj{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=be(),this.mutatedKeys=be(),this.Ia=KR(e),this.Ta=new ol(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new gT,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const m=i.get(d),y=cp(this.query,p)?p:null,I=!!m&&this.mutatedKeys.has(m.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;m&&y?m.data.isEqual(y.data)?I!==k&&(r.track({type:3,doc:y}),x=!0):this.Ra(m,y)||(r.track({type:2,doc:y}),x=!0,(l&&this.Ia(y,l)>0||c&&this.Ia(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),x=!0):m&&!y&&(r.track({type:1,doc:m}),x=!0,(l||c)&&(a=!0)),x&&(y?(o=o.add(y),s=k?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((d,p)=>function(y,I){const k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return k(y)-k(I)}(d.type,p.type)||this.Ia(d.doc,p.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new Cl(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new gT,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=be(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new b1(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new k1(r))}),n}pa(e){this.la=e.hs,this.Pa=be();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Cl.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Pj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kj{constructor(e){this.key=e,this.wa=!1}}class bj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ql(a=>qR(a),up),this.Da=new Map,this.Ca=new Set,this.va=new Tt(pe.comparator),this.Fa=new Map,this.Ma=new uv,this.xa={},this.Oa=new Map,this.Na=Sl.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Nj(t,e,n=!0){const r=M1(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await N1(r,e,n,!0),i}async function xj(t,e){const n=M1(t);await N1(n,e,!0,!1)}async function N1(t,e,n,r){const i=await ej(t.localStore,mi(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Dj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&w1(t.remoteStore,i),a}async function Dj(t,e,n,r,i){t.Ba=(p,m,y)=>async function(k,x,S,E){let R=x.view.da(S);R.Xi&&(R=await dT(k.localStore,x.query,!1).then(({documents:C})=>x.view.da(C,R)));const V=E&&E.targetChanges.get(x.targetId),B=E&&E.targetMismatches.get(x.targetId)!=null,b=x.view.applyChanges(R,k.isPrimaryClient,V,B);return vT(k,x.targetId,b.fa),b.snapshot}(t,p,m,y);const s=await dT(t.localStore,e,!0),o=new Rj(e,s.hs),a=o.da(s.documents),l=nh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);vT(t,n,c.fa);const d=new Pj(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function Oj(t,e,n){const r=Se(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!up(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await l_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dv(r.remoteStore,i.targetId),c_(r,i.targetId)}).catch(Zc)):(c_(r,i.targetId),await l_(r.localStore,i.targetId,!0))}async function Lj(t,e){const n=Se(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dv(n.remoteStore,r.targetId))}async function Mj(t,e,n){const r=zj(t);try{const i=await function(o,a){const l=Se(o),c=jt.now(),d=a.reduce((y,I)=>y.add(I.key),be());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=Xi(),k=be();return l.os.getEntries(y,d).next(x=>{I=x,I.forEach((S,E)=>{E.isValidDocument()||(k=k.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,I)).next(x=>{p=x;const S=[];for(const E of a){const R=s4(E,p.get(E.key).overlayedDocument);R!=null&&S.push(new io(E.key,R,FR(R.value.mapValue),gi.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,S,a)}).next(x=>{m=x;const S=x.applyToLocalDocumentSet(p,k);return l.documentOverlayCache.saveOverlays(y,x.batchId,S)})}).then(()=>({batchId:m.batchId,changes:QR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Tt(ze)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await ih(r,i.changes),await gp(r.remoteStore)}catch(i){const s=_v(i,"Failed to persist write");n.reject(s)}}async function x1(t,e){const n=Se(t);try{const r=await X4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(at(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?at(o.wa):i.removedDocuments.size>0&&(at(o.wa),o.wa=!1))}),await ih(n,r,e)}catch(r){await Zc(r)}}function yT(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Se(o);l.onlineState=a;let c=!1;l.queries.forEach((d,p)=>{for(const m of p.U_)m.j_(a)&&(c=!0)}),c&&yv(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Vj(t,e,n){const r=Se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Tt(pe.comparator);o=o.insert(s,fn.newNoDocument(s,Te.min()));const a=be().add(s),l=new fp(Te.min(),new Map,new Tt(ze),o,a);await x1(r,l),r.va=r.va.remove(s),r.Fa.delete(e),vv(r)}else await l_(r.localStore,e,!1).then(()=>c_(r,e,n)).catch(Zc)}async function Fj(t,e){const n=Se(t),r=e.batch.batchId;try{const i=await Y4(n.localStore,e);O1(n,r,null),D1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ih(n,i)}catch(i){await Zc(i)}}async function Uj(t,e,n){const r=Se(t);try{const i=await function(o,a){const l=Se(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(at(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);O1(r,e,n),D1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ih(r,i)}catch(i){await Zc(i)}}function D1(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function O1(t,e,n){const r=Se(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function c_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||L1(t,r)})}function L1(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(dv(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),vv(t))}function vT(t,e,n){for(const r of n)r instanceof k1?(t.Ma.addReference(r.key,e),jj(t,r)):r instanceof b1?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||L1(t,r.key)):ve()}function jj(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.Ca.add(r),vv(t))}function vv(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new pe(dt.fromString(e)),r=t.Na.next();t.Fa.set(r,new kj(n)),t.va=t.va.insert(n,r),w1(t.remoteStore,new xs(mi(sv(n.path)),r,"TargetPurposeLimboResolution",Zy.oe))}}async function ih(t,e,n){const r=Se(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=hv.Ki(l.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const d=Se(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Q.forEach(c,m=>Q.forEach(m.qi,y=>d.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>Q.forEach(m.Qi,y=>d.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!eh(p))throw p;ue("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const y=d.ns.get(m),I=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(I);d.ns=d.ns.insert(m,k)}}}(r.localStore,s))}async function Bj(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await g1(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new se(K.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ih(n,r.us)}}function $j(t,e){const n=Se(t),r=n.Fa.get(e);if(r&&r.wa)return be().add(r.key);{let i=be();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function M1(t){const e=Se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=x1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$j.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vj.bind(null,e),e.Sa.h_=Cj.bind(null,e.eventManager),e.Sa.ka=Aj.bind(null,e.eventManager),e}function zj(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uj.bind(null,e),e}class wT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=pp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Q4(this.persistence,new K4,e.initialUser,this.serializer)}createPersistence(e){return new W4(cv.Hr,this.serializer)}createSharedClientState(e){return new nj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Wj{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bj.bind(null,this.syncEngine),await Tj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Sj}()}createDatastore(e){const n=pp(e.databaseInfo.databaseId),r=function(s){return new oj(s)}(e.databaseInfo);return function(s,o,a,l){return new uj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new hj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>yT(this.syncEngine,n,0),function(){return pT.D()?new pT:new rj}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const p=new bj(i,s,o,a,l,c);return d&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=Se(r);ue("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await rh(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Yi("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=un.UNAUTHENTICATED,this.clientId=LR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ue("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ue("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_v(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xm(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await g1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ET(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Kj(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mT(e.remoteStore,i)),t._onlineComponents=e}function qj(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Kj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await xm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!qj(n))throw n;wl("Error using user provided cache. Falling back to memory cache: "+n),await xm(t,new wT)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await xm(t,new wT);return t._offlineComponents}async function F1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await ET(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await ET(t,new Wj))),t._onlineComponents}function Gj(t){return F1(t).then(e=>e.syncEngine)}async function h_(t){const e=await F1(t),n=e.eventManager;return n.onListen=Nj.bind(null,e.syncEngine),n.onUnlisten=Oj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Lj.bind(null,e.syncEngine),n}function Qj(t,e,n={}){const r=new Ws;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new V1({next:m=>{o.enqueueAndForget(()=>R1(s,p)),m.fromCache&&l.source==="server"?c.reject(new se(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new P1(a,d,{includeMetadataChanges:!0,ra:!0});return A1(s,p)}(await h_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e,n){if(!n)throw new se(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yj(t,e,n,r){if(e===!0&&r===!0)throw new se(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function IT(t){if(!pe.isDocumentKey(t))throw new se(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ST(t){if(pe.isDocumentKey(t))throw new se(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function zi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_p(t);throw new se(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Xj(t,e){if(e<=0)throw new se(K.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new se(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new se(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pU;switch(r.type){case"firstParty":return new yU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=TT.get(n);r&&(ue("ComponentProvider","Removing Datastore"),TT.delete(n),r.terminate())}(this),Promise.resolve()}}function Jj(t,e,n,r={}){var i;const s=(t=zi(t,yp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=un.MOCK_USER;else{a=RC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new se(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new un(c)}t._authCredentials=new mU(new OR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class $n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class Hs extends is{constructor(e,n,r){super(e,n,sv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new pe(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function oi(t,e,...n){if(t=St(t),j1("collection","path",e),t instanceof yp){const r=dt.fromString(e,...n);return ST(r),new Hs(t,null,r)}{if(!(t instanceof $n||t instanceof Hs))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return ST(r),new Hs(t.firestore,null,r)}}function B1(t,e,...n){if(t=St(t),arguments.length===1&&(e=LR.newId()),j1("doc","path",e),t instanceof yp){const r=dt.fromString(e,...n);return IT(r),new $n(t,null,new pe(r))}{if(!(t instanceof $n||t instanceof Hs))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return IT(r),new $n(t.firestore,t instanceof Hs?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new y1(this,"async_queue_retry"),this.hu=()=>{const n=Nm();n&&ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Nm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Ws;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!eh(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Yi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=gv.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ve()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function AT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Al extends yp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Zj}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$1(this),this._firestoreClient.terminate()}}function eB(t,e){const n=typeof t=="object"?t:Ey(),r=typeof t=="string"?t:e||"(default)",i=Jf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=SC("firestore");s&&Jj(i,...s)}return i}function wv(t){return t._firestoreClient||$1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $1(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new NU(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,U1(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Hj(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(gn.fromBase64String(e))}catch(n){throw new se(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rl(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=/^__.*__$/;class nB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new io(e,this.data,this.fieldMask,n,this.fieldTransforms):new th(e,this.data,n,this.fieldTransforms)}}class z1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new io(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function W1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class Tv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Tv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return If(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(W1(this.fu)&&tB.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class rB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pp(e)}Fu(e,n,r,i=!1){return new Tv({fu:e,methodName:n,vu:r,path:Zt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iv(t){const e=t._freezeSettings(),n=pp(t._databaseId);return new rB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iB(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Cv("Data must be an object, but it was:",o,r);const a=H1(r,o);let l,c;if(s.merge)l=new Zn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const m=d_(e,p,n);if(!o.contains(m))throw new se(K.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);K1(d,m)||d.push(m)}l=new Zn(d),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new nB(new Vn(a),l,c)}class Ep extends wp{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ep}}class Sv extends wp{_toFieldTransform(e){return new t4(e.path,new Oc)}isEqual(e){return e instanceof Sv}}function sB(t,e,n,r){const i=t.Fu(1,e,n);Cv("Data must be an object, but it was:",i,r);const s=[],o=Vn.empty();la(r,(l,c)=>{const d=Av(e,l,n);c=St(c);const p=i.Su(d);if(c instanceof Ep)s.push(d);else{const m=sh(c,p);m!=null&&(s.push(d),o.set(d,m))}});const a=new Zn(s);return new z1(o,a,i.fieldTransforms)}function oB(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[d_(e,r,n)],l=[i];if(s.length%2!=0)throw new se(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(d_(e,s[m])),l.push(s[m+1]);const c=[],d=Vn.empty();for(let m=a.length-1;m>=0;--m)if(!K1(c,a[m])){const y=a[m];let I=l[m];I=St(I);const k=o.Su(y);if(I instanceof Ep)c.push(y);else{const x=sh(I,k);x!=null&&(c.push(y),d.set(y,x))}}const p=new Zn(c);return new z1(d,p,o.fieldTransforms)}function aB(t,e,n,r=!1){return sh(n,t.Fu(r?4:3,e))}function sh(t,e){if(q1(t=St(t)))return Cv("Unsupported field value:",e,t),H1(t,e);if(t instanceof wp)return function(r,i){if(!W1(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=sh(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=jt.fromDate(r);return{timestampValue:Ef(i.serializer,s)}}if(r instanceof jt){const s=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ef(i.serializer,s)}}if(r instanceof Ev)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rl)return{bytesValue:u1(i.serializer,r._byteString)};if(r instanceof $n){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lv(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${_p(r)}`)}(t,e)}function H1(t,e){const n={};return MR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(t,(r,i)=>{const s=sh(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function q1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof Ev||t instanceof Rl||t instanceof $n||t instanceof wp)}function Cv(t,e,n){if(!q1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=_p(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function d_(t,e,n){if((e=St(e))instanceof vp)return e._internalPath;if(typeof e=="string")return Av(t,e);throw If("Field path arguments must be of type string or ",t,!1,void 0,n)}const lB=new RegExp("[~\\*/\\[\\]]");function Av(t,e,n){if(e.search(lB)>=0)throw If(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vp(...e.split("."))._internalPath}catch{throw If(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function If(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new se(K.INVALID_ARGUMENT,a+t+l)}function K1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uB extends G1{data(){return super.data()}}function Tp(t,e){return typeof e=="string"?Av(t,e):e instanceof vp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rv{}class Pv extends Rv{}function Ka(t,e,...n){let r=[];e instanceof Rv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof kv).length,a=s.filter(l=>l instanceof Ip).length;if(o>1||o>0&&a>0)throw new se(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ip extends Pv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ip(e,n,r)}_apply(e){const n=this._parse(e);return Y1(e._query,n),new is(e.firestore,e.converter,r_(e._query,n))}_parse(e){const n=Iv(e.firestore);return function(s,o,a,l,c,d,p){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new se(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){PT(p,d);const y=[];for(const I of p)y.push(RT(l,s,I));m={arrayValue:{values:y}}}else m=RT(l,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||PT(p,d),m=aB(a,o,p,d==="in"||d==="not-in");return xt.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ws(t,e,n){const r=e,i=Tp("where",t);return Ip._create(i,r,n)}class kv extends Rv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Y1(o,l),o=r_(o,l)}(e._query,n),new is(e.firestore,e.converter,r_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bv extends Pv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new se(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new se(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dc(s,o)}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Hl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function cB(t,e="asc"){const n=e,r=Tp("orderBy",t);return bv._create(r,n)}class Nv extends Pv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Nv(e,n,r)}_apply(e){return new is(e.firestore,e.converter,vf(e._query,this._limit,this._limitType))}}function hB(t){return Xj("limit",t),Nv._create("limit",t,"F")}function RT(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new se(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HR(e)&&n.indexOf("/")!==-1)throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(dt.fromString(n));if(!pe.isDocumentKey(r))throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Q0(t,new pe(r))}if(n instanceof $n)return Q0(t,n._key);throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_p(n)}.`)}function PT(t,e){if(!Array.isArray(t)||t.length===0)throw new se(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y1(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dB{convertValue(e,n="none"){switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return la(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Ev(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bc(e));default:return null}}convertTimestamp(e){const n=Xs(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dt.fromString(e);at(m1(r));const i=new Nc(r.get(1),r.get(3)),s=new pe(r.popFirst(5));return i.isEqual(n)||Yi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class X1 extends G1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Cd extends X1{data(e={}){return super.data(e)}}class J1{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cd(this._firestore,this._userDataWriter,r.key,r,new Vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:pB(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}class xv extends dB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,n)}}function Dm(t){t=zi(t,is);const e=zi(t.firestore,Al),n=wv(e),r=new xv(e);return Q1(t._query),Qj(n,t._query).then(i=>new J1(e,r,t,i))}function mB(t,e,n,...r){t=zi(t,$n);const i=zi(t.firestore,Al),s=Iv(i);let o;return o=typeof(e=St(e))=="string"||e instanceof vp?oB(s,"updateDoc",t._key,e,n,r):sB(s,"updateDoc",t._key,e),eP(i,[o.toMutation(t._key,gi.exists(!0))])}function Sf(t,e){const n=zi(t.firestore,Al),r=B1(t),i=fB(t.converter,e);return eP(n,[iB(Iv(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,gi.exists(!1))]).then(()=>r)}function Z1(t,...e){var n,r,i;t=St(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||AT(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(AT(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,c,d;if(t instanceof $n)c=zi(t.firestore,Al),d=sv(t._key.path),l={next:p=>{e[o]&&e[o](gB(c,t,p))},error:e[o+1],complete:e[o+2]};else{const p=zi(t,is);c=zi(p.firestore,Al),d=p._query;const m=new xv(c);l={next:y=>{e[o]&&e[o](new J1(c,m,p,y))},error:e[o+1],complete:e[o+2]},Q1(t._query)}return function(m,y,I,k){const x=new V1(k),S=new P1(y,x,I);return m.asyncQueue.enqueueAndForget(async()=>A1(await h_(m),S)),()=>{x.$a(),m.asyncQueue.enqueueAndForget(async()=>R1(await h_(m),S))}}(wv(c),d,a,l)}function eP(t,e){return function(r,i){const s=new Ws;return r.asyncQueue.enqueueAndForget(async()=>Mj(await Gj(r),i,s)),s.promise}(wv(t),e)}function gB(t,e,n){const r=n.docs.get(e._key),i=new xv(t);return new X1(t,i,e._key,r,new Vu(n.hasPendingWrites,n.fromCache),e.converter)}function Cf(){return new Sv("serverTimestamp")}(function(e,n=!0){(function(i){Wl=i})(ia),Wo(new Gs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Al(new gU(r.getProvider("auth-internal")),new wU(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new se(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),di(H0,"4.6.4",e),di(H0,"4.6.4","esm2017")})();const _B={apiKey:"AIzaSyAthJdZF_jDW8_WXgRB2hofK6sHg1jIybA",authDomain:"chat-application-968a4.firebaseapp.com",projectId:"chat-application-968a4",storageBucket:"chat-application-968a4.appspot.com",messagingSenderId:"776596104603",appId:"1:776596104603:web:996baf274e94d697376d3e",measurementId:"G-10BYDPLK65"},Dv=DC(_B),xi=eB(Dv);hU(Dv);const Es=SV(Dv),so=xD(t=>({cuser:Es.currentUser,isLoggedIn:!!Es.currentUser,loginError:"",unsubscribe:hM(Es,e=>{t({isLoggedIn:!!e,cuser:e})}),login:async e=>{const{email:n,password:r}=e;return aM(Es,n,r).then(()=>console.log(Es.currentUser)).catch(i=>{throw t({loginError:i.message}),i})},logout:()=>{dM(Es)},signUp:async(e,n,r)=>{const{email:i,password:s}=e;await oM(Es,i,s).then(o=>{ZE(o.user,{displayName:n,photoURL:r}),Sf(oi(xi,"users"),{displayName:n,photoURL:r,email:o.user.email,uid:o.user.uid}),console.log("done")}).catch(o=>{t({loginError:o.message})})},updateUser:async(e,n,r)=>{await ZE(e,{displayName:n,photoURL:r}),await Sf(oi(xi,"users"),{displayName:n,photoURL:r,email:e.email,uid:e.uid}),console.log("done")}})),yB=()=>{const t=so(c=>c.signUp),e=ra(),[n,r]=H.useState(""),[i,s]=H.useState(""),[o,a]=H.useState(""),l=async c=>{c.preventDefault(),t({email:n,password:i},o,"photourl"),e("/chatApplication")};return G.jsx("div",{className:"d-flex justify-content-center align-items-center px-2",style:{height:"100dvh"},children:G.jsxs("div",{className:"signup-container form-container",children:[G.jsx("h1",{className:"text-center mb-4",children:"chat App"}),G.jsxs("form",{className:"signup-form d-grid",onSubmit:l,children:[G.jsxs("div",{className:"mb-3",children:[G.jsx("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email Address"}),G.jsx("input",{type:"email",className:"form-control input",id:"exampleInputEmail1","aria-describedby":"emailHelp",onChange:c=>r(c.target.value)})]}),G.jsxs("div",{className:"mb-3",children:[G.jsx("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),G.jsx("input",{type:"password",className:"form-control input",id:"exampleInputPassword1",onChange:c=>s(c.target.value)})]}),G.jsxs("div",{className:" mb-3",children:[G.jsx("label",{htmlFor:"full-name",className:"form-label",children:"Full Name"}),G.jsx("input",{type:"text",className:"form-control input",id:"full-name",onChange:c=>a(c.target.value)})]}),G.jsx("button",{type:"submit",className:"btn btn--primary mb-3",children:"Sign up"}),G.jsxs("div",{className:"no-wrap",children:[G.jsx("span",{className:"me-2",children:"already have an account"}),G.jsx(fC,{to:"/chatApplication/",children:"login"})]})]})]})})},vB=()=>{const[t,e]=H.useState(!1),n=ra(),[r,i]=H.useState(""),[s,o]=H.useState(""),a=so(c=>c.login),l=async c=>{c.preventDefault(),e(!0);try{await a({email:r,password:s}),e(!1),n("/chatApplication/home")}catch(d){console.log("login failed ",d)}};return G.jsx("div",{className:"d-flex justify-content-center align-items-center px-2",style:{height:"100dvh"},children:G.jsxs("div",{className:"login-container form-container",children:[G.jsx("h1",{className:"text-center mb-4",children:"chat App"}),G.jsxs("form",{className:"login-form d-grid",children:[G.jsxs("div",{className:"mb-3",children:[G.jsx("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),G.jsx("input",{type:"email",className:"form-control input",id:"exampleInputEmail1","aria-describedby":"emailHelp",onChange:c=>i(c.target.value)})]}),G.jsxs("div",{className:"mb-3",children:[G.jsx("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),G.jsx("input",{type:"password",className:"form-control input",id:"exampleInputPassword1",onChange:c=>o(c.target.value)})]}),G.jsxs("button",{type:"submit",className:"btn btn--primary mb-3 ",onClick:l,children:[t&&G.jsx("div",{className:"spinner-border me-2",style:{height:"1rem",width:"1rem",fontSize:".5rem"},role:"status"}),G.jsx("span",{children:"Login"})]}),G.jsxs("div",{className:"no-wrap",children:[G.jsx("span",{className:"me-2",children:"do not have an account"}),G.jsx(fC,{to:"/chatApplication/signup",children:"create one"})]})]})]})})},tP="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAUFBQkGCQkJCQwTDg4MDg4ZEg4SEBcOEBAXEBcXEBQXFBQaFxMTFxoUFxgjGBwZHxoYIRgjGCMiIiQnKCMXJzUBCQkFCQkJDAkJEyEXDhoiHAwYKSIoGiIkIiIZLCIoISIUIyIaHx8aGhwYHCIaJCQjDhkkIRcvGRoXIiEnHxckKv/AABEIADAAMAMBIgACEQEDEQH/xAB1AAACAQUBAAAAAAAAAAAAAAAFBgcAAQIDBAgQAAEDAgMFBwQDAQAAAAAAAAECAwQAEQUhMQYScYGhFCIyQVFhwRMjQlI0Q9HhAQEBAQAAAAAAAAAAAAAAAAABAgARAQEBAQEBAAAAAAAAAAAAAAEAAjERIf/aAAwDAQACEQMRAD8A9lEgAk0m4xtpuktwxe39h+BVbaYwU2htm1xdfwKRcPhma+2yDYHU+gGZpCjW/vhdC582epQ33HD5hNz0FYCRMgEZuNel7pFGp+N9jJiwkhCWzYqte5Gtvkm5NaoW0K3D9GYErbXkTa1r+o0I6immL4Vtq4hQRLG8n9wLEcRT406l1KVoN0qGRFQzi+H9gfLY8JF031scrcjTHsdjBju9lcPcc8Psr/tCVG/vjLGKyDIlPuE3us24DIV3bNOhuYm/5pUBxyV1tQ3EGOzyHm9N1aqKYPhzakqmSTutNnLy3inrYHIAammk7Cp0dUZ91teoUeYJuDzrnbZVIUlpAupZsBTU7jsSaSmTHJSD3Vaq+COAJrFvGoUL+JHNzqomxtxJUeWQrW8LVtS4C+02Dctt589OgvzpdacLS0rGqSCOVMWLQm5LRnxSSlR+4k6g6E+1vMcxlS4hJWoJGpIrWez1tthSkLEtAyUAFexGQpexLEWno8aMxfdbHeuLXIFh8mpedaS6lSFi6VDMGo7xjY52OVORe+j9fyT/ALQNWsvSSqqs3GltGy0lJ9CLVZKFLNkgk00RnBcRbhl5D9y26nMAXz06g0Q2Rwgy5AdUPts9T5Cr4TslImEKeH02/fxHgKk2JEbiNpaaFkpoWsyvb//Z",f_=({id:t,className:e,lastMessage:n,name:r})=>{const i=so(o=>o.cuser),s=ra();if(i)return G.jsx(G.Fragment,{children:G.jsxs("div",{className:`contact-wrapper ${e}`,onClick:o=>{o.preventDefault(),s(`/chatApplication/conversation/${t}/${r}`)},children:[G.jsxs("div",{className:"contact",children:[G.jsx("img",{className:"contact__image account-image",src:tP,alt:""}),G.jsx("h2",{className:"contact__name",children:r})]}),G.jsx("div",{className:"last-message",children:n})]})})},wB=({activePage:t})=>{const[e,n]=H.useState([]),[r,i]=H.useState([]),s=so(o=>o.cuser);return H.useEffect(()=>{if(!s)return;const o=sessionStorage.getItem(`contacts_${s.uid}`);o!==null&&n(JSON.parse(o));const a=sessionStorage.getItem(`chats_${s.uid}`);a!==null&&i(JSON.parse(a));const l=Ka(oi(xi,"conversations"),ws("participantIds","array-contains",s.uid)),c=Z1(l,d=>{const p=d.docs.map(y=>({...y.data(),id:y.id}));n(p);const m=p.filter(y=>y.lastMessage&&y.lastMessage.trim()!=="");i(m),sessionStorage.setItem(`contacts_${s.uid}`,JSON.stringify(p)),sessionStorage.setItem(`chats_${s.uid}`,JSON.stringify(m))},d=>{console.error("Error getting documents:",d)});return()=>c()},[s]),t==="contacts"?G.jsx("div",{className:"contacts",children:e==null?void 0:e.map(({id:o,participantIds:a,participants:l})=>{const c=a[0]===(s==null?void 0:s.uid)?l[1].displayName:l[0].displayName;return G.jsx(f_,{id:o,name:c},o)})}):G.jsx("div",{className:"chats",children:r==null?void 0:r.map(({id:o,lastMessage:a,participantIds:l,participants:c})=>{const d=l[0]===(s==null?void 0:s.uid)?c[1].displayName:c[0].displayName;return G.jsx(f_,{id:o,lastMessage:a,name:d},o)})})},EB=({className:t,visible:e})=>G.jsxs("ul",{className:`dropdown ${e?"visible":""} ${t||""}`,children:[G.jsx("li",{className:"dropdown-item",children:"New Group"}),G.jsx("li",{className:"dropdown-item",children:"New Broadcast"}),G.jsx("li",{className:"dropdown-item",children:"WhatsApp Web"}),G.jsx("li",{className:"dropdown-item",children:"Starred Messages"}),G.jsx("li",{className:"dropdown-item",children:"Settings"})]}),TB=({setActivePage:t,activePage:e})=>{const n=so(s=>s.cuser),[r,i]=H.useState(!1);return G.jsxs("nav",{className:"navbar gap-3  fixed-top p-0",children:[G.jsxs("div",{className:"container-fluid",children:[G.jsxs("div",{className:"account-name navbar-brand d-flex align-items-center gap-2",children:[G.jsx("img",{src:tP,className:"account-image",alt:""}),G.jsx("p",{className:"m-0 user-name",children:n==null?void 0:n.displayName})]}),G.jsx("i",{className:"border-0 p-0 bi bi-three-dots-vertical fs-2",role:"button",onClick:()=>i(!r)})]}),G.jsxs("div",{className:"navbar-tabs-container nav-tabs container-fluid justify-content-around",children:[G.jsx("a",{className:e==="chats"?"nav-tab active":"nav-tab",style:{color:"white"},onClick:()=>t("chats"),children:"Chats"}),G.jsx("a",{className:e==="contacts"?"nav-tab active":"nav-tab",style:{color:"white"},onClick:()=>t("contacts"),children:"Contacts"})]}),G.jsx(EB,{visible:r})]})},IB=({onclick:t})=>{const[e,n]=H.useState(""),[r,i]=H.useState(!1),[s,o]=H.useState([]),a=so(p=>p.cuser);if(!a)return null;const l=async()=>{i(!0);const p=oi(xi,"conversations"),m=Ka(p,ws("participantIds","array-contains",a.uid)),y=await Dm(m);o([]);try{let I;e.includes("@")?I=Ka(oi(xi,"users"),ws("email","==",e),ws("uid","!=",a.uid)):I=Ka(oi(xi,"users"),ws("displayName",">=",e),ws("displayName","<=",e+""),ws("uid","!=",a.uid));const x=(await Dm(I)).docs.map(E=>({id:E.id,...E.data()})),S=await Promise.all(x.map(async E=>{y.forEach(V=>console.log(V.data()));let R=!1;return y.forEach(V=>{V.data().participantIds.includes(E.uid)&&(R=!0)}),{...E,conversationExists:R}}));console.log(S),o(S)}catch(I){console.error("Error fetching users: ",I)}i(!1)},c=async p=>{i(!0);try{const m=await Dm(Ka(oi(xi,"users"),ws("uid","==",p)));if(m.empty)console.error("No such user!");else{const y=m.docs[0].data();await Sf(oi(xi,"conversations"),{initialedBy:a.uid,participantIds:[a.uid,p],initiatedAt:Cf(),lastUpdatedAt:Cf(),participants:[{displayName:a.displayName,email:a.email,photoURL:a.photoURL},{displayName:y.displayName,email:y.email,photoURL:y.photoURL}]})}}catch(m){console.error("Error adding conversation: ",m)}i(!1)},d=p=>{p.preventDefault(),l()};return G.jsxs(G.Fragment,{children:[G.jsx("i",{className:"bi bi-arrow-left fs-2 text-black",role:"button",onClick:t}),G.jsxs("div",{className:"p-4  mx-auto",style:{maxWidth:"50rem"},children:[G.jsx("form",{onSubmit:d,children:G.jsxs("div",{className:"d-flex gap-2",children:[G.jsx("input",{type:"text",className:"form-control input",id:"searchTerm",placeholder:"Search users by email or name",value:e,onChange:p=>n(p.target.value)}),G.jsx("button",{type:"submit",className:"btn btn--primary m-0",children:r?G.jsx("div",{className:"spinner-border",style:{height:"1rem",width:"1rem",fontSize:".5rem",marginInline:"8px"},role:"status"}):"Search"})]})}),s.length>0&&G.jsx("ul",{className:" mt-3 p-0",children:s.map(p=>G.jsxs("li",{className:"contact-item d-flex justify-content-between align-items-center mb-3",children:[p.displayName,!p.conversationExists&&G.jsx("button",{className:"btn btn--primary m-0",onClick:()=>c(p.uid),children:"Add to contacts"})]},p.id))})]})]})},SB=()=>{const t=so(s=>s.isLoggedIn),[e,n]=H.useState(!1),[r,i]=H.useState("chats");return t?e?G.jsx(G.Fragment,{children:G.jsx("div",{className:"p-2",children:G.jsx(IB,{onclick:()=>n(!1)})})}):G.jsxs("div",{style:{paddingTop:"104px"},children:[G.jsx(TB,{setActivePage:i,activePage:r}),G.jsx(wB,{activePage:r}),G.jsx("button",{className:"btn btn--primary btn-add-user",onClick:()=>n(!0),children:"add contact"})]}):G.jsx(Ox,{to:"/"})},CB=({children:t})=>{const e=ra();return H.useEffect(()=>{Es.currentUser||e("/chatApplication/")},[]),G.jsx(G.Fragment,{children:t})},AB=()=>{const{id:t,name:e}=Ex(),n=ra(),r=so(m=>m.cuser),[i,s]=H.useState(""),[o,a]=H.useState([]),l=B1(oi(xi,"conversations"),t),c=oi(l,"messages"),d=H.useRef(null),p=async m=>{if(m.preventDefault(),i.trim()===""){alert("Enter valid message");return}s("");const{uid:y,displayName:I,photoURL:k}=r;await Sf(c,{text:i,name:I,avatar:k,createdAt:Cf(),uid:y}),await mB(l,{lastMessage:i,lastMessageTimestamp:Cf()})};return H.useEffect(()=>{const m=Ka(c,cB("createdAt","desc"),hB(50)),y=Z1(m,I=>{const k=I.docs.map(S=>({...S.data(),id:S.id})),x=k.sort((S,E)=>S.createdAt-E.createdAt);console.log(k),a(x)});return()=>y},[]),H.useEffect(()=>{d.current&&d.current.scrollIntoView({behavior:"instant"})},[o]),G.jsx(G.Fragment,{children:G.jsxs("div",{className:"conversation-container",style:{paddingBottom:"40px",paddingTop:"100px"},children:[G.jsxs("div",{className:"fixed-top d-flex align-items-center px-2",style:{background:"white"},children:[G.jsx("i",{className:"bi bi-arrow-left fs-2 text-black",role:"button",onClick:()=>n("/chatApplication/home")}),G.jsx(f_,{id:t,name:e})]}),G.jsxs("div",{className:"messages-container d-flex flex-column gap-2  mx-2",children:[o&&o.map(m=>G.jsx("div",{className:`message-box ${m.uid===r.uid?"sent-message":"recieved-message"}`,children:m.text},m.id)),G.jsx("div",{ref:d})]}),G.jsxs("form",{className:"send-message d-flex  fixed-bottom",onSubmit:p,children:[G.jsx("input",{className:"form-control input",value:i,onChange:m=>s(m.target.value)}),G.jsx("button",{className:"btn btn--primary m-0",type:"submit",children:"Send"})]})]})})},RB=zx([{path:"/chatApplication/",element:G.jsx(iD,{}),errorElement:G.jsx(sD,{}),children:[{path:"signup",element:G.jsx(yB,{})},{path:"conversation/:id/:name",element:G.jsx(AB,{})},{path:"",element:G.jsx(vB,{})},{path:"home",element:G.jsx(CB,{children:G.jsx(SB,{})})}]}]);var PB={exports:{}},Cn="top",rr="bottom",ir="right",An="left",Sp="auto",Gl=[Cn,rr,ir,An],Zo="start",Pl="end",nP="clippingParents",Ov="viewport",ba="popper",rP="reference",p_=Gl.reduce(function(t,e){return t.concat([e+"-"+Zo,e+"-"+Pl])},[]),Lv=[].concat(Gl,[Sp]).reduce(function(t,e){return t.concat([e,e+"-"+Zo,e+"-"+Pl])},[]),iP="beforeRead",sP="read",oP="afterRead",aP="beforeMain",lP="main",uP="afterMain",cP="beforeWrite",hP="write",dP="afterWrite",fP=[iP,sP,oP,aP,lP,uP,cP,hP,dP];function wi(t){return t?(t.nodeName||"").toLowerCase():null}function sr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ea(t){var e=sr(t).Element;return t instanceof e||t instanceof Element}function Er(t){var e=sr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Mv(t){if(typeof ShadowRoot>"u")return!1;var e=sr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function kB(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Er(s)||!wi(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function bB(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Er(i)||!wi(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const Vv={name:"applyStyles",enabled:!0,phase:"write",fn:kB,effect:bB,requires:["computeStyles"]};function yi(t){return t.split("-")[0]}var Mo=Math.max,Af=Math.min,kl=Math.round;function m_(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function pP(){return!/^((?!chrome|android).)*safari/i.test(m_())}function bl(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Er(t)&&(i=t.offsetWidth>0&&kl(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&kl(r.height)/t.offsetHeight||1);var o=ea(t)?sr(t):window,a=o.visualViewport,l=!pP()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,d=(r.top+(l&&a?a.offsetTop:0))/s,p=r.width/i,m=r.height/s;return{width:p,height:m,top:d,right:c+p,bottom:d+m,left:c,x:c,y:d}}function Fv(t){var e=bl(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function mP(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Mv(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ji(t){return sr(t).getComputedStyle(t)}function NB(t){return["table","td","th"].indexOf(wi(t))>=0}function oo(t){return((ea(t)?t.ownerDocument:t.document)||window.document).documentElement}function Cp(t){return wi(t)==="html"?t:t.assignedSlot||t.parentNode||(Mv(t)?t.host:null)||oo(t)}function kT(t){return!Er(t)||Ji(t).position==="fixed"?null:t.offsetParent}function xB(t){var e=/firefox/i.test(m_()),n=/Trident/i.test(m_());if(n&&Er(t)){var r=Ji(t);if(r.position==="fixed")return null}var i=Cp(t);for(Mv(i)&&(i=i.host);Er(i)&&["html","body"].indexOf(wi(i))<0;){var s=Ji(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function oh(t){for(var e=sr(t),n=kT(t);n&&NB(n)&&Ji(n).position==="static";)n=kT(n);return n&&(wi(n)==="html"||wi(n)==="body"&&Ji(n).position==="static")?e:n||xB(t)||e}function Uv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function tc(t,e,n){return Mo(t,Af(e,n))}function DB(t,e,n){var r=tc(t,e,n);return r>n?n:r}function gP(){return{top:0,right:0,bottom:0,left:0}}function _P(t){return Object.assign({},gP(),t)}function yP(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var OB=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,_P(typeof e!="number"?e:yP(e,Gl))};function LB(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=yi(n.placement),l=Uv(a),c=[An,ir].indexOf(a)>=0,d=c?"height":"width";if(!(!s||!o)){var p=OB(i.padding,n),m=Fv(s),y=l==="y"?Cn:An,I=l==="y"?rr:ir,k=n.rects.reference[d]+n.rects.reference[l]-o[l]-n.rects.popper[d],x=o[l]-n.rects.reference[l],S=oh(s),E=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,R=k/2-x/2,V=p[y],B=E-m[d]-p[I],b=E/2-m[d]/2+R,C=tc(V,b,B),v=l;n.modifiersData[r]=(e={},e[v]=C,e.centerOffset=C-b,e)}}function MB(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||mP(e.elements.popper,i)&&(e.elements.arrow=i))}const vP={name:"arrow",enabled:!0,phase:"main",fn:LB,effect:MB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Nl(t){return t.split("-")[1]}var VB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function FB(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:kl(n*i)/i||0,y:kl(r*i)/i||0}}function bT(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,p=t.isFixed,m=o.x,y=m===void 0?0:m,I=o.y,k=I===void 0?0:I,x=typeof d=="function"?d({x:y,y:k}):{x:y,y:k};y=x.x,k=x.y;var S=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),R=An,V=Cn,B=window;if(c){var b=oh(n),C="clientHeight",v="clientWidth";if(b===sr(n)&&(b=oo(n),Ji(b).position!=="static"&&a==="absolute"&&(C="scrollHeight",v="scrollWidth")),b=b,i===Cn||(i===An||i===ir)&&s===Pl){V=rr;var T=p&&b===B&&B.visualViewport?B.visualViewport.height:b[C];k-=T-r.height,k*=l?1:-1}if(i===An||(i===Cn||i===rr)&&s===Pl){R=ir;var A=p&&b===B&&B.visualViewport?B.visualViewport.width:b[v];y-=A-r.width,y*=l?1:-1}}var N=Object.assign({position:a},c&&VB),M=d===!0?FB({x:y,y:k},sr(n)):{x:y,y:k};if(y=M.x,k=M.y,l){var P;return Object.assign({},N,(P={},P[V]=E?"0":"",P[R]=S?"0":"",P.transform=(B.devicePixelRatio||1)<=1?"translate("+y+"px, "+k+"px)":"translate3d("+y+"px, "+k+"px, 0)",P))}return Object.assign({},N,(e={},e[V]=E?k+"px":"",e[R]=S?y+"px":"",e.transform="",e))}function UB(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:yi(e.placement),variation:Nl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,bT(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,bT(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const jv={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:UB,data:{}};var nd={passive:!0};function jB(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=sr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(d){d.addEventListener("scroll",n.update,nd)}),a&&l.addEventListener("resize",n.update,nd),function(){s&&c.forEach(function(d){d.removeEventListener("scroll",n.update,nd)}),a&&l.removeEventListener("resize",n.update,nd)}}const Bv={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jB,data:{}};var BB={left:"right",right:"left",bottom:"top",top:"bottom"};function Ad(t){return t.replace(/left|right|bottom|top/g,function(e){return BB[e]})}var $B={start:"end",end:"start"};function NT(t){return t.replace(/start|end/g,function(e){return $B[e]})}function $v(t){var e=sr(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function zv(t){return bl(oo(t)).left+$v(t).scrollLeft}function zB(t,e){var n=sr(t),r=oo(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=pP();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+zv(t),y:l}}function WB(t){var e,n=oo(t),r=$v(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Mo(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Mo(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+zv(t),l=-r.scrollTop;return Ji(i||n).direction==="rtl"&&(a+=Mo(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Wv(t){var e=Ji(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function wP(t){return["html","body","#document"].indexOf(wi(t))>=0?t.ownerDocument.body:Er(t)&&Wv(t)?t:wP(Cp(t))}function nc(t,e){var n;e===void 0&&(e=[]);var r=wP(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=sr(r),o=i?[s].concat(s.visualViewport||[],Wv(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(nc(Cp(o)))}function g_(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function HB(t,e){var n=bl(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function xT(t,e,n){return e===Ov?g_(zB(t,n)):ea(e)?HB(e,n):g_(WB(oo(t)))}function qB(t){var e=nc(Cp(t)),n=["absolute","fixed"].indexOf(Ji(t).position)>=0,r=n&&Er(t)?oh(t):t;return ea(r)?e.filter(function(i){return ea(i)&&mP(i,r)&&wi(i)!=="body"}):[]}function KB(t,e,n,r){var i=e==="clippingParents"?qB(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var d=xT(t,c,r);return l.top=Mo(d.top,l.top),l.right=Af(d.right,l.right),l.bottom=Af(d.bottom,l.bottom),l.left=Mo(d.left,l.left),l},xT(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function EP(t){var e=t.reference,n=t.element,r=t.placement,i=r?yi(r):null,s=r?Nl(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Cn:l={x:o,y:e.y-n.height};break;case rr:l={x:o,y:e.y+e.height};break;case ir:l={x:e.x+e.width,y:a};break;case An:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?Uv(i):null;if(c!=null){var d=c==="y"?"height":"width";switch(s){case Zo:l[c]=l[c]-(e[d]/2-n[d]/2);break;case Pl:l[c]=l[c]+(e[d]/2-n[d]/2);break}}return l}function xl(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?nP:a,c=n.rootBoundary,d=c===void 0?Ov:c,p=n.elementContext,m=p===void 0?ba:p,y=n.altBoundary,I=y===void 0?!1:y,k=n.padding,x=k===void 0?0:k,S=_P(typeof x!="number"?x:yP(x,Gl)),E=m===ba?rP:ba,R=t.rects.popper,V=t.elements[I?E:m],B=KB(ea(V)?V:V.contextElement||oo(t.elements.popper),l,d,o),b=bl(t.elements.reference),C=EP({reference:b,element:R,strategy:"absolute",placement:i}),v=g_(Object.assign({},R,C)),T=m===ba?v:b,A={top:B.top-T.top+S.top,bottom:T.bottom-B.bottom+S.bottom,left:B.left-T.left+S.left,right:T.right-B.right+S.right},N=t.modifiersData.offset;if(m===ba&&N){var M=N[i];Object.keys(A).forEach(function(P){var ye=[ir,rr].indexOf(P)>=0?1:-1,Je=[Cn,rr].indexOf(P)>=0?"y":"x";A[P]+=M[Je]*ye})}return A}function GB(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Lv:l,d=Nl(r),p=d?a?p_:p_.filter(function(I){return Nl(I)===d}):Gl,m=p.filter(function(I){return c.indexOf(I)>=0});m.length===0&&(m=p);var y=m.reduce(function(I,k){return I[k]=xl(t,{placement:k,boundary:i,rootBoundary:s,padding:o})[yi(k)],I},{});return Object.keys(y).sort(function(I,k){return y[I]-y[k]})}function QB(t){if(yi(t)===Sp)return[];var e=Ad(t);return[NT(t),e,NT(e)]}function YB(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,d=n.boundary,p=n.rootBoundary,m=n.altBoundary,y=n.flipVariations,I=y===void 0?!0:y,k=n.allowedAutoPlacements,x=e.options.placement,S=yi(x),E=S===x,R=l||(E||!I?[Ad(x)]:QB(x)),V=[x].concat(R).reduce(function(We,Ke){return We.concat(yi(Ke)===Sp?GB(e,{placement:Ke,boundary:d,rootBoundary:p,padding:c,flipVariations:I,allowedAutoPlacements:k}):Ke)},[]),B=e.rects.reference,b=e.rects.popper,C=new Map,v=!0,T=V[0],A=0;A<V.length;A++){var N=V[A],M=yi(N),P=Nl(N)===Zo,ye=[Cn,rr].indexOf(M)>=0,Je=ye?"width":"height",Ze=xl(e,{placement:N,boundary:d,rootBoundary:p,altBoundary:m,padding:c}),we=ye?P?ir:An:P?rr:Cn;B[Je]>b[Je]&&(we=Ad(we));var Z=Ad(we),le=[];if(s&&le.push(Ze[M]<=0),a&&le.push(Ze[we]<=0,Ze[Z]<=0),le.every(function(We){return We})){T=N,v=!1;break}C.set(N,le)}if(v)for(var de=I?3:1,Re=function(Ke){var et=V.find(function(tt){var Dt=C.get(tt);if(Dt)return Dt.slice(0,Ke).every(function(Ot){return Ot})});if(et)return T=et,"break"},Ie=de;Ie>0;Ie--){var z=Re(Ie);if(z==="break")break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}}const TP={name:"flip",enabled:!0,phase:"main",fn:YB,requiresIfExists:["offset"],data:{_skip:!1}};function DT(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function OT(t){return[Cn,ir,rr,An].some(function(e){return t[e]>=0})}function XB(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=xl(e,{elementContext:"reference"}),a=xl(e,{altBoundary:!0}),l=DT(o,r),c=DT(a,i,s),d=OT(l),p=OT(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}const IP={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:XB};function JB(t,e,n){var r=yi(t),i=[An,Cn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[An,ir].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function ZB(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=Lv.reduce(function(d,p){return d[p]=JB(p,e.rects,s),d},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const SP={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ZB};function e9(t){var e=t.state,n=t.name;e.modifiersData[n]=EP({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Hv={name:"popperOffsets",enabled:!0,phase:"read",fn:e9,data:{}};function t9(t){return t==="x"?"y":"x"}function n9(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,p=n.padding,m=n.tether,y=m===void 0?!0:m,I=n.tetherOffset,k=I===void 0?0:I,x=xl(e,{boundary:l,rootBoundary:c,padding:p,altBoundary:d}),S=yi(e.placement),E=Nl(e.placement),R=!E,V=Uv(S),B=t9(V),b=e.modifiersData.popperOffsets,C=e.rects.reference,v=e.rects.popper,T=typeof k=="function"?k(Object.assign({},e.rects,{placement:e.placement})):k,A=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(b){if(s){var P,ye=V==="y"?Cn:An,Je=V==="y"?rr:ir,Ze=V==="y"?"height":"width",we=b[V],Z=we+x[ye],le=we-x[Je],de=y?-v[Ze]/2:0,Re=E===Zo?C[Ze]:v[Ze],Ie=E===Zo?-v[Ze]:-C[Ze],z=e.elements.arrow,We=y&&z?Fv(z):{width:0,height:0},Ke=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:gP(),et=Ke[ye],tt=Ke[Je],Dt=tc(0,C[Ze],We[Ze]),Ot=R?C[Ze]/2-de-Dt-et-A.mainAxis:Re-Dt-et-A.mainAxis,lr=R?-C[Ze]/2+de+Dt+tt+A.mainAxis:Ie+Dt+tt+A.mainAxis,oe=e.elements.arrow&&oh(e.elements.arrow),rt=oe?V==="y"?oe.clientTop||0:oe.clientLeft||0:0,sn=(P=N==null?void 0:N[V])!=null?P:0,Qr=we+Ot-sn-rt,Ti=we+lr-sn,Lt=tc(y?Af(Z,Qr):Z,we,y?Mo(le,Ti):le);b[V]=Lt,M[V]=Lt-we}if(a){var Yr,Cr=V==="x"?Cn:An,kn=V==="x"?rr:ir,bn=b[B],ur=B==="y"?"height":"width",Ii=bn+x[Cr],ss=bn-x[kn],_n=[Cn,An].indexOf(S)!==-1,Nn=(Yr=N==null?void 0:N[B])!=null?Yr:0,Ar=_n?Ii:bn-C[ur]-v[ur]-Nn+A.altAxis,Ye=_n?bn+C[ur]+v[ur]-Nn-A.altAxis:ss,Pe=y&&_n?DB(Ar,bn,Ye):tc(y?Ar:Ii,bn,y?Ye:ss);b[B]=Pe,M[B]=Pe-bn}e.modifiersData[r]=M}}const CP={name:"preventOverflow",enabled:!0,phase:"main",fn:n9,requiresIfExists:["offset"]};function r9(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function i9(t){return t===sr(t)||!Er(t)?$v(t):r9(t)}function s9(t){var e=t.getBoundingClientRect(),n=kl(e.width)/t.offsetWidth||1,r=kl(e.height)/t.offsetHeight||1;return n!==1||r!==1}function o9(t,e,n){n===void 0&&(n=!1);var r=Er(e),i=Er(e)&&s9(e),s=oo(e),o=bl(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((wi(e)!=="body"||Wv(s))&&(a=i9(e)),Er(e)?(l=bl(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=zv(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function a9(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function l9(t){var e=a9(t);return fP.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function u9(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function c9(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var LT={placement:"bottom",modifiers:[],strategy:"absolute"};function MT(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Ap(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?LT:i;return function(a,l,c){c===void 0&&(c=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},LT,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],m=!1,y={state:d,setOptions:function(S){var E=typeof S=="function"?S(d.options):S;k(),d.options=Object.assign({},s,d.options,E),d.scrollParents={reference:ea(a)?nc(a):a.contextElement?nc(a.contextElement):[],popper:nc(l)};var R=l9(c9([].concat(r,d.options.modifiers)));return d.orderedModifiers=R.filter(function(V){return V.enabled}),I(),y.update()},forceUpdate:function(){if(!m){var S=d.elements,E=S.reference,R=S.popper;if(MT(E,R)){d.rects={reference:o9(E,oh(R),d.options.strategy==="fixed"),popper:Fv(R)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(A){return d.modifiersData[A.name]=Object.assign({},A.data)});for(var V=0;V<d.orderedModifiers.length;V++){if(d.reset===!0){d.reset=!1,V=-1;continue}var B=d.orderedModifiers[V],b=B.fn,C=B.options,v=C===void 0?{}:C,T=B.name;typeof b=="function"&&(d=b({state:d,options:v,name:T,instance:y})||d)}}}},update:u9(function(){return new Promise(function(x){y.forceUpdate(),x(d)})}),destroy:function(){k(),m=!0}};if(!MT(a,l))return y;y.setOptions(c).then(function(x){!m&&c.onFirstUpdate&&c.onFirstUpdate(x)});function I(){d.orderedModifiers.forEach(function(x){var S=x.name,E=x.options,R=E===void 0?{}:E,V=x.effect;if(typeof V=="function"){var B=V({state:d,name:S,instance:y,options:R}),b=function(){};p.push(B||b)}})}function k(){p.forEach(function(x){return x()}),p=[]}return y}}var h9=Ap(),d9=[Bv,Hv,jv,Vv],f9=Ap({defaultModifiers:d9}),p9=[Bv,Hv,jv,Vv,SP,TP,CP,vP,IP],m9=Ap({defaultModifiers:p9});const g9=Object.freeze(Object.defineProperty({__proto__:null,afterMain:uP,afterRead:oP,afterWrite:dP,applyStyles:Vv,arrow:vP,auto:Sp,basePlacements:Gl,beforeMain:aP,beforeRead:iP,beforeWrite:cP,bottom:rr,clippingParents:nP,computeStyles:jv,createPopper:m9,createPopperBase:h9,createPopperLite:f9,detectOverflow:xl,end:Pl,eventListeners:Bv,flip:TP,hide:IP,left:An,main:lP,modifierPhases:fP,offset:SP,placements:Lv,popper:ba,popperGenerator:Ap,popperOffsets:Hv,preventOverflow:CP,read:sP,reference:rP,right:ir,start:Zo,top:Cn,variationPlacements:p_,viewport:Ov,write:hP},Symbol.toStringTag,{value:"Module"})),_9=KP(g9);/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r(_9)})(qP,function(n){function r(O){const h=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(O){for(const _ in O)if(_!=="default"){const D=Object.getOwnPropertyDescriptor(O,_);Object.defineProperty(h,_,D.get?D:{enumerable:!0,get:()=>O[_]})}}return h.default=O,Object.freeze(h)}const i=r(n),s=new Map,o={set(O,h,_){s.has(O)||s.set(O,new Map);const D=s.get(O);D.has(h)||D.size===0?D.set(h,_):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(D.keys())[0]}.`)},get:(O,h)=>s.has(O)&&s.get(O).get(h)||null,remove(O,h){if(!s.has(O))return;const _=s.get(O);_.delete(h),_.size===0&&s.delete(O)}},a="transitionend",l=O=>(O&&window.CSS&&window.CSS.escape&&(O=O.replace(/#([^\s"#']+)/g,(h,_)=>`#${CSS.escape(_)}`)),O),c=O=>{O.dispatchEvent(new Event(a))},d=O=>!(!O||typeof O!="object")&&(O.jquery!==void 0&&(O=O[0]),O.nodeType!==void 0),p=O=>d(O)?O.jquery?O[0]:O:typeof O=="string"&&O.length>0?document.querySelector(l(O)):null,m=O=>{if(!d(O)||O.getClientRects().length===0)return!1;const h=getComputedStyle(O).getPropertyValue("visibility")==="visible",_=O.closest("details:not([open])");if(!_)return h;if(_!==O){const D=O.closest("summary");if(D&&D.parentNode!==_||D===null)return!1}return h},y=O=>!O||O.nodeType!==Node.ELEMENT_NODE||!!O.classList.contains("disabled")||(O.disabled!==void 0?O.disabled:O.hasAttribute("disabled")&&O.getAttribute("disabled")!=="false"),I=O=>{if(!document.documentElement.attachShadow)return null;if(typeof O.getRootNode=="function"){const h=O.getRootNode();return h instanceof ShadowRoot?h:null}return O instanceof ShadowRoot?O:O.parentNode?I(O.parentNode):null},k=()=>{},x=O=>{O.offsetHeight},S=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E=[],R=()=>document.documentElement.dir==="rtl",V=O=>{var h;h=()=>{const _=S();if(_){const D=O.NAME,q=_.fn[D];_.fn[D]=O.jQueryInterface,_.fn[D].Constructor=O,_.fn[D].noConflict=()=>(_.fn[D]=q,O.jQueryInterface)}},document.readyState==="loading"?(E.length||document.addEventListener("DOMContentLoaded",()=>{for(const _ of E)_()}),E.push(h)):h()},B=(O,h=[],_=O)=>typeof O=="function"?O(...h):_,b=(O,h,_=!0)=>{if(!_)return void B(O);const D=(ae=>{if(!ae)return 0;let{transitionDuration:De,transitionDelay:_t}=window.getComputedStyle(ae);const Ln=Number.parseFloat(De),Gn=Number.parseFloat(_t);return Ln||Gn?(De=De.split(",")[0],_t=_t.split(",")[0],1e3*(Number.parseFloat(De)+Number.parseFloat(_t))):0})(h)+5;let q=!1;const ee=({target:ae})=>{ae===h&&(q=!0,h.removeEventListener(a,ee),B(O))};h.addEventListener(a,ee),setTimeout(()=>{q||c(h)},D)},C=(O,h,_,D)=>{const q=O.length;let ee=O.indexOf(h);return ee===-1?!_&&D?O[q-1]:O[0]:(ee+=_?1:-1,D&&(ee=(ee+q)%q),O[Math.max(0,Math.min(ee,q-1))])},v=/[^.]*(?=\..*)\.|.*/,T=/\..*/,A=/::\d+$/,N={};let M=1;const P={mouseenter:"mouseover",mouseleave:"mouseout"},ye=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Je(O,h){return h&&`${h}::${M++}`||O.uidEvent||M++}function Ze(O){const h=Je(O);return O.uidEvent=h,N[h]=N[h]||{},N[h]}function we(O,h,_=null){return Object.values(O).find(D=>D.callable===h&&D.delegationSelector===_)}function Z(O,h,_){const D=typeof h=="string",q=D?_:h||_;let ee=Ie(O);return ye.has(ee)||(ee=O),[D,q,ee]}function le(O,h,_,D,q){if(typeof h!="string"||!O)return;let[ee,ae,De]=Z(h,_,D);h in P&&(ae=(yo=>function(Lr){if(!Lr.relatedTarget||Lr.relatedTarget!==Lr.delegateTarget&&!Lr.delegateTarget.contains(Lr.relatedTarget))return yo.call(this,Lr)})(ae));const _t=Ze(O),Ln=_t[De]||(_t[De]={}),Gn=we(Ln,ae,ee?_:null);if(Gn)return void(Gn.oneOff=Gn.oneOff&&q);const Or=Je(ae,h.replace(v,"")),Pi=ee?function(ki,yo,Lr){return function uu(Nh){const WP=ki.querySelectorAll(yo);for(let{target:vo}=Nh;vo&&vo!==this;vo=vo.parentNode)for(const HP of WP)if(HP===vo)return We(Nh,{delegateTarget:vo}),uu.oneOff&&z.off(ki,Nh.type,yo,Lr),Lr.apply(vo,[Nh])}}(O,_,ae):function(ki,yo){return function Lr(uu){return We(uu,{delegateTarget:ki}),Lr.oneOff&&z.off(ki,uu.type,yo),yo.apply(ki,[uu])}}(O,ae);Pi.delegationSelector=ee?_:null,Pi.callable=ae,Pi.oneOff=q,Pi.uidEvent=Or,Ln[Or]=Pi,O.addEventListener(De,Pi,ee)}function de(O,h,_,D,q){const ee=we(h[_],D,q);ee&&(O.removeEventListener(_,ee,!!q),delete h[_][ee.uidEvent])}function Re(O,h,_,D){const q=h[_]||{};for(const[ee,ae]of Object.entries(q))ee.includes(D)&&de(O,h,_,ae.callable,ae.delegationSelector)}function Ie(O){return O=O.replace(T,""),P[O]||O}const z={on(O,h,_,D){le(O,h,_,D,!1)},one(O,h,_,D){le(O,h,_,D,!0)},off(O,h,_,D){if(typeof h!="string"||!O)return;const[q,ee,ae]=Z(h,_,D),De=ae!==h,_t=Ze(O),Ln=_t[ae]||{},Gn=h.startsWith(".");if(ee===void 0){if(Gn)for(const Or of Object.keys(_t))Re(O,_t,Or,h.slice(1));for(const[Or,Pi]of Object.entries(Ln)){const ki=Or.replace(A,"");De&&!h.includes(ki)||de(O,_t,ae,Pi.callable,Pi.delegationSelector)}}else{if(!Object.keys(Ln).length)return;de(O,_t,ae,ee,q?_:null)}},trigger(O,h,_){if(typeof h!="string"||!O)return null;const D=S();let q=null,ee=!0,ae=!0,De=!1;h!==Ie(h)&&D&&(q=D.Event(h,_),D(O).trigger(q),ee=!q.isPropagationStopped(),ae=!q.isImmediatePropagationStopped(),De=q.isDefaultPrevented());const _t=We(new Event(h,{bubbles:ee,cancelable:!0}),_);return De&&_t.preventDefault(),ae&&O.dispatchEvent(_t),_t.defaultPrevented&&q&&q.preventDefault(),_t}};function We(O,h={}){for(const[_,D]of Object.entries(h))try{O[_]=D}catch{Object.defineProperty(O,_,{configurable:!0,get:()=>D})}return O}function Ke(O){if(O==="true")return!0;if(O==="false")return!1;if(O===Number(O).toString())return Number(O);if(O===""||O==="null")return null;if(typeof O!="string")return O;try{return JSON.parse(decodeURIComponent(O))}catch{return O}}function et(O){return O.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const tt={setDataAttribute(O,h,_){O.setAttribute(`data-bs-${et(h)}`,_)},removeDataAttribute(O,h){O.removeAttribute(`data-bs-${et(h)}`)},getDataAttributes(O){if(!O)return{};const h={},_=Object.keys(O.dataset).filter(D=>D.startsWith("bs")&&!D.startsWith("bsConfig"));for(const D of _){let q=D.replace(/^bs/,"");q=q.charAt(0).toLowerCase()+q.slice(1,q.length),h[q]=Ke(O.dataset[D])}return h},getDataAttribute:(O,h)=>Ke(O.getAttribute(`data-bs-${et(h)}`))};class Dt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,_){const D=d(_)?tt.getDataAttribute(_,"config"):{};return{...this.constructor.Default,...typeof D=="object"?D:{},...d(_)?tt.getDataAttributes(_):{},...typeof h=="object"?h:{}}}_typeCheckConfig(h,_=this.constructor.DefaultType){for(const[q,ee]of Object.entries(_)){const ae=h[q],De=d(ae)?"element":(D=ae)==null?`${D}`:Object.prototype.toString.call(D).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(De))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${q}" provided type "${De}" but expected type "${ee}".`)}var D}}class Ot extends Dt{constructor(h,_){super(),(h=p(h))&&(this._element=h,this._config=this._getConfig(_),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),z.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,_,D=!0){b(h,_,D)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return o.get(p(h),this.DATA_KEY)}static getOrCreateInstance(h,_={}){return this.getInstance(h)||new this(h,typeof _=="object"?_:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const lr=O=>{let h=O.getAttribute("data-bs-target");if(!h||h==="#"){let _=O.getAttribute("href");if(!_||!_.includes("#")&&!_.startsWith("."))return null;_.includes("#")&&!_.startsWith("#")&&(_=`#${_.split("#")[1]}`),h=_&&_!=="#"?_.trim():null}return h?h.split(",").map(_=>l(_)).join(","):null},oe={find:(O,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,O)),findOne:(O,h=document.documentElement)=>Element.prototype.querySelector.call(h,O),children:(O,h)=>[].concat(...O.children).filter(_=>_.matches(h)),parents(O,h){const _=[];let D=O.parentNode.closest(h);for(;D;)_.push(D),D=D.parentNode.closest(h);return _},prev(O,h){let _=O.previousElementSibling;for(;_;){if(_.matches(h))return[_];_=_.previousElementSibling}return[]},next(O,h){let _=O.nextElementSibling;for(;_;){if(_.matches(h))return[_];_=_.nextElementSibling}return[]},focusableChildren(O){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(_=>`${_}:not([tabindex^="-"])`).join(",");return this.find(h,O).filter(_=>!y(_)&&m(_))},getSelectorFromElement(O){const h=lr(O);return h&&oe.findOne(h)?h:null},getElementFromSelector(O){const h=lr(O);return h?oe.findOne(h):null},getMultipleElementsFromSelector(O){const h=lr(O);return h?oe.find(h):[]}},rt=(O,h="hide")=>{const _=`click.dismiss${O.EVENT_KEY}`,D=O.NAME;z.on(document,_,`[data-bs-dismiss="${D}"]`,function(q){if(["A","AREA"].includes(this.tagName)&&q.preventDefault(),y(this))return;const ee=oe.getElementFromSelector(this)||this.closest(`.${D}`);O.getOrCreateInstance(ee)[h]()})},sn=".bs.alert",Qr=`close${sn}`,Ti=`closed${sn}`;class Lt extends Ot{static get NAME(){return"alert"}close(){if(z.trigger(this._element,Qr).defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),z.trigger(this._element,Ti),this.dispose()}static jQueryInterface(h){return this.each(function(){const _=Lt.getOrCreateInstance(this);if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h](this)}})}}rt(Lt,"close"),V(Lt);const Yr='[data-bs-toggle="button"]';class Cr extends Ot{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const _=Cr.getOrCreateInstance(this);h==="toggle"&&_[h]()})}}z.on(document,"click.bs.button.data-api",Yr,O=>{O.preventDefault();const h=O.target.closest(Yr);Cr.getOrCreateInstance(h).toggle()}),V(Cr);const kn=".bs.swipe",bn=`touchstart${kn}`,ur=`touchmove${kn}`,Ii=`touchend${kn}`,ss=`pointerdown${kn}`,_n=`pointerup${kn}`,Nn={endCallback:null,leftCallback:null,rightCallback:null},Ar={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ye extends Dt{constructor(h,_){super(),this._element=h,h&&Ye.isSupported()&&(this._config=this._getConfig(_),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Nn}static get DefaultType(){return Ar}static get NAME(){return"swipe"}dispose(){z.off(this._element,kn)}_start(h){this._supportPointerEvents?this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX):this._deltaX=h.touches[0].clientX}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),B(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=40)return;const _=h/this._deltaX;this._deltaX=0,_&&B(_>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(z.on(this._element,ss,h=>this._start(h)),z.on(this._element,_n,h=>this._end(h)),this._element.classList.add("pointer-event")):(z.on(this._element,bn,h=>this._start(h)),z.on(this._element,ur,h=>this._move(h)),z.on(this._element,Ii,h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&(h.pointerType==="pen"||h.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Pe=".bs.carousel",Gt=".data-api",Rr="next",xn="prev",Xr="left",Mt="right",ao=`slide${Pe}`,Si=`slid${Pe}`,os=`keydown${Pe}`,Ql=`mouseenter${Pe}`,ca=`mouseleave${Pe}`,Jr=`dragstart${Pe}`,lo=`load${Pe}${Gt}`,as=`click${Pe}${Gt}`,zn="carousel",cr="active",ls=".active",Wn=".carousel-item",ha=ls+Wn,Ci={ArrowLeft:Mt,ArrowRight:Xr},us={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},hr={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Pr extends Ot{constructor(h,_){super(h,_),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=oe.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===zn&&this.cycle()}static get Default(){return us}static get DefaultType(){return hr}static get NAME(){return"carousel"}next(){this._slide(Rr)}nextWhenVisible(){!document.hidden&&m(this._element)&&this.next()}prev(){this._slide(xn)}pause(){this._isSliding&&c(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?z.one(this._element,Si,()=>this.cycle()):this.cycle())}to(h){const _=this._getItems();if(h>_.length-1||h<0)return;if(this._isSliding)return void z.one(this._element,Si,()=>this.to(h));const D=this._getItemIndex(this._getActive());if(D===h)return;const q=h>D?Rr:xn;this._slide(q,_[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&z.on(this._element,os,h=>this._keydown(h)),this._config.pause==="hover"&&(z.on(this._element,Ql,()=>this.pause()),z.on(this._element,ca,()=>this._maybeEnableCycle())),this._config.touch&&Ye.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const _ of oe.find(".carousel-item img",this._element))z.on(_,Jr,D=>D.preventDefault());const h={leftCallback:()=>this._slide(this._directionToOrder(Xr)),rightCallback:()=>this._slide(this._directionToOrder(Mt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Ye(this._element,h)}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const _=Ci[h.key];_&&(h.preventDefault(),this._slide(this._directionToOrder(_)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const _=oe.findOne(ls,this._indicatorsElement);_.classList.remove(cr),_.removeAttribute("aria-current");const D=oe.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);D&&(D.classList.add(cr),D.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const _=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=_||this._config.defaultInterval}_slide(h,_=null){if(this._isSliding)return;const D=this._getActive(),q=h===Rr,ee=_||C(this._getItems(),D,q,this._config.wrap);if(ee===D)return;const ae=this._getItemIndex(ee),De=Or=>z.trigger(this._element,Or,{relatedTarget:ee,direction:this._orderToDirection(h),from:this._getItemIndex(D),to:ae});if(De(ao).defaultPrevented||!D||!ee)return;const _t=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ae),this._activeElement=ee;const Ln=q?"carousel-item-start":"carousel-item-end",Gn=q?"carousel-item-next":"carousel-item-prev";ee.classList.add(Gn),x(ee),D.classList.add(Ln),ee.classList.add(Ln),this._queueCallback(()=>{ee.classList.remove(Ln,Gn),ee.classList.add(cr),D.classList.remove(cr,Gn,Ln),this._isSliding=!1,De(Si)},D,this._isAnimated()),_t&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return oe.findOne(ha,this._element)}_getItems(){return oe.find(Wn,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return R()?h===Xr?xn:Rr:h===Xr?Rr:xn}_orderToDirection(h){return R()?h===xn?Xr:Mt:h===xn?Mt:Xr}static jQueryInterface(h){return this.each(function(){const _=Pr.getOrCreateInstance(this,h);if(typeof h!="number"){if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h]()}}else _.to(h)})}}z.on(document,as,"[data-bs-slide], [data-bs-slide-to]",function(O){const h=oe.getElementFromSelector(this);if(!h||!h.classList.contains(zn))return;O.preventDefault();const _=Pr.getOrCreateInstance(h),D=this.getAttribute("data-bs-slide-to");return D?(_.to(D),void _._maybeEnableCycle()):tt.getDataAttribute(this,"slide")==="next"?(_.next(),void _._maybeEnableCycle()):(_.prev(),void _._maybeEnableCycle())}),z.on(window,lo,()=>{const O=oe.find('[data-bs-ride="carousel"]');for(const h of O)Pr.getOrCreateInstance(h)}),V(Pr);const gt=".bs.collapse",L=`show${gt}`,F=`shown${gt}`,j=`hide${gt}`,W=`hidden${gt}`,ne=`click${gt}.data-api`,re="show",fe="collapse",J="collapsing",ge=`:scope .${fe} .${fe}`,ce='[data-bs-toggle="collapse"]',he={parent:null,toggle:!0},xe={parent:"(null|element)",toggle:"boolean"};class Ee extends Ot{constructor(h,_){super(h,_),this._isTransitioning=!1,this._triggerArray=[];const D=oe.find(ce);for(const q of D){const ee=oe.getSelectorFromElement(q),ae=oe.find(ee).filter(De=>De===this._element);ee!==null&&ae.length&&this._triggerArray.push(q)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return he}static get DefaultType(){return xe}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(q=>q!==this._element).map(q=>Ee.getOrCreateInstance(q,{toggle:!1}))),h.length&&h[0]._isTransitioning||z.trigger(this._element,L).defaultPrevented)return;for(const q of h)q.hide();const _=this._getDimension();this._element.classList.remove(fe),this._element.classList.add(J),this._element.style[_]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const D=`scroll${_[0].toUpperCase()+_.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(J),this._element.classList.add(fe,re),this._element.style[_]="",z.trigger(this._element,F)},this._element,!0),this._element.style[_]=`${this._element[D]}px`}hide(){if(this._isTransitioning||!this._isShown()||z.trigger(this._element,j).defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,x(this._element),this._element.classList.add(J),this._element.classList.remove(fe,re);for(const _ of this._triggerArray){const D=oe.getElementFromSelector(_);D&&!this._isShown(D)&&this._addAriaAndCollapsedClass([_],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(J),this._element.classList.add(fe),z.trigger(this._element,W)},this._element,!0)}_isShown(h=this._element){return h.classList.contains(re)}_configAfterMerge(h){return h.toggle=!!h.toggle,h.parent=p(h.parent),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren(ce);for(const _ of h){const D=oe.getElementFromSelector(_);D&&this._addAriaAndCollapsedClass([_],this._isShown(D))}}_getFirstLevelChildren(h){const _=oe.find(ge,this._config.parent);return oe.find(h,this._config.parent).filter(D=>!_.includes(D))}_addAriaAndCollapsedClass(h,_){if(h.length)for(const D of h)D.classList.toggle("collapsed",!_),D.setAttribute("aria-expanded",_)}static jQueryInterface(h){const _={};return typeof h=="string"&&/show|hide/.test(h)&&(_.toggle=!1),this.each(function(){const D=Ee.getOrCreateInstance(this,_);if(typeof h=="string"){if(D[h]===void 0)throw new TypeError(`No method named "${h}"`);D[h]()}})}}z.on(document,ne,ce,function(O){(O.target.tagName==="A"||O.delegateTarget&&O.delegateTarget.tagName==="A")&&O.preventDefault();for(const h of oe.getMultipleElementsFromSelector(this))Ee.getOrCreateInstance(h,{toggle:!1}).toggle()}),V(Ee);const Ue="dropdown",Ce=".bs.dropdown",lt=".data-api",it="ArrowUp",kr="ArrowDown",Hn=`hide${Ce}`,Zr=`hidden${Ce}`,qn=`show${Ce}`,br=`shown${Ce}`,Qt=`click${Ce}${lt}`,Kn=`keydown${Ce}${lt}`,Dn=`keyup${Ce}${lt}`,yn="show",me='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',nt=`${me}.${yn}`,Ct=".dropdown-menu",Ge=R()?"top-end":"top-start",vn=R()?"top-start":"top-end",cs=R()?"bottom-end":"bottom-start",da=R()?"bottom-start":"bottom-end",ah=R()?"left-start":"right-start",Rp=R()?"right-start":"left-start",Pp={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},lh={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class On extends Ot{constructor(h,_){super(h,_),this._popper=null,this._parent=this._element.parentNode,this._menu=oe.next(this._element,Ct)[0]||oe.prev(this._element,Ct)[0]||oe.findOne(Ct,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Pp}static get DefaultType(){return lh}static get NAME(){return Ue}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!z.trigger(this._element,qn,h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const _ of[].concat(...document.body.children))z.on(_,"mouseover",k);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(yn),this._element.classList.add(yn),z.trigger(this._element,br,h)}}hide(){if(y(this._element)||!this._isShown())return;const h={relatedTarget:this._element};this._completeHide(h)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!z.trigger(this._element,Hn,h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))z.off(_,"mouseover",k);this._popper&&this._popper.destroy(),this._menu.classList.remove(yn),this._element.classList.remove(yn),this._element.setAttribute("aria-expanded","false"),tt.removeDataAttribute(this._menu,"popper"),z.trigger(this._element,Zr,h)}}_getConfig(h){if(typeof(h=super._getConfig(h)).reference=="object"&&!d(h.reference)&&typeof h.reference.getBoundingClientRect!="function")throw new TypeError(`${Ue.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(i===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let h=this._element;this._config.reference==="parent"?h=this._parent:d(this._config.reference)?h=p(this._config.reference):typeof this._config.reference=="object"&&(h=this._config.reference);const _=this._getPopperConfig();this._popper=i.createPopper(h,this._menu,_)}_isShown(){return this._menu.classList.contains(yn)}_getPlacement(){const h=this._parent;if(h.classList.contains("dropend"))return ah;if(h.classList.contains("dropstart"))return Rp;if(h.classList.contains("dropup-center"))return"top";if(h.classList.contains("dropdown-center"))return"bottom";const _=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return h.classList.contains("dropup")?_?vn:Ge:_?da:cs}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(_=>Number.parseInt(_,10)):typeof h=="function"?_=>h(_,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(tt.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,...B(this._config.popperConfig,[h])}}_selectMenuItem({key:h,target:_}){const D=oe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(q=>m(q));D.length&&C(D,_,h===kr,!D.includes(_)).focus()}static jQueryInterface(h){return this.each(function(){const _=On.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0)throw new TypeError(`No method named "${h}"`);_[h]()}})}static clearMenus(h){if(h.button===2||h.type==="keyup"&&h.key!=="Tab")return;const _=oe.find(nt);for(const D of _){const q=On.getInstance(D);if(!q||q._config.autoClose===!1)continue;const ee=h.composedPath(),ae=ee.includes(q._menu);if(ee.includes(q._element)||q._config.autoClose==="inside"&&!ae||q._config.autoClose==="outside"&&ae||q._menu.contains(h.target)&&(h.type==="keyup"&&h.key==="Tab"||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const De={relatedTarget:q._element};h.type==="click"&&(De.clickEvent=h),q._completeHide(De)}}static dataApiKeydownHandler(h){const _=/input|textarea/i.test(h.target.tagName),D=h.key==="Escape",q=[it,kr].includes(h.key);if(!q&&!D||_&&!D)return;h.preventDefault();const ee=this.matches(me)?this:oe.prev(this,me)[0]||oe.next(this,me)[0]||oe.findOne(me,h.delegateTarget.parentNode),ae=On.getOrCreateInstance(ee);if(q)return h.stopPropagation(),ae.show(),void ae._selectMenuItem(h);ae._isShown()&&(h.stopPropagation(),ae.hide(),ee.focus())}}z.on(document,Kn,me,On.dataApiKeydownHandler),z.on(document,Kn,Ct,On.dataApiKeydownHandler),z.on(document,Qt,On.clearMenus),z.on(document,Dn,On.clearMenus),z.on(document,Qt,me,function(O){O.preventDefault(),On.getOrCreateInstance(this).toggle()}),V(On);const uh="backdrop",ei="show",dr=`mousedown.bs.${uh}`,fa={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},pa={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Yl extends Dt{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return fa}static get DefaultType(){return pa}static get NAME(){return uh}show(h){if(!this._config.isVisible)return void B(h);this._append();const _=this._getElement();this._config.isAnimated&&x(_),_.classList.add(ei),this._emulateAnimation(()=>{B(h)})}hide(h){this._config.isVisible?(this._getElement().classList.remove(ei),this._emulateAnimation(()=>{this.dispose(),B(h)})):B(h)}dispose(){this._isAppended&&(z.off(this._element,dr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=p(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),z.on(h,dr,()=>{B(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){b(h,this._getElement(),this._config.isAnimated)}}const He=".bs.focustrap",ma=`focusin${He}`,uo=`keydown.tab${He}`,hs="backward",kp={autofocus:!0,trapElement:null},ch={autofocus:"boolean",trapElement:"element"};class hh extends Dt{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return kp}static get DefaultType(){return ch}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),z.off(document,He),z.on(document,ma,h=>this._handleFocusin(h)),z.on(document,uo,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,z.off(document,He))}_handleFocusin(h){const{trapElement:_}=this._config;if(h.target===document||h.target===_||_.contains(h.target))return;const D=oe.focusableChildren(_);D.length===0?_.focus():this._lastTabNavDirection===hs?D[D.length-1].focus():D[0].focus()}_handleKeydown(h){h.key==="Tab"&&(this._lastTabNavDirection=h.shiftKey?hs:"forward")}}const dh=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",fh=".sticky-top",ga="padding-right",ds="margin-right";class fr{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ga,_=>_+h),this._setElementAttributes(dh,ga,_=>_+h),this._setElementAttributes(fh,ds,_=>_-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ga),this._resetElementAttributes(dh,ga),this._resetElementAttributes(fh,ds)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,_,D){const q=this.getWidth();this._applyManipulationCallback(h,ee=>{if(ee!==this._element&&window.innerWidth>ee.clientWidth+q)return;this._saveInitialAttribute(ee,_);const ae=window.getComputedStyle(ee).getPropertyValue(_);ee.style.setProperty(_,`${D(Number.parseFloat(ae))}px`)})}_saveInitialAttribute(h,_){const D=h.style.getPropertyValue(_);D&&tt.setDataAttribute(h,_,D)}_resetElementAttributes(h,_){this._applyManipulationCallback(h,D=>{const q=tt.getDataAttribute(D,_);q!==null?(tt.removeDataAttribute(D,_),D.style.setProperty(_,q)):D.style.removeProperty(_)})}_applyManipulationCallback(h,_){if(d(h))_(h);else for(const D of oe.find(h,this._element))_(D)}}const wn=".bs.modal",ph=`hide${wn}`,mh=`hidePrevented${wn}`,Ai=`hidden${wn}`,gh=`show${wn}`,bp=`shown${wn}`,Np=`resize${wn}`,ti=`click.dismiss${wn}`,xp=`mousedown.dismiss${wn}`,Dp=`keydown.dismiss${wn}`,co=`click${wn}.data-api`,ho="modal-open",Xl="show",Ri="modal-static",fo={backdrop:!0,focus:!0,keyboard:!0},_h={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Nr extends Ot{constructor(h,_){super(h,_),this._dialog=oe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new fr,this._addEventListeners()}static get Default(){return fo}static get DefaultType(){return _h}static get NAME(){return"modal"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||z.trigger(this._element,gh,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ho),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){this._isShown&&!this._isTransitioning&&(z.trigger(this._element,ph).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Xl),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){z.off(window,wn),z.off(this._dialog,wn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Yl({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new hh({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const _=oe.findOne(".modal-body",this._dialog);_&&(_.scrollTop=0),x(this._element),this._element.classList.add(Xl),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,z.trigger(this._element,bp,{relatedTarget:h})},this._dialog,this._isAnimated())}_addEventListeners(){z.on(this._element,Dp,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),z.on(window,Np,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),z.on(this._element,xp,h=>{z.one(this._element,ti,_=>{this._element===h.target&&this._element===_.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ho),this._resetAdjustments(),this._scrollBar.reset(),z.trigger(this._element,Ai)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(z.trigger(this._element,mh).defaultPrevented)return;const h=this._element.scrollHeight>document.documentElement.clientHeight,_=this._element.style.overflowY;_==="hidden"||this._element.classList.contains(Ri)||(h||(this._element.style.overflowY="hidden"),this._element.classList.add(Ri),this._queueCallback(()=>{this._element.classList.remove(Ri),this._queueCallback(()=>{this._element.style.overflowY=_},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,_=this._scrollBar.getWidth(),D=_>0;if(D&&!h){const q=R()?"paddingLeft":"paddingRight";this._element.style[q]=`${_}px`}if(!D&&h){const q=R()?"paddingRight":"paddingLeft";this._element.style[q]=`${_}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,_){return this.each(function(){const D=Nr.getOrCreateInstance(this,h);if(typeof h=="string"){if(D[h]===void 0)throw new TypeError(`No method named "${h}"`);D[h](_)}})}}z.on(document,co,'[data-bs-toggle="modal"]',function(O){const h=oe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&O.preventDefault(),z.one(h,gh,D=>{D.defaultPrevented||z.one(h,Ai,()=>{m(this)&&this.focus()})});const _=oe.findOne(".modal.show");_&&Nr.getInstance(_).hide(),Nr.getOrCreateInstance(h).toggle(this)}),rt(Nr),V(Nr);const Be=".bs.offcanvas",yh=".data-api",Op=`load${Be}${yh}`,Jl="show",Zl="showing",eu="hiding",po=".offcanvas.show",vh=`show${Be}`,xr=`shown${Be}`,wh=`hide${Be}`,Eh=`hidePrevented${Be}`,fs=`hidden${Be}`,Th=`resize${Be}`,tu=`click${Be}${yh}`,_a=`keydown.dismiss${Be}`,Ih={backdrop:!0,keyboard:!0,scroll:!1},ya={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Dr extends Ot{constructor(h,_){super(h,_),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ih}static get DefaultType(){return ya}static get NAME(){return"offcanvas"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||z.trigger(this._element,vh,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new fr().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Zl),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Jl),this._element.classList.remove(Zl),z.trigger(this._element,xr,{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(z.trigger(this._element,wh).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(eu),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Jl,eu),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new fr().reset(),z.trigger(this._element,fs)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=!!this._config.backdrop;return new Yl({className:"offcanvas-backdrop",isVisible:h,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:h?()=>{this._config.backdrop!=="static"?this.hide():z.trigger(this._element,Eh)}:null})}_initializeFocusTrap(){return new hh({trapElement:this._element})}_addEventListeners(){z.on(this._element,_a,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():z.trigger(this._element,Eh))})}static jQueryInterface(h){return this.each(function(){const _=Dr.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h](this)}})}}z.on(document,tu,'[data-bs-toggle="offcanvas"]',function(O){const h=oe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&O.preventDefault(),y(this))return;z.one(h,fs,()=>{m(this)&&this.focus()});const _=oe.findOne(po);_&&_!==h&&Dr.getInstance(_).hide(),Dr.getOrCreateInstance(h).toggle(this)}),z.on(window,Op,()=>{for(const O of oe.find(po))Dr.getOrCreateInstance(O).show()}),z.on(window,Th,()=>{for(const O of oe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(O).position!=="fixed"&&Dr.getOrCreateInstance(O).hide()}),rt(Dr),V(Dr);const nu={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},mo=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Sh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ch=(O,h)=>{const _=O.nodeName.toLowerCase();return h.includes(_)?!mo.has(_)||!!Sh.test(O.nodeValue):h.filter(D=>D instanceof RegExp).some(D=>D.test(_))},ru={allowList:nu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},iu={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ah={entry:"(string|element|function|null)",selector:"(string|element)"};class va extends Dt{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return ru}static get DefaultType(){return iu}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[q,ee]of Object.entries(this._config.content))this._setContent(h,ee,q);const _=h.children[0],D=this._resolvePossibleFunction(this._config.extraClass);return D&&_.classList.add(...D.split(" ")),_}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[_,D]of Object.entries(h))super._typeCheckConfig({selector:_,entry:D},Ah)}_setContent(h,_,D){const q=oe.findOne(D,h);q&&((_=this._resolvePossibleFunction(_))?d(_)?this._putElementInTemplate(p(_),q):this._config.html?q.innerHTML=this._maybeSanitize(_):q.textContent=_:q.remove())}_maybeSanitize(h){return this._config.sanitize?function(_,D,q){if(!_.length)return _;if(q&&typeof q=="function")return q(_);const ee=new window.DOMParser().parseFromString(_,"text/html"),ae=[].concat(...ee.body.querySelectorAll("*"));for(const De of ae){const _t=De.nodeName.toLowerCase();if(!Object.keys(D).includes(_t)){De.remove();continue}const Ln=[].concat(...De.attributes),Gn=[].concat(D["*"]||[],D[_t]||[]);for(const Or of Ln)Ch(Or,Gn)||De.removeAttribute(Or.nodeName)}return ee.body.innerHTML}(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return B(h,[this])}_putElementInTemplate(h,_){if(this._config.html)return _.innerHTML="",void _.append(h);_.textContent=h.textContent}}const Rh=new Set(["sanitize","allowList","sanitizeFn"]),wa="fade",pr="show",su=".modal",ou="hide.bs.modal",ps="hover",Ea="focus",Ta={AUTO:"auto",TOP:"top",RIGHT:R()?"left":"right",BOTTOM:"bottom",LEFT:R()?"right":"left"},En={allowList:nu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ph={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ni extends Ot{constructor(h,_){if(i===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(h,_),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return En}static get DefaultType(){return Ph}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),z.off(this._element.closest(su),ou,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const h=z.trigger(this._element,this.constructor.eventName("show")),_=(I(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!_)return;this._disposePopper();const D=this._getTipElement();this._element.setAttribute("aria-describedby",D.getAttribute("id"));const{container:q}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(q.append(D),z.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(D),D.classList.add(pr),"ontouchstart"in document.documentElement)for(const ee of[].concat(...document.body.children))z.on(ee,"mouseover",k);this._queueCallback(()=>{z.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!z.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(pr),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))z.off(h,"mouseover",k);this._activeTrigger.click=!1,this._activeTrigger[Ea]=!1,this._activeTrigger[ps]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),z.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const _=this._getTemplateFactory(h).toHtml();if(!_)return null;_.classList.remove(wa,pr),_.classList.add(`bs-${this.constructor.NAME}-auto`);const D=(q=>{do q+=Math.floor(1e6*Math.random());while(document.getElementById(q));return q})(this.constructor.NAME).toString();return _.setAttribute("id",D),this._isAnimated()&&_.classList.add(wa),_}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new va({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(wa)}_isShown(){return this.tip&&this.tip.classList.contains(pr)}_createPopper(h){const _=B(this._config.placement,[this,h,this._element]),D=Ta[_.toUpperCase()];return i.createPopper(this._element,h,this._getPopperConfig(D))}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(_=>Number.parseInt(_,10)):typeof h=="function"?_=>h(_,this._element):h}_resolvePossibleFunction(h){return B(h,[this._element])}_getPopperConfig(h){const _={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:D=>{this._getTipElement().setAttribute("data-popper-placement",D.state.placement)}}]};return{..._,...B(this._config.popperConfig,[_])}}_setListeners(){const h=this._config.trigger.split(" ");for(const _ of h)if(_==="click")z.on(this._element,this.constructor.eventName("click"),this._config.selector,D=>{this._initializeOnDelegatedTarget(D).toggle()});else if(_!=="manual"){const D=_===ps?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),q=_===ps?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");z.on(this._element,D,this._config.selector,ee=>{const ae=this._initializeOnDelegatedTarget(ee);ae._activeTrigger[ee.type==="focusin"?Ea:ps]=!0,ae._enter()}),z.on(this._element,q,this._config.selector,ee=>{const ae=this._initializeOnDelegatedTarget(ee);ae._activeTrigger[ee.type==="focusout"?Ea:ps]=ae._element.contains(ee.relatedTarget),ae._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},z.on(this._element.closest(su),ou,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,_){clearTimeout(this._timeout),this._timeout=setTimeout(h,_)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const _=tt.getDataAttributes(this._element);for(const D of Object.keys(_))Rh.has(D)&&delete _[D];return h={..._,...typeof h=="object"&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=h.container===!1?document.body:p(h.container),typeof h.delay=="number"&&(h.delay={show:h.delay,hide:h.delay}),typeof h.title=="number"&&(h.title=h.title.toString()),typeof h.content=="number"&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const[_,D]of Object.entries(this._config))this.constructor.Default[_]!==D&&(h[_]=D);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const _=ni.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0)throw new TypeError(`No method named "${h}"`);_[h]()}})}}V(ni);const ms={...ni.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},u={...ni.DefaultType,content:"(null|string|element|function)"};class f extends ni{static get Default(){return ms}static get DefaultType(){return u}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const _=f.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0)throw new TypeError(`No method named "${h}"`);_[h]()}})}}V(f);const g=".bs.scrollspy",w=`activate${g}`,U=`click${g}`,$=`load${g}.data-api`,X="active",$e="[href]",Pt=".nav-link",Le=`${Pt}, .nav-item > ${Pt}, .list-group-item`,Bt={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},$t={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class mr extends Ot{constructor(h,_){super(h,_),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Bt}static get DefaultType(){return $t}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=p(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,typeof h.threshold=="string"&&(h.threshold=h.threshold.split(",").map(_=>Number.parseFloat(_))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(z.off(this._config.target,U),z.on(this._config.target,U,$e,h=>{const _=this._observableSections.get(h.target.hash);if(_){h.preventDefault();const D=this._rootElement||window,q=_.offsetTop-this._element.offsetTop;if(D.scrollTo)return void D.scrollTo({top:q,behavior:"smooth"});D.scrollTop=q}}))}_getNewObserver(){const h={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(_=>this._observerCallback(_),h)}_observerCallback(h){const _=ae=>this._targetLinks.get(`#${ae.target.id}`),D=ae=>{this._previousScrollData.visibleEntryTop=ae.target.offsetTop,this._process(_(ae))},q=(this._rootElement||document.documentElement).scrollTop,ee=q>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=q;for(const ae of h){if(!ae.isIntersecting){this._activeTarget=null,this._clearActiveClass(_(ae));continue}const De=ae.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ee&&De){if(D(ae),!q)return}else ee||De||D(ae)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=oe.find($e,this._config.target);for(const _ of h){if(!_.hash||y(_))continue;const D=oe.findOne(decodeURI(_.hash),this._element);m(D)&&(this._targetLinks.set(decodeURI(_.hash),_),this._observableSections.set(_.hash,D))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(X),this._activateParents(h),z.trigger(this._element,w,{relatedTarget:h}))}_activateParents(h){if(h.classList.contains("dropdown-item"))oe.findOne(".dropdown-toggle",h.closest(".dropdown")).classList.add(X);else for(const _ of oe.parents(h,".nav, .list-group"))for(const D of oe.prev(_,Le))D.classList.add(X)}_clearActiveClass(h){h.classList.remove(X);const _=oe.find(`${$e}.${X}`,h);for(const D of _)D.classList.remove(X)}static jQueryInterface(h){return this.each(function(){const _=mr.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h]()}})}}z.on(window,$,()=>{for(const O of oe.find('[data-bs-spy="scroll"]'))mr.getOrCreateInstance(O)}),V(mr);const Vt=".bs.tab",Ia=`hide${Vt}`,au=`hidden${Vt}`,AP=`show${Vt}`,RP=`shown${Vt}`,PP=`click${Vt}`,kP=`keydown${Vt}`,bP=`load${Vt}`,NP="ArrowLeft",qv="ArrowRight",xP="ArrowUp",Kv="ArrowDown",Lp="Home",Gv="End",go="active",Qv="fade",Mp="show",Yv=".dropdown-toggle",Vp=`:not(${Yv})`,Xv='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Fp=`.nav-link${Vp}, .list-group-item${Vp}, [role="tab"]${Vp}, ${Xv}`,DP=`.${go}[data-bs-toggle="tab"], .${go}[data-bs-toggle="pill"], .${go}[data-bs-toggle="list"]`;class _o extends Ot{constructor(h){super(h),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),z.on(this._element,kP,_=>this._keydown(_)))}static get NAME(){return"tab"}show(){const h=this._element;if(this._elemIsActive(h))return;const _=this._getActiveElem(),D=_?z.trigger(_,Ia,{relatedTarget:h}):null;z.trigger(h,AP,{relatedTarget:_}).defaultPrevented||D&&D.defaultPrevented||(this._deactivate(_,h),this._activate(h,_))}_activate(h,_){h&&(h.classList.add(go),this._activate(oe.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),z.trigger(h,RP,{relatedTarget:_})):h.classList.add(Mp)},h,h.classList.contains(Qv)))}_deactivate(h,_){h&&(h.classList.remove(go),h.blur(),this._deactivate(oe.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),z.trigger(h,au,{relatedTarget:_})):h.classList.remove(Mp)},h,h.classList.contains(Qv)))}_keydown(h){if(![NP,qv,xP,Kv,Lp,Gv].includes(h.key))return;h.stopPropagation(),h.preventDefault();const _=this._getChildren().filter(q=>!y(q));let D;if([Lp,Gv].includes(h.key))D=_[h.key===Lp?0:_.length-1];else{const q=[qv,Kv].includes(h.key);D=C(_,h.target,q,!0)}D&&(D.focus({preventScroll:!0}),_o.getOrCreateInstance(D).show())}_getChildren(){return oe.find(Fp,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,_){this._setAttributeIfNotExists(h,"role","tablist");for(const D of _)this._setInitialAttributesOnChild(D)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const _=this._elemIsActive(h),D=this._getOuterElement(h);h.setAttribute("aria-selected",_),D!==h&&this._setAttributeIfNotExists(D,"role","presentation"),_||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const _=oe.getElementFromSelector(h);_&&(this._setAttributeIfNotExists(_,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(_,"aria-labelledby",`${h.id}`))}_toggleDropDown(h,_){const D=this._getOuterElement(h);if(!D.classList.contains("dropdown"))return;const q=(ee,ae)=>{const De=oe.findOne(ee,D);De&&De.classList.toggle(ae,_)};q(Yv,go),q(".dropdown-menu",Mp),D.setAttribute("aria-expanded",_)}_setAttributeIfNotExists(h,_,D){h.hasAttribute(_)||h.setAttribute(_,D)}_elemIsActive(h){return h.classList.contains(go)}_getInnerElement(h){return h.matches(Fp)?h:oe.findOne(Fp,h)}_getOuterElement(h){return h.closest(".nav-item, .list-group-item")||h}static jQueryInterface(h){return this.each(function(){const _=_o.getOrCreateInstance(this);if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h]()}})}}z.on(document,PP,Xv,function(O){["A","AREA"].includes(this.tagName)&&O.preventDefault(),y(this)||_o.getOrCreateInstance(this).show()}),z.on(window,bP,()=>{for(const O of oe.find(DP))_o.getOrCreateInstance(O)}),V(_o);const gs=".bs.toast",OP=`mouseover${gs}`,LP=`mouseout${gs}`,MP=`focusin${gs}`,VP=`focusout${gs}`,FP=`hide${gs}`,UP=`hidden${gs}`,jP=`show${gs}`,BP=`shown${gs}`,Jv="hide",kh="show",bh="showing",$P={animation:"boolean",autohide:"boolean",delay:"number"},zP={animation:!0,autohide:!0,delay:5e3};class lu extends Ot{constructor(h,_){super(h,_),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return zP}static get DefaultType(){return $P}static get NAME(){return"toast"}show(){z.trigger(this._element,jP).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Jv),x(this._element),this._element.classList.add(kh,bh),this._queueCallback(()=>{this._element.classList.remove(bh),z.trigger(this._element,BP),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(z.trigger(this._element,FP).defaultPrevented||(this._element.classList.add(bh),this._queueCallback(()=>{this._element.classList.add(Jv),this._element.classList.remove(bh,kh),z.trigger(this._element,UP)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(kh),super.dispose()}isShown(){return this._element.classList.contains(kh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,_){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=_;break;case"focusin":case"focusout":this._hasKeyboardInteraction=_}if(_)return void this._clearTimeout();const D=h.relatedTarget;this._element===D||this._element.contains(D)||this._maybeScheduleHide()}_setListeners(){z.on(this._element,OP,h=>this._onInteraction(h,!0)),z.on(this._element,LP,h=>this._onInteraction(h,!1)),z.on(this._element,MP,h=>this._onInteraction(h,!0)),z.on(this._element,VP,h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const _=lu.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0)throw new TypeError(`No method named "${h}"`);_[h](this)}})}}return rt(lu),V(lu),{Alert:Lt,Button:Cr,Carousel:Pr,Collapse:Ee,Dropdown:On,Modal:Nr,Offcanvas:Dr,Popover:f,ScrollSpy:mr,Tab:_o,Toast:lu,Tooltip:ni}})})(PB);Om.createRoot(document.getElementById("root")).render(G.jsx(T_.StrictMode,{children:G.jsx(Jx,{router:RB})}));
